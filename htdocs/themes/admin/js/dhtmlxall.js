/*
Product Name: dhtmlxSuite 
Version: 5.1.0 
Edition: Standard 
License: content of this file is covered by DHTMLX Commercial or enterpri. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.1.0",skin:null,skinDetect:function(a){var b=Math.floor(dhx4.readFromCss(a+"_skin_detect")/10)*10;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[b]||null},readFromCss:function(c,e,g){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(g)=="string"){b.innerHTML=g}var a=b[e||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(e){var j=e.getBoundingClientRect();var k=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||k.scrollTop;var g=window.pageXOffset||b.scrollLeft||k.scrollLeft;var h=b.clientTop||k.clientTop||0;var l=b.clientLeft||k.clientLeft||0;var m=j.top+a-h;var c=j.left+g-l;return{top:Math.round(m),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(e){if(this._isObj(e)){var c={};for(var b in e){if(typeof(e[b])=="object"&&e[b]!=null){c[b]=this._copyObj(e[b])}else{c[b]=e[b]}}}else{var c=[];for(var b=0;b<e.length;b++){if(typeof(e[b])=="object"&&e[b]!=null){c[b]=this._copyObj(e[b])}else{c[b]=e[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(g,j,b){g=(typeof(g)=="string"?document.getElementById(g):g);var a=g.value.length;j=Math.max(Math.min(j,a),0);b=Math.min(b,a);if(g.setSelectionRange){try{g.setSelectionRange(j,b)}catch(h){}}else{if(g.createTextRange){var c=g.createTextRange();c.moveStart("character",j);c.moveEnd("character",b-a);try{c.select()}catch(h){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var j=arguments[1];var h=window.dhx4.trim(arguments[3]);var l=null;var g=[c[j]];if(h.length>0){h=h.split(":");var e=[];for(var m=0;m<h.length;m++){if(m>0&&e[e.length-1].match(/\\$/)!=null){e[e.length-1]=e[e.length-1].replace(/\\$/,"")+":"+h[m]}else{e.push(h[m])}}l=e[0];for(var m=1;m<e.length;m++){g.push(e[m])}}if(typeof(l)=="string"&&typeof(window.dhx4.template[l])=="function"){return window.dhx4.template[l].apply(window.dhx4.template,g)}if(j.length>0&&typeof(c[j])!="undefined"){if(a==true){return window.dhx4.trim(c[j])}return String(c[j])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(e,g,c,a){var b=window.dhx4.template._parseFmt(g,c,a);if(b==false){return e}return window.dhx4.template._getFmtValue(e,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(j,c,a){var e=j.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(e==null||e.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(e[1])=="string"?e[1]:""),s_aft:(typeof(e[3])=="string"?e[3]:"")};var h=e[2].split(".");if(h[1]!=null){b.d_len=h[1].length}var g=h[0].split(",");if(g.length>1){b.i_len=g[g.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(h,e,a){if(e==null||typeof(e)=="undefined"){e=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(h instanceof Date){var g=function(j){return(String(j).length==1?"0"+String(j):j)};var b=function(k){switch(k){case"%d":return g(h.getDate());case"%j":return h.getDate();case"%D":return a.dayShortName[h.getDay()];case"%l":return a.dayFullName[h.getDay()];case"%m":return g(h.getMonth()+1);case"%n":return h.getMonth()+1;case"%M":return a.monthShortName[h.getMonth()];case"%F":return a.monthFullName[h.getMonth()];case"%y":return g(h.getYear()%100);case"%Y":return h.getFullYear();case"%g":return(h.getHours()+11)%12+1;case"%h":return g((h.getHours()+11)%12+1);case"%G":return h.getHours();case"%H":return g(h.getHours());case"%i":return g(h.getMinutes());case"%s":return g(h.getSeconds());case"%a":return(h.getHours()>11?"pm":"am");case"%A":return(h.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return h.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var n=h.getTimezoneOffset();var l=Math.abs(Math.floor(n/60));var j=Math.abs(n)-l*60;return(n>0?"-":"+")+g(l)+":"+g(j);default:return k}};var c=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(h))};window.dhx4.str2date=function(h,u,z){if(u==null||typeof(u)=="undefined"){u=window.dhx4.dateFormat[window.dhx4.dateLang]}if(z==null||typeof(z)=="undefined"){z=window.dhx4.dateStrings[window.dhx4.dateLang]}u=u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var y=[];var m=[];u=u.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":m.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":m.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":m.push(e);return"(\\d{1,2})";case"%Y":m.push(e);return"(\\d{4})";case"%a":m.push(e);return"([a|p]m)";case"%A":m.push(e);return"([A|P]M)";case"%u":m.push(e);return"(\\d{1,6})";case"%P":m.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var A=new RegExp(u,"i");var n=h.match(A);if(n==null||n.length-1!=m.length){return"Invalid Date"}for(var b=1;b<n.length;b++){y.push(n[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var o={};var l={};for(var b=0;b<m.length;b++){if(typeof(c[m[b]])!="undefined"){var g=c[m[b]];if(!o[g]){o[g]=[];l[g]=[]}o[g].push(y[b]);l[g].push(m[b])}}y=[];m=[];for(var b=1;b<=7;b++){if(o[b]!=null){for(var t=0;t<o[b].length;t++){y.push(o[b][t]);m.push(l[b][t])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var s=function(r,e){for(var k=0;k<e.length;k++){if(e[k].toLowerCase()==r){return k}}return -1};for(var b=0;b<y.length;b++){switch(m[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(y[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[m[b]]](Number(y[b])+(m[b]=="%m"||m[b]=="%n"?-1:0))}break;case"%M":case"%F":var j=s(y[b].toLowerCase(),z[{"%M":"monthShortName","%F":"monthFullName"}[m[b]]]);if(j>=0){a.setMonth(j)}break;case"%y":if(!isNaN(y[b])){var x=Number(y[b]);a.setFullYear(x+(x>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(y[b])){var x=Number(y[b]);if(x<=12&&x>=0){a.setHours(x+(s("pm",y)>=0?(x==12?0:12):(x==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=y[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,g,c){if(typeof g.status=="undefined"||g.status<400){xml=(!g.responseXML)?dhx4.ajax.parse(g.responseText||g):(g.responseXML||g);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(h){return[]}}else{var g=[];var j;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(j=b.iterateNext()){g.push(j)}return g}},query:function(a){return dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(b,c,e,k,m,r,h){if(typeof e==="object"){var j=[];for(var n in e){j.push(n+"="+encodeURIComponent(e[n]))}e=j.join("&")}var g=dhx.promise.defer();var q=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var l=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(k==true){q.onreadystatechange=function(){if((q.readyState==4)||(l==true&&q.readyState==3)){if(q.status!=200||q.responseText==""){g.reject(q);if(!dhx4.callEvent("onAjaxError",[{xmlDoc:q,filePath:c,async:k}])){return}}window.setTimeout(function(){if(typeof(m)=="function"){try{m.apply(window,[{xmlDoc:q,filePath:c,async:k}])}catch(a){g.reject(a)}g.resolve(q.responseText)}if(r!=null){if(typeof(r.postData)!="undefined"){dhx4.ajax.postLong(r.url,r.postData,m)}else{dhx4.ajax.getLong(r.url,m)}}m=null;q=null},1)}}}if(b=="GET"){c+=this._dhxr(c)}q.open(b,c,k);if(h!=null){for(var o in h){q.setRequestHeader(o,h[o])}}else{if(b=="POST"||b=="PUT"||b=="DELETE"){q.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(b=="GET"){e=null}}}q.setRequestHeader("X-Requested-With","XMLHttpRequest");q.send(e);if(k!=true){if((q.readyState==4)||(l==true&&q.readyState==3)){if(q.status!=200||q.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:q,filePath:c,async:k}])}}}g.xmlDoc=q;g.filePath=c;g.async=k;return g},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(j,c,h,g,l){if(l=="clear"){for(var b in j._dhxdataload){j._dhxdataload[b]=null;delete j._dhxdataload[b]}j._loadData=null;j._dhxdataload=null;j.load=null;j.loadStruct=null;j=null;return}j._dhxdataload={initObj:c,xmlToJson:h,xmlRootTag:g,onBeforeXLS:null};j._loadData=function(r,s,u){if(arguments.length==2){u=s;s=null}var q=null;if(arguments.length==3){u=arguments[2]}this.callEvent("onXLS",[]);if(typeof(r)=="string"){var o=r.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var x=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(x.test(o.replace(/^<\?xml[^\?]*\?>\s*/,""))){q=dhx4.ajax.parse(r);if(q!=null){q=this[this._dhxdataload.xmlToJson].apply(this,[q])}}if(q==null&&(o.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||o.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){q=dhx4.s2j(o)}if(q==null){var n=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var o=this._dhxdataload.onBeforeXLS.apply(this,[r]);if(o!=null&&typeof(o)=="object"){if(o.url!=null){r=o.url}if(o.params!=null){for(var v in o.params){n.push(v+"="+encodeURIComponent(o.params[v]))}}}}var w=this;var m=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=w[w._dhxdataload.xmlToJson].apply(w,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){w[w._dhxdataload.initObj].apply(w,[k,r])}w.callEvent("onXLE",[]);if(u!=null){if(typeof(u)=="function"){u.apply(w,[])}else{if(typeof(window[u])=="function"){window[u].apply(w,[])}}}m=u=null;k=a=w=null};n=n.join("&")+(typeof(s)=="string"?"&"+s:"");if(dhx4.ajax.method=="post"){return dhx4.ajax.post(r,n,m)}else{if(dhx4.ajax.method=="get"){return dhx4.ajax.get(r+(n.length>0?(r.indexOf("?")>0?"&":"?")+n:""),m)}}return}}else{if(typeof(r.documentElement)=="object"||(typeof(r.tagName)!="undefined"&&typeof(r.getElementsByTagName)!="undefined"&&r.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){q=this[this._dhxdataload.xmlToJson].apply(this,[r])}else{q=window.dhx4._copyObj(r)}}if(q!=null){this[this._dhxdataload.initObj].apply(this,[q])}this.callEvent("onXLE",[]);if(u!=null){if(typeof(u)=="function"){u.apply(this,[])}else{if(typeof(window[u])=="function"){window[u].apply(this,[])}}u=null}};if(l!=null){var e={struct:"loadStruct",data:"load"};for(var b in l){if(l[b]==true){j[e[b]]=function(){return this._loadData.apply(this,arguments)}}}}j=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,g){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var e=window.dhx4.newId();this.dhxevs.data[c][e]=g;return e};a.detachEvent=function(h){for(var e in this.dhxevs.data){var g=0;for(var c in this.dhxevs.data[e]){if(c==h){this.dhxevs.data[e][c]=null;delete this.dhxevs.data[e][c]}else{g++}}if(g==0){this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(e,h){e=String(e).toLowerCase();if(this.dhxevs.data[e]==null){return true}var g=true;for(var c in this.dhxevs.data[e]){g=this.dhxevs.data[e][c].apply(this,h)&&g}return g};a.detachAllEvents=function(){for(var e in this.dhxevs.data){for(var c in this.dhxevs.data[e]){this.dhxevs.data[e][c]=null;delete this.dhxevs.data[e][c]}this.dhxevs.data[e]=null;delete this.dhxevs.data[e]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(e,c){for(var g in c){if(!e[g]){e[g]=c[g]}}return e},extend_api:function(a,e,c){var b=window[a];if(!b){return}window[a]=function(j){if(j&&typeof j=="object"&&!j.tagName){var h=b.apply(this,(e._init?e._init(j):arguments));for(var g in dhtmlx){if(e[g]){this[e[g]](dhtmlx[g])}}for(var g in j){if(e[g]){this[e[g]](j[g])}else{if(g.indexOf("on")===0){this.attachEvent(g,j[g])}}}}else{var h=b.apply(this,arguments)}if(e._patch){e._patch(this)}return h||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var h=document.createElement("Div");h.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=h.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var g=c.target}else{g=c.srcElement}dragger.checkLanding(g,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(g){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var e=0;var b=0;while(c){e+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);e+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(g){return e+"_"+b}else{this.fx=e}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,g){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(g))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||g)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var e;var g;var b,a;dhtmlxEvent(document.body,"touchstart",function(h){g=h.touches[0].target;b=h.touches[0].clientX;a=h.touches[0].clientY;e=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(g){var h=document.createEvent("HTMLEvents");h.initEvent("dblclick",true,true);g.dispatchEvent(h);e=g=null}}dhtmlxEvent(document.body,"touchmove",function(h){if(e){if(Math.abs(h.touches[0].clientX-b)>50||Math.abs(h.touches[0].clientY-a)>50){window.clearTimeout(e);e=g=false}}});dhtmlxEvent(document.body,"touchend",function(h){if(e){window.clearTimeout(e);e=g=false}});dhtmlxEvent.initTouch=function(){}}}(function(b){var c=typeof setImmediate!=="undefined"?setImmediate:function(g){setTimeout(g,0)};function e(h,j){var g=this;g.promise=g;g.state="pending";g.val=null;g.fn=h||null;g.er=j||null;g.next=[]}e.prototype.resolve=function(h){var g=this;if(g.state==="pending"){g.val=h;g.state="resolving";c(function(){g.fire()})}};e.prototype.reject=function(h){var g=this;if(g.state==="pending"){g.val=h;g.state="rejecting";c(function(){g.fire()})}};e.prototype.then=function(h,k){var g=this;var j=new e(h,k);g.next.push(j);if(g.state==="resolved"){j.resolve(g.val)}if(g.state==="rejected"){j.reject(g.val)}return j};e.prototype.fail=function(g){return this.then(null,g)};e.prototype.finish=function(j){var g=this;g.state=j;if(g.state==="resolved"){for(var h=0;h<g.next.length;h++){g.next[h].resolve(g.val)}}if(g.state==="rejected"){for(var h=0;h<g.next.length;h++){g.next[h].reject(g.val)}if(!g.next.length){throw (g.val)}}};e.prototype.thennable=function(l,g,j,o,n){var h=this;n=n||h.val;if(typeof n==="object"&&typeof l==="function"){try{var k=0;l.call(n,function(q){if(k++!==0){return}g(q)},function(q){if(k++!==0){return}j(q)})}catch(m){j(m)}}else{o(n)}};e.prototype.fire=function(){var g=this;var h;try{h=g.val&&g.val.then}catch(j){g.val=j;g.state="rejecting";return g.fire()}g.thennable(h,function(k){g.val=k;g.state="resolving";g.fire()},function(k){g.val=k;g.state="rejecting";g.fire()},function(k){g.val=k;if(g.state==="resolving"&&typeof g.fn==="function"){try{g.val=g.fn.call(undefined,g.val)}catch(l){g.val=l;return g.finish("rejected")}}if(g.state==="rejecting"&&typeof g.er==="function"){try{g.val=g.er.call(undefined,g.val);g.state="resolving"}catch(l){g.val=l;return g.finish("rejected")}}if(g.val===g){g.val=TypeError();return g.finish("rejected")}g.thennable(h,function(m){g.val=m;g.finish("resolved")},function(m){g.val=m;g.finish("rejected")},function(m){g.val=m;g.state==="resolving"?g.finish("resolved"):g.finish("rejected")})})};e.prototype.done=function(){if(this.state="rejected"&&!this.next){throw this.val}return null};e.prototype.nodeify=function(g){if(typeof g==="function"){return this.then(function(j){try{g(null,j)}catch(h){setImmediate(function(){throw h})}return j},function(j){try{g(j)}catch(h){setImmediate(function(){throw h})}return j})}return this};e.prototype.spread=function(g,h){return this.all().then(function(j){return typeof g==="function"&&g.apply(null,j)},h)};e.prototype.all=function(){var g=this;return this.then(function(s){var h=new e();if(!(s instanceof Array)){h.reject(TypeError);return h}var k=0;var r=s.length;function n(){if(++k===r){h.resolve(s)}}for(var o=0,m=s.length;o<m;o++){var t=s[o];var j;try{j=t&&t.then}catch(q){h.reject(q);break}(function(l){g.thennable(j,function(u){s[l]=u;n()},function(u){h.reject(u)},function(){n()},t)})(o)}return h})};var a={all:function(g){var h=new e(null,null);h.resolve(g);return h.all()},defer:function(){return new e(null,null)},fcall:function(){var j=new e();var g=Array.apply([],arguments);var h=g.shift();try{var l=h.apply(null,g);j.resolve(l)}catch(k){j.reject(k)}return j},nfcall:function(){var j=new e();var g=Array.apply([],arguments);var h=g.shift();try{g.push(function(l,m){if(l){return j.reject(l)}return j.resolve(m)});h.apply(null,g)}catch(k){j.reject(k)}return j}};b.promise=a})(dhx);if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(b,a){if(!b){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(h,c){if(!h._event_check){h._event_check={};h._event_check_size={}}for(var b in c){h._event_check[b.toLowerCase()]=c[b];var g=-1;for(var e in c[b]){g++}h._event_check_size[b.toLowerCase()]=g}};dhtmlx.assert_method_info=function(g,b,e,h){var a=[];for(var c=0;c<h.length;c++){a.push(h[c][0]+" : "+h[c][1]+"\n   "+h[c][2].describe()+(h[c][3]?"; optional":""))}return g.name+"."+b+"\n"+e+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(c,a){for(var b in a){dhtmlx.assert_method_process(c,b,a[b].descr,a[b].args,(a[b].min||99),a[b].skip)}};dhtmlx.assert_method_process=function(h,b,g,j,c,e){var a=h[b];if(!e){h[b]=function(){if(arguments.length!=j.length&&arguments.length<c){dhtmlx.log("warn","Incorrect count of parameters\n"+h[b].describe()+"\n\nExpecting "+j.length+" but have only "+arguments.length)}else{for(var k=0;k<j.length;k++){if(!j[k][3]&&!j[k][2](arguments[k])){dhtmlx.log("warn","Incorrect method call\n"+h[b].describe()+"\n\nActual value of "+(k+1)+" parameter: {"+(typeof arguments[k])+"} "+arguments[k])}}}return a.apply(this,arguments)}}h[b].describe=function(){return dhtmlx.assert_method_info(h,b,g,j)}};dhtmlx.assert_event_call=function(c,b,a){if(c._event_check){if(!c._event_check[b]){dhtmlx.log("warn","Not expected event call :"+b)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+b)}else{if(c._event_check_size[b]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+c._event_check_size[b]+" parameter(s), but have "+a.length+" parameter(s), for "+b+" event")}}}}};dhtmlx.assert_event_attach=function(b,a){if(b._event_check&&!b._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(b,a){if(!b._settings_check){b._settings_check={}}dhtmlx.extend(b._settings_check,a)};dhtmlx.assert_check=function(c,b){if(typeof c=="object"){for(var a in c){dhtmlx.assert_settings(a,c[a],b)}}};dhtmlx.assert_settings=function(k,g,e){e=e||this._settings_check;if(e){if(!e[k]){return dhtmlx.log("warn","Unknown propery: "+k)}var j="";var b="";var a=false;for(var c=0;c<e[k].length;c++){var h=e[k][c];if(typeof h=="string"){continue}if(typeof h=="function"){a=a||h(g)}else{if(typeof h=="object"&&typeof h[1]=="function"){a=a||h[1](g);if(a&&h[2]){dhtmlx.assert_check(g,h[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(k,e)+"\nActual value: {"+(typeof g)+"} "+g)}}};dhtmlx.assert_info=function(b,h){var a=h[b];var g="";var e=[];for(var c=0;c<a.length;c++){if(typeof rule=="string"){g=a[c]}else{if(a[c].describe){e.push(a[c].describe())}else{if(a[c][1]&&a[c][1].describe){e.push(a[c][1].describe())}}}}return"Property: "+b+", "+g+" \nExpected value: \n - "+e.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,b){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(b){var a=function(c){return b[c]};a.describe=function(){var e=[];for(var c in b){e.push(c)}return"{String} can take one of next values: "+e.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(e,c){var g=function(a){if(e(a)||c(a)){return true}return false};g.describe=function(){return e.describe()};return g}}dhtmlx.codebase="./";dhtmlx.copy=function(b){var a=dhtmlx.copy._function;a.prototype=b;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(b,a){for(var c in a){b[c]=a[c]}if(dhtmlx.assert_enabled()&&a._assert){b._assert();b._assert=null}dhtmlx.assert(b,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){b._init()}return b};dhtmlx.proto_extend=function(){var h=arguments;var c=h[0];var b=[];for(var g=h.length-1;g>0;g--){if(typeof h[g]=="function"){h[g]=h[g].prototype}for(var e in h[g]){if(e=="_init"){b.push(h[g][e])}else{if(!c[e]){c[e]=h[g][e]}}}}if(h[0]._init){b.push(h[0]._init)}c._init=function(){for(var j=0;j<b.length;j++){b[j].apply(this,arguments)}};c.base=h[1];var a=function(j){this._init(j);if(this._parseSettings){this._parseSettings(j,this.defaults)}};a.prototype=c;c=h=null;return a};dhtmlx.bind=function(b,a){return function(){return b.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,c,b){return function(){var e=false;e=a[c].apply(a,arguments);return e}};dhtmlx.isNotDefined=function(b){return typeof b=="undefined"};dhtmlx.delay=function(e,b,c,a){setTimeout(function(){var g=e.apply(b,c);e=b=c=null;return g},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(e,c,a,b){e=dhtmlx.toNode(e);var g=dhtmlx.uid();dhtmlx._events[g]=[e,c,a];if(b){a=dhtmlx.bind(a,b)}if(e.addEventListener){e.addEventListener(c,a,false)}else{if(e.attachEvent){e.attachEvent("on"+c,a)}}return g};dhtmlx.eventRemove=function(b){if(!b){return}dhtmlx.assert(this._events[b],"Removing non-existing event");var a=dhtmlx._events[b];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[b]};dhtmlx.log=function(b,c,a){if(window.console&&console.log){b=b.toLowerCase();if(window.console[b]){window.console[b](c||"unknown error")}else{window.console.log(b+": "+c)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var c="_start_time_log"+a;if(!dhtmlx[c]){dhtmlx[c]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx[c].valueOf())/1000+"s");dhtmlx[c]=null}};dhtmlx.error=function(b,a){dhtmlx.log("error",b,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(c,g){if(this._events._block){return true}c=c.toLowerCase();dhtmlx.assert_event_call(this,c,g);var e=this._events[c.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+c,g)}if(e){for(var b=0;b<e.length;b++){if(e[b].apply(this,(g||[]))===false){a=false}}}if(this._map[c]&&!this._map[c].callEvent(c,g)){a=false}return a},attachEvent:function(b,a,e){b=b.toLowerCase();dhtmlx.assert_event_attach(this,b);e=e||dhtmlx.uid();a=dhtmlx.toFunctor(a);var c=this._events[b]||dhtmlx.toArray();c.push(a);this._events[b]=c;this._handlers[e]={f:a,t:b};return e},detachEvent:function(e){if(this._handlers[e]){var b=this._handlers[e].t;var a=this._handlers[e].f;var c=this._events[b];c.remove(a);delete this._handlers[e]}}};dhtmlx.PowerArray={removeAt:function(b,a){if(b>=0){this.splice(b,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,e){if(!e&&e!==0){this.push(c)}else{var a=this.splice(e,(this.length-e));this[e]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,c){for(var b=0;b<this.length;b++){a.call((c||this),this[b])}},map:function(a,c){for(var b=0;b<this.length;b++){this[b]=a.call((c||this),this[b])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var e=document.createElement("DIV");var c;for(var b=0;b<a.names.length;b++){while(p=a[a.names[b]].pop()){if(typeof e.style[p]!="undefined"){dhtmlx.env[a.names[b]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(b,a,c){a=a||{};var e=document.createElement(b);for(var g in a){e.setAttribute(g,a[g])}if(a.style){e.style.cssText=a.style}if(a["class"]){e.className=a["class"]}if(c){e.innerHTML=c}return e},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.remove(b[a])}}else{if(b&&b.parentNode){b.parentNode.removeChild(b)}}},insertBefore:function(b,c,a){if(!b){return}if(c){c.parentNode.insertBefore(b,c)}else{a.appendChild(b)}},locate:function(b,g){b=b||event;var a=b.target||b.srcElement;while(a){if(a.getAttribute){var c=a.getAttribute(g);if(c){return c}}a=a.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var j=e.getBoundingClientRect();var k=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||k.scrollTop;var g=window.pageXOffset||b.scrollLeft||k.scrollLeft;var h=b.clientTop||k.clientTop||0;var l=b.clientLeft||k.clientLeft||0;var m=j.top+a-h;var c=j.left+g-l;return{y:Math.round(m),x:Math.round(c)}}else{var m=0,c=0;while(e){m=m+parseInt(e.offsetTop,10);c=c+parseInt(e.offsetLeft,10);e=e.offsetParent}return{y:m,x:c}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var b=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(b,a){b.className+=" "+a},removeCss:function(b,a){b.className=b.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(a){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};this.canvases=[];if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var c=0;c<dhtmlx.destructors.length;c++){dhtmlx.destructors[c].destructor(-1)}dhtmlx.destructors=[]}for(var b in dhtmlx._events){var e=dhtmlx._events[b];if(e[0].removeEventListener){e[0].removeEventListener(e[1],e[2],false)}else{if(e[0].detachEvent){e[0].detachEvent("on"+e[1],e[2])}}delete dhtmlx._events[b]}});dhtmlx.ajax=function(a,b,c){if(arguments.length!==0){var e=new dhtmlx.ajax();if(c){e.master=c}e.get(a,null,b)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(g,l,j){var b=this.getXHR();if(typeof j=="function"){j=[j]}if(typeof l=="object"){var h=[];for(var c in l){var k=l[c];if(k===null||k===dhtmlx.undefined){k=""}h.push(c+"="+encodeURIComponent(k))}l=h.join("&")}if(l&&!this.post){g=g+(g.indexOf("?")!=-1?"&":"?")+l;l=null}b.open(this.post?"POST":"GET",g,!this._sync);if(this.post){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var e=this;b.onreadystatechange=function(){if(!b.readyState||b.readyState==4){if(j&&e){for(var a=0;a<j.length;a++){if(j[a]){j[a].call((e.master||e),b.responseText,b.responseXML,b)}}}e.master=null;j=e=null}};b.send(l||null);return b},get:function(a,c,b){this.post=false;return this.send(a,c,b)},post:function(a,c,b){this.post=true;return this.send(a,c,b)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,b){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhtmlx.DataDriver[b];b=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}if(window.dhx4){return dhx4.ajax.get(a,dhtmlx.bind(function(e){var c=e.xmlDoc;var h=c.responseText;var g=c.responseXML;if(this._onLoad){this._onLoad.call(this,h,g,c)}if(b){b.call(this,h,g,c)}},this))}else{dhtmlx.ajax(a,[this._onLoad,b],this)}},parse:function(b,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(b,null)},_onLoad:function(g,b,a){var c=this.data.driver;var e=c.getRecords(c.toObject(g,b))[0];this.data=(c?c.getDetails(e):g);this.callEvent("onXLE",[])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||!b){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(b.id||b),b)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(e,c){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(e)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&a.data){a=a.data}if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(b){if(typeof b=="string"){var a=null;if(b.indexOf("<")==-1){a=dhtmlx.toNode(b)}if(!a){a=document.createElement("DIV");a.innerHTML=b}return a.getElementsByTagName(this.tag)}return b},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(c){var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(c){c=this.stringToArray(c);var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(b){b=b.split(this.cell);for(var a=0;a<b.length;a++){b[a]=b[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return b},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(b,a){if(a&&(a=this.checkResponse(b,a))){return a}if(typeof b=="string"){return this.fromString(b)}return b},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(g,m){if(window.XPathResult){var c=g;if(g.nodeName.indexOf("document")==-1){g=g.ownerDocument}var k=[];var b=g.evaluate(m,c,null,XPathResult.ANY_TYPE,null);var l=b.iterateNext();while(l){k.push(l);l=b.iterateNext()}return k}else{var j=true;try{if(typeof(g.selectNodes)=="undefined"){j=false}}catch(h){}if(j){return g.selectNodes(m)}else{var a=m.split("/").pop();return g.getElementsByTagName(a)}}},tagToObject:function(e,m){m=m||{};var h=false;var c=e.childNodes;var l={};for(var k=0;k<c.length;k++){if(c[k].nodeType==1){var j=c[k].tagName;if(typeof m[j]!="undefined"){if(!(m[j] instanceof Array)){m[j]=[m[j]]}m[j].push(this.tagToObject(c[k],{}))}else{m[c[k].tagName]=this.tagToObject(c[k],{})}h=true}}var g=e.attributes;if(g&&g.length){for(var k=0;k<g.length;k++){m[g[k].name]=g[k].value}h=true}if(!h){return this.nodeValue(e)}m.value=this.nodeValue(e);return m},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(b){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(b,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(b);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(e,c){if(c&&(c.firstChild&&c.firstChild.tagName!="parsererror")){return c}var b=this.fromString(e.replace(/^[\s]+/,""));if(b){return b}dhtmlx.error("xml can't be parsed",e)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,b){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(e,c){if(this._load_count){return this._load_count=[e,c]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+e+"&count="+c,function(){var g=this._load_count;this._load_count=false;if(typeof g=="object"){this.data.feed.apply(this,g)}})}}},_onLoad:function(c,b,a){this.data._parse(this.data.driver.toObject(c,b));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(j,h){if(this._settings.dataFeed){var g={};if(!j&&!g){return}if(typeof j=="function"){if(!h){return}j(h,g)}else{g={text:h}}this.clearAll();var b=this._settings.dataFeed;if(typeof b=="function"){return b.call(this,h,g)}var e=[];for(var c in g){e.push("dhx_filter["+c+"]="+encodeURIComponent(g[c]))}this.load(b+(b.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(g){this.callEvent("onParse",[this.driver,g]);if(this._filter_order){this.filter()}var h=this.driver.getInfo(g);if(h._key){dhtmlx.security_key=h._key}var e=this.driver.getRecords(g);var l=(h._from||0)*1;if(l===0&&this.order[0]){l=this.order.length}var b=0;for(var c=0;c<e.length;c++){var a=this.driver.getDetails(e[c]);var k=this.id(a);if(!this.pull[k]){this.order[b+l]=k;b++}this.pull[k]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var c=0;c<h._size;c++){if(!this.order[c]){var k=dhtmlx.uid();var a={id:k,$template:"loading"};this.pull[k]=a;this.order[c]=k}}this.callEvent("onStoreLoad",[this.driver,g]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(b,a){dhtmlx.assert(this.pull[b],"Can't change id, for non existing item: "+b);this.pull[a]=this.pull[b];this.pull[a].id=a;this.order[this.order.find(b)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(b)]=a}this.callEvent("onIdChange",[b,a]);if(this._render_change_id){this._render_change_id(b,a)}},get:function(a){return this.item(a)},set:function(b,a){return this.update(b,a)},item:function(a){return this.pull[a]},update:function(b,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[b,a])===false){return false}this.pull[b]=a;this.refresh(b)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(e,c){if(e){e=this.indexById(e)}else{e=this.startOffset||0}if(c){c=this.indexById(c)}else{c=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(c<0){c=0}}if(this.min){e=this.min}if(this.max){c=this.max}if(e>c){var b=c;c=e;e=b}return this.getIndexRange(e,c)},getIndexRange:function(e,c){c=Math.min((c||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var b=(e||0);b<=c;b++){a.push(this.item(this.order[b]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,e){if(a<0||e<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var c=this.idByIndex(a);var b=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,e));this.callEvent("onStoreUpdated",[c,b,"move"])},scheme:function(a){this._scheme=a},sync:function(g,e,a){if(typeof e!="function"){a=e;e=null}if(dhtmlx.debug_bind){this.debug_sync_master=g;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var c=g;if(g.name!="DataStore"){g=g.data}var b=dhtmlx.bind(function(k,h,j){if(j!="update"||e){k=null}if(!k){this.order=dhtmlx.toArray([].concat(g.order));this._filter_order=null;this.pull=g.pull;if(e){this.silent(e)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(k)}else{a=false}},this);g.attachEvent("onStoreUpdated",b);this.feed=function(j,h){c.loadNext(h,j)};b()},add:function(g,a){if(this._scheme){g=g||{};for(var b in this._scheme){g[b]=g[b]||this._scheme[b]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(g)}else{if(this._scheme.$update){this._scheme.$update(g)}}}}var h=this.id(g);var e=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=e}if(a>e){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[h,g,a])===false){return false}if(this.exists(h)){return dhtmlx.error("Not unique ID")}this.pull[h]=g;this.order.insertAt(h,a);if(this._filter_order){var c=this._filter_order.length;if(!a&&this.order.length){c=0}this._filter_order.insertAt(h,c)}this.callEvent("onafterAdd",[h,a]);this.callEvent("onStoreUpdated",[h,g,"add"]);return h},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}return}if(this.callEvent("onBeforeDelete",[c])===false){return false}if(!this.exists(c)){return dhtmlx.error("Not existing ID",c)}var b=this.item(c);this.order.remove(c);if(this._filter_order){this._filter_order.remove(c)}delete this.pull[c];this.callEvent("onafterdelete",[c]);this.callEvent("onStoreUpdated",[c,b,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(b){var a=this.order.find(b);return a},next:function(b,a){return this.order[this.indexById(b)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(b,a){return this.order[this.indexById(b)-(a||1)]},sort:function(h,b,a){var c=h;if(typeof h=="function"){c={as:h,dir:b}}else{if(typeof h=="string"){c={by:h,dir:b,as:a}}}var g=[c.by,c.dir,c.as];if(!this.callEvent("onbeforesort",g)){return}if(this.order.length){var j=dhtmlx.sort.create(c);var e=this.getRange(this.first(),this.last());e.sort(j);this.order=e.map(function(k){return this.id(k)},this)}this.refresh();this.callEvent("onaftersort",g)},filter:function(g,e){if(!this.callEvent("onBeforeFilter",[g,e])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(g){var b=g;e=e||"";if(typeof g=="string"){g=dhtmlx.Template.fromHTML(g);e=e.toString().toLowerCase();b=function(k,j){return g(k).toLowerCase().indexOf(j)!=-1}}var c=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var h=this.order[a];if(b(this.item(h),e)){c.push(h)}}this._filter_order=this.order;this.order=c}this.refresh();this.callEvent("onAfterFilter",[])},each:function(c,b){for(var a=0;a<this.order.length;a++){c.call((b||this),this.item(this.order[a]))}},provideApi:function(e,b){this.debug_bind_master=e;if(b){this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,onbeforeupdate:e})}var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<c.length;a++){e[c[a]]=dhtmlx.methodPush(this,c[a])}if(dhtmlx.assert_enabled()){this.assert_event(e)}},serialize:function(){var c=this.order;var a=[];for(var b=0;b<c.length;b++){a.push(this.pull[c[b]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(e,c){e=e*1;c=c*1;return e>c?1:(e<c?-1:0)},string_strict:function(e,c){e=e.toString();c=c.toString();return e>c?1:(e<c?-1:0)},string:function(e,c){e=e.toString().toLowerCase();c=c.toString().toLowerCase();return e>c?1:(e<c?-1:0)}},by:function(b,a){if(!b){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}b=dhtmlx.Template.fromHTML(b);return function(e,c){return a(b(e),b(c))}},dir:function(b,a){if(b=="asc"){return a}return function(e,c){return a(e,c)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(b){b=b||event;var a=b.which||b.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,b.ctrlKey,b.shiftKey,b])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);if(b&&!this.callEvent("onBeforeContextMenu",[b,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(j,h,b){j=j||event;var a=j.target||j.srcElement;var c="";var k=null;var g=false;while(a&&a.parentNode){if(!g&&a.getAttribute){k=a.getAttribute(this._id);if(k){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[k,a,j])}if(!this.callEvent("on"+b,[k,j,a])){return}g=true}}c=a.className;if(c){c=c.split(" ");c=c[0]||c[1];if(h[c]){return h[c].call(this,j,k||dhtmlx.html.locate(j,this._id),a)}}a=a.parentNode}return g}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(b,a){if(typeof b=="object"){return this._parseSeetingColl(b)}return this._define(b,a)},_define:function(b,a){dhtmlx.assert_settings.call(this,b,a);var c=this[b+"_setter"];return this._settings[b]=c?c.call(this,a):a},_parseSeetingColl:function(c){if(c){for(var b in c){this._define(b,c[b])}}},_parseSettings:function(c,a){var b=dhtmlx.extend({},a);if(typeof c=="object"&&!c.tagName){dhtmlx.extend(b,c)}this._parseSeetingColl(b)},_mergeSettings:function(a,c){for(var b in c){switch(typeof a[b]){case"object":a[b]=this._mergeSettings((a[b]||{}),c[b]);break;case"undefined":a[b]=c[b];break;default:break}}return a},_parseContainer:function(b,a,c){if(typeof b=="object"&&!b.tagName){b=b.container}this._obj=this.$view=dhtmlx.toNode(b);if(!this._obj&&c){this._obj=c(b)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(b){var a=dhtmlx.Template.setter(b);var c=this;return function(){return a.apply(c,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(c,b){if(!c.types&&c.prototype.types){c=c.prototype}if(dhtmlx.assert_enabled()){this.assert_event(b)}var a=b.name||"default";this._template(b);this._template(b,"edit");this._template(b,"loading");c.types[a]=dhtmlx.extend(dhtmlx.extend({},(c.types[a]||this._default)),b);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(c,a){a="template"+(a?("_"+a):"");var b=c[a];if(b&&(typeof b=="string")){if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case"html":b=dhtmlx.html.getValue(b[1]).replace(/\"/g,'\\"');break;case"http":b=new dhtmlx.ajax().sync().get(b[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}c[a]=dhtmlx.Template.fromHTML(b)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,b){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=b.y+this._settings.dy+"px";this._obj.style.left=b.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(b){var a=new dhtmlx.ui.Tooltip(b);this.attachEvent("onMouseMove",function(g,c){a.show(this.get(g),dhtmlx.html.pos(c))});this.attachEvent("onMouseOut",function(g,c){a.hide()});this.attachEvent("onMouseMoving",function(g,c){a.hide()});return a}};dhtmlx.compat=function(a,b){if(dhtmlx.compat[a]){dhtmlx.compat[a](b)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(b,a){var g=document.createElement("DIV");g.id="CustomObject_"+dhtmlx.uid();g.style.width="100%";g.style.height="100%";g.cmp="grid";document.body.appendChild(g);this.attachObject(g.id);a.container=g.id;var e=this.vs[this.av];e.grid=new window[b](a);e.gridId=g.id;e.gridObj=g;e.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var c="_viewRestore";return this.vs[this[c]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var e in this.conf.idx){this.conf.idx[e]=null;delete this.conf.idx[e]}for(var j=0;j<this.cell.childNodes.length;j++){var g=this.cell.childNodes[j].className;for(var e in this.conf.idx_data){var h=new RegExp(this.conf.idx_data[e]);if(g.match(h)!=null){this.conf.idx[e]=j}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var e in this.dataNodes){if(this.dataNodes[e]!=null&&typeof(this.dataNodes[e].setSizes)=="function"){this.dataNodes[e].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(q,n,r,k,l,m,g,j){if(this.conf.size==null){this.conf.size={}}if(j==null){j={}}var s={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=q;this.conf.size.y=n;this.conf.size.w=Math.max(r,0);this.conf.size.h=Math.max(k,0);for(var o in s){var e=(j[o]||o);this.cell.style[e]=this.conf.size[s[o]]+"px"}this.callEvent("_onSetSize",[]);if(m!==true){this._adjustCont(l,g)}else{this._adjustAttached(l)}this._adjustProgress()};this._adjustCont=function(m,j){var l=this.cell.childNodes[this.conf.idx.cont];if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.conf.collapsed==true){l.style.left=l.style.top="0px";l.style.width=l.style.height="200px";l=null;return}var h=0;for(var e in this.conf.ofs_nodes.t){var g=this.conf.ofs_nodes.t[e];h+=(g=="func"?this[e]():(g==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}var n=0;for(var e in this.conf.ofs_nodes.b){var g=this.conf.ofs_nodes.b[e];n+=(g=="func"?this[e]():(g==true?this.cell.childNodes[this.conf.idx[e]].offsetHeight:0))}l.style.left="0px";l.style.top=h+"px";if(this.conf.cells_cont==null){this.conf.cells_cont={};l.style.width=this.cell.offsetWidth+"px";l.style.height=Math.max(this.cell.offsetHeight-h-n,0)+"px";this.conf.cells_cont.w=parseInt(l.style.width)-l.offsetWidth;this.conf.cells_cont.h=parseInt(l.style.height)-l.offsetHeight}l.style.left="0px";l.style.top=h+"px";l.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";l.style.height=Math.max(this.conf.size.h-h-n+this.conf.cells_cont.h,0)+"px";l=null;this._adjustAttached(m);if(j=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var g=["menu","toolbar","ribbon"];for(var j=0;j<g.length;j++){if(this.conf.idx[g[j]]!=null){var k=this.cell.childNodes[this.conf.idx[g[j]]];var h="dhx_cell_"+g[j]+"_no_borders";var e="dhx_cell_"+g[j]+"_def";k.className=k.className.replace(new RegExp(this.conf.borders?h:e),this.conf.borders?e:h);k=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(h){this.views[h]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var j=this.cell.childNodes[this.conf.idx.cont];while(j.childNodes.length>0){this.views[h].cellCont.push(j.firstChild);j.removeChild(j.firstChild)}j=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var g in this.dataNodes){for(var e in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[e][g])!="undefined"){this.views[h].ofs_nodes[e][g]=this.conf.ofs_nodes[e][g];this.conf.ofs_nodes[e][g]=null;delete this.conf.ofs_nodes[e][g]}}this.views[h].dataNodesCont[g]=this.cell.childNodes[this.conf.idx[g]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[g]]);this.views[h].dataNodes[g]=this.dataNodes[g];this.dataNodes[g]=null;delete this.dataNodes[g];this._updateIdx()}this.callEvent("_onViewSave",[h])};this._viewRestore=function(h){if(this.views[h]==null){return}this.dataObj=this.views[h].dataObj;this.dataType=this.views[h].dataType;this.conf.url_data=this.views[h].url_data;for(var j=0;j<this.views[h].cellCont.length;j++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[h].cellCont[j])}for(var g in this.views[h].dataNodes){this.dataNodes[g]=this.views[h].dataNodes[g];if(g=="menu"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(g=="toolbar"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.cont])}if(g=="ribbon"){this.cell.insertBefore(this.views[h].dataNodesCont[g],this.cell.childNodes[this.conf.idx.cont])}if(g=="sb"){this.cell.appendChild(this.views[h].dataNodesCont[g])}this._updateIdx()}for(var g in this.views[h].ofs_nodes){for(var e in this.views[h].ofs_nodes[g]){this.conf.ofs_nodes[g][e]=this.views[h].ofs_nodes[g][e]}}if(this.conf.borders!=this.views[h].borders){this[this.views[h].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[h]);this._viewDelete(h)};this._viewDelete=function(h){if(this.views[h]==null){return}this.views[h].borders=null;for(var g in this.views[h].ofs_nodes){for(var e in this.views[h].ofs_nodes[g]){this.views[h].ofs_nodes[g][e]=null}this.views[h].ofs_nodes[g]=null}this.views[h].dataType=null;this.views[h].dataObj=null;this.views[h].url_data=null;for(var j=0;j<this.views[h].cellCont.length;j++){this.views[h].cellCont[j]=null}this.views[h].cellCont=null;for(var g in this.views[h].dataNodes){this.views[h].dataNodes[g]=null;this.views[h].dataNodesCont[g]=null}this.views[h].dataNodes=this.views[h].dataNodesCont=null;this.views[h]=null;delete this.views[h]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(e){if(e==this.conf.view){var g=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=g;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[e]==null){return}var c=this.views[e];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(e);if(typeof(this.conf.views_loaded[e])!="undefined"){delete this.conf.views_loaded[e]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className=this.conf.idx_data.pr3;a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{a.className=this.conf.idx_data.pr2}if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}for(var b in {pr3:3,pr2:2,pr1:1}){var c=this.cell.childNodes[this.conf.idx[b]];if(c!=null){c.parentNode.removeChild(c)}c=null}this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(e,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell)){c=false}if(typeof(e)=="string"){e=document.getElementById(e)}if(e.parentNode==this.cell.childNodes[this.conf.idx.cont]){e=null;return}if(c){e.style.display="";var a=e.offsetWidth;var b=e.offsetHeight}this._attachObject(e);this.dataType="obj";e.style.display="";e=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(b,o,c){if(c==true){c={}}var g=(typeof(c)!="undefined"&&c!=false&&c!=null);if(this.conf.url_data==null){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(o==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(k){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(o==true){var n=this;if(g){var h="";for(var m in c){h+="&"+encodeURIComponent(m)+"="+encodeURIComponent(c[m])}this.conf.url_data.xml_doc=dhx4.ajax.post(b,h,function(a){if(n.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){n.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(n._doOnFrameContentLoaded)=="function"){n._doOnFrameContentLoaded()}n.dataType="url-ajax"}n=a=null})}else{this.conf.url_data.xml_doc=dhx4.ajax.get(b,function(a){if(n.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){n.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(n._doOnFrameContentLoaded)=="function"){n._doOnFrameContentLoaded()}n.dataType="url-ajax"}n=a=null})}}else{if(this.dataType=="url"){var j=this.getFrame()}else{var j=document.createElement("IFRAME");j.frameBorder=0;j.border=0;j.style.width="100%";j.style.height="100%";j.style.position="relative";this._attachObject(j);this.dataType="url";this._attachURLEvents()}if(g){var l=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(l){this._attachURLEvents()}j.src="about:blank"}else{j.src=b+window.dhx4.ajax._dhxr(b)}j=null}j=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,j,b,e){e=e||window.scheduler;var g=false;if(b){var h=document.getElementById(b);if(h){g=true}}if(!g){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var h=document.createElement("DIV");h.id="dhxSchedObj_"+new Date().getTime();h.style.width="100%";h.style.height="100%";h.style.position="relative";h.style.overflow="hidden";h.className="dhx_cal_container";h.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(h);this.dataType="scheduler";this.dataObj=e;this.dataObj.setSizes=function(){this.update_view()};e.init(h.id,a,j);h=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(k,e,j,a,g){if(typeof(g)!="undefined"){k=g}else{var b=e||{};var l=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var k=document.createElement("DIV");k.className="dhx_cell_statusbar_def";k.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+l+"</div>";if(c!=false){k.firstChild.style.height=k.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(k)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return k};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(g){c.callEvent("_onContentMouseDown",[b,g||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(g){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(g){}}}else{a.onreadystatechange=function(g){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(h){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(h){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(!a){return}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(g,b,e,a,c){if(typeof(g)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[g]==1){return this["_createNode_"+g].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(e)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=e}else{this.cell.childNodes[this.conf.idx.cont].appendChild(g)}g=null};dhtmlXCellObject.prototype._detachObject=function(j,b,a){this.callEvent("_onBeforeContentDetach",[]);if(j=="menu"||j=="toolbar"||j=="ribbon"||j=="sb"){var h=this.cell.childNodes[this.conf.idx[j]];h.parentNode.removeChild(h);h=null;this.conf.ofs_nodes[j=="sb"?"b":"t"][j]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.conf.unloading==true&&String(this.dataType).match(/ajax/)!=null){if(this.conf.url_data!=null&&this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(g){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}}if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var h=this.cell.childNodes[this.conf.idx.cont];while(h.childNodes.length>0){if(a===false){h.removeChild(h.lastChild)}else{h.firstChild.style.display="none";a.appendChild(h.firstChild)}}if(this.conf.append_mode){h.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=h=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var e="layout";if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){e="window"}if(typeof(window.dhtmlXWindowsCell)=="function"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked==true){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)=="function"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(e=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(e=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(g,b){if(arguments.length==0||typeof(g)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(g==document.body){this.conf.fs_mode=true;this.base=g;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(g)=="string"?document.getElementById(g):g)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(h){}}}this._adjustCont=function(){var k=this.conf.ofs.t;for(var j in this.conf.ofs_nodes.t){k+=(this.conf.ofs_nodes.t[j]==true?this.dataNodes[j].offsetHeight:0)}var e=this.conf.ofs.b;for(var j in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[j]==true?this.dataNodes[j].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=k+"px";this.cont.style.height=this.base.clientHeight-k-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};g=null}dhtmlXCellTop.prototype.setOffsets=function(h,g){var e=false;for(var b in h){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(h[b])){this.conf.ofs[c]=parseInt(h[b]);e=true}}if(g!==false&&typeof(this.setSizes)=="function"&&e==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}if(this.conf.ofs_menu==null){this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className="dhxcelltop_progress_svg";a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{var a=document.createElement("DIV");a.className="dhxcelltop_progress_img"}this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var e={dhxcelltop_progress:true,dhxcelltop_progress_img:true,dhxcelltop_progress_svg:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&e[this.base.childNodes[c].className]==true){e[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in e){if(e[b]!=true){this.base.removeChild(e[b])}e[b]=null}this.conf.progress=false;e=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXCalendarObject(h,n){this.i={};var c=null;if(typeof(h)=="string"){var e=document.getElementById(h)}else{var e=h}if(e&&typeof(e)=="object"&&e.tagName&&String(e.tagName).toLowerCase()!="input"){c=e}e=null;if(typeof(h)!="object"||!h.length){h=[h]}for(var b=0;b<h.length;b++){if(typeof(h[b])=="string"){h[b]=(document.getElementById(h[b])||null)}if(h[b]!=null&&h[b].tagName&&String(h[b].tagName).toLowerCase()=="input"){this.i[window.dhx4.newId()]={input:h[b]}}else{if(!(h[b] instanceof Array)&&h[b] instanceof Object&&(h[b].input!=null||h[b].button!=null)){if(h[b].input!=null&&typeof(h[b].input)=="string"){h[b].input=document.getElementById(h[b].input)}if(h[b].button!=null&&typeof(h[b].button)=="string"){h[b].button=document.getElementById(h[b].button)}this.i[window.dhx4.newId()]=h[b]}}h[b]=null}this.conf={skin:(n||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material"),zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:true,today:false,ws_first:true};this.setSkin=function(o,a){if(this.conf.skin==o&&!a){return}this.conf.skin=o;this.base.className="dhtmlxcalendar_"+this.conf.skin;this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));if(c!=null){this._hasParent=true;c.appendChild(this.base);c=null}else{document.body.appendChild(this.base)}this.setParent=function(a){if(this._hasParent){if(typeof(a)=="object"){a.appendChild(this.base)}else{if(typeof(a)=="string"){document.getElementById(a).appendChild(this.base)}}}};this.setSkin(this.conf.skin,true);this.base.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.cancelBubble=true};this.base.onmousedown=function(){return false};if(this.conf.touch){this.base.ontouchstart=this.base.onclick}this.loadUserLanguage=function(s){if(!this.langData[s]){return}this.lang=s;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont){var r=0;for(var o=0;o<this.msCont.childNodes.length;o++){for(var a=0;a<this.msCont.childNodes[o].childNodes.length;a++){this.msCont.childNodes[o].childNodes[a].innerHTML=this.langData[this.lang].monthesSNames[r++]}}}this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contMonth.appendChild(j);var m=document.createElement("LI");m.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";m.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";j.appendChild(m);var g=this;m.onclick=function(r){r=r||event;if(r.type=="touchstart"&&r.preventDefault!=null){r.preventDefault()}var o=(r.target||r.srcElement);if(o.className&&o.className.indexOf("dhtmlxcalendar_month_arrow")===0){g._hideSelector();var q=(o.parentNode.firstChild==o?-1:1);var a=new Date(g._activeMonth);g._drawMonth(new Date(g._activeMonth.getFullYear(),g._activeMonth.getMonth()+q,1,0,0,0,0));g._evOnArrowClick([a,new Date(g._activeMonth)]);return}if(o.className&&o.className=="dhtmlxcalendar_month_label_month"){r.cancelBubble=true;g._showSelector("month",Math.round(o.offsetLeft+o.offsetWidth/2),o.offsetTop+o.offsetHeight+2,"selector_month",true);return}if(o.className&&o.className=="dhtmlxcalendar_month_label_year"){r.cancelBubble=true;g._showSelector("year",Math.round(o.offsetLeft+o.offsetWidth/2),o.offsetTop+o.offsetHeight+2,"selector_year",true);return}g._hideSelector()};if(this.conf.touch==true){m.ontouchstart=m.onclick}this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){if(a==0){a=7}this._wStart=Math.min(Math.max((isNaN(a)?1:a),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var s=document.createElement("UL");s.className="dhtmlxcalendar_line";this.contDays.appendChild(s)}else{var s=this.contDays.firstChild}var o=this._wStart;var r=this.langData[this.lang].daysSNames;r.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var t=0;t<8;t++){if(s.childNodes[t]==null){var a=document.createElement("LI");s.appendChild(a)}else{var a=s.childNodes[t]}if(t==0){a.className="dhtmlxcalendar_cell_wn";a.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"}else{a.className="dhtmlxcalendar_cell"+(o>=6?" dhtmlxcalendar_day_weekday_cell":"")+(t==1?"_first":"");a.innerHTML=r[o];if(++o>7){o=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(u){u=u||event;if(u.type=="touchstart"&&u.preventDefault!=null){u.preventDefault()}var o=(u.target||u.srcElement);if(o.parentNode!=null&&o.parentNode._date!=null){o=o.parentNode}if(o._date!=null&&!o._css_dis){var r=g._activeDate.getHours();var q=g._activeDate.getMinutes();var s=o._date;if(g.checkEvent("onBeforeChange")){if(!g.callEvent("onBeforeChange",[new Date(o._date.getFullYear(),o._date.getMonth(),o._date.getDate(),r,q)])){return}}if(g._activeDateCell!=null){g._activeDateCell._css_date=false;g._updateCellStyle(g._activeDateCell._q,g._activeDateCell._w)}var a=(g._activeDate.getFullYear()+"_"+g._activeDate.getMonth()!=s.getFullYear()+"_"+s.getMonth());g._nullDate=false;g._activeDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),r,q);g._activeDateCell=o;g._activeDateCell._css_date=true;g._activeDateCell._css_hover=false;g._updateCellStyle(g._activeDateCell._q,g._activeDateCell._w);if(a){g._drawMonth(g._activeDate)}g._updateInp();if(!g._hasParent){if(u.type=="touchstart"){window.setTimeout(function(){g._hide()},400)}else{g._hide()}}g._evOnClick([new Date(g._activeDate.getTime())]);g._doOnSelectorChange(true)}};if(this.conf.touch==true){this.contDates.ontouchstart=this.contDates.onclick}this.contDates.onmouseover=function(o){o=o||event;var a=(o.target||o.srcElement);if(a.parentNode!=null&&a.parentNode._date!=null){a=a.parentNode}if(a._date!=null){if(g._lastHover==a||a._css_hover){return}a._css_hover=true;g._updateCellStyle(a._q,a._w);g._lastHover=a;g._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),o]);a=null}};this.contDates.onmouseout=function(a){g._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);if(a!=null){g._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a])}this._lastHover=null};for(var b=0;b<6;b++){var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contDates.appendChild(j);for(var l=0;l<=7;l++){var m=document.createElement("LI");if(l==0){m.className="dhtmlxcalendar_cell_wn"}else{m.className="dhtmlxcalendar_cell"}j.appendChild(m)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){if(this.conf.time!=true){this.conf.time=true;this._adjustTimeCont()}};this.hideTime=function(){if(this.conf.time==true){this.conf.time=false;this._adjustTimeCont()}};this.showToday=function(){if(this.conf.today!=true){this.conf.today=true;this._adjustTimeCont()}};this.hideToday=function(){if(this.conf.today==true){this.conf.today=false;this._adjustTimeCont()}};this._adjustTimeCont=function(){var a="";if(this.conf.time==true){a+="_time"}if(this.conf.today==true){a+="_today"}if(a==""){this.contTime.style.display="none"}else{this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+a;this.contTime.style.display=""}this._ifrSize()};this._adjustTimeCont();var j=document.createElement("UL");j.className="dhtmlxcalendar_line";this.contTime.appendChild(j);var m=document.createElement("LI");m.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";m.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"</span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"</span>";j.appendChild(m);m.onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}var a=(q.target||q.srcElement);if(a.tagName!=null&&a.tagName.toLowerCase()=="span"&&a._par==true&&a.parentNode!=null){a=a.parentNode}if(a.className&&a.className=="dhtmlxcalendar_label_hours"){q.cancelBubble=true;var o=g.contMonth.offsetHeight+g.contDays.offsetHeight+g.contDates.offsetHeight+a.offsetTop;g._showSelector("hours",Math.round(a.offsetLeft+a.offsetWidth/2),o-2,"selector_hours",true);return}if(a.className&&a.className=="dhtmlxcalendar_label_minutes"){q.cancelBubble=true;if(g._minutesInterval==1){var r=g.getFormatedDate("%i");a.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+r.charAt(0)+"</span>"+r.charAt(1);a.firstChild._par=true;g._selectorMode=1}var o=g.contMonth.offsetHeight+g.contDays.offsetHeight+g.contDates.offsetHeight+a.offsetTop;g._showSelector("minutes",Math.round(a.offsetLeft+a.offsetWidth/2),o-2,"selector_minutes",true);return}g._hideSelector();if(a.className&&a.className=="dhtmlxcalendar_label_today"){var r=new Date();r=new Date(r.getFullYear(),r.getMonth(),r.getDate(),g._activeDate.getHours(),g._activeDate.getMinutes(),g._activeDate.getSeconds(),g._activeDate.getMilliseconds());g.setDate(r);g._updateInp();g.callEvent("onButtonClick",[r])}if(a.className&&a.className=="dhtmlxcalendar_label_clear"){g._nullDate=true;g._drawMonth(new Date());g._updateInp();g.callEvent("onButtonClick",[null])}};if(this.conf.touch==true){m.ontouchstart=m.onclick}this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(o){window.dhx4.temp_calendar={tz:null};this._nullDate=(typeof(o)=="undefined"||o===""||!o);if(!(o instanceof Date)){o=this._strToDate(String(o||""));if(o=="Invalid Date"){o=new Date()}else{this.conf.tz=window.dhx4.temp_calendar.tz}window.dhx4.temp_calendar=null}if(this.conf.tz==null){this.conf.tz=window.dhx4.date2str(o,"%P")}var a=o.getTime();if(this._isOutOfRange(a)){return}this._activeDate=new Date(a);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(q){if(this._nullDate){return null}var a=new Date(this._activeDate.getTime());if(q){window.dhx4.temp_calendar={tz:this.conf.tz};var o=this._dateToStr(a);window.dhx4.temp_calendar=null;return o}return a};this._drawMonth=function(z){if(!(z instanceof Date)){return}if(isNaN(z.getFullYear())){z=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(z.getFullYear(),z.getMonth(),1,0,0,0,0);this._activeDateCell=null;var x=new Date(this._activeMonth.getTime());var r=x.getDay();var D=r-this._wStart;if(D<0){D=D+7}x.setDate(x.getDate()-D);var H=z.getMonth();var I=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var u=0;for(var o=0;o<6;o++){var y=this._wStart;for(var F=0;F<=7;F++){if(F==0){var E=this.getWeekNumber(new Date(x.getFullYear(),x.getMonth(),x.getDate()+u,0,0,0,0));if(E>=52&&this.conf.ws_first==true&&this._activeMonth.getMonth()==0){var t=this.getWeekNumber(new Date(x.getFullYear(),x.getMonth(),x.getDate()+u+7,0,0,0,0));if(t<E&&t>1){E=1}}else{if(E>52&&this._activeMonth.getMonth()==11){var t=this.getWeekNumber(new Date(x.getFullYear()+1,0,1));if(t==1){E=1}}}this.contDates.childNodes[o].childNodes[F].innerHTML="<div class='dhtmlxcalendar_label'>"+E+"</div>"}else{var a=new Date(x.getFullYear(),x.getMonth(),x.getDate()+u,0,0,0,0);if(a.getHours()!=0){var v=(a.getHours()>12?24-a.getHours():a.getHours());a.setTime(a.getTime()+60*60*1000*v)}var C=a.getDay();var s=a.getTime();var A="dhtmlxcalendar_label";if(this._tipData[s]!=null){if(this._tipData[s].usePopup&&typeof(window.dhtmlXPopup)=="function"){this.contDates.childNodes[o].childNodes[F].removeAttribute("title");this._initTooltipPopup()}else{this.contDates.childNodes[o].childNodes[F].setAttribute("title",this._tipData[s].text)}if(this._tipData[s].showIcon){A+=" dhtmlxcalendar_label_title"}}else{this.contDates.childNodes[o].childNodes[F].removeAttribute("title")}this.contDates.childNodes[o].childNodes[F].innerHTML="<div class='"+A+"'>"+a.getDate()+"</div>";this.contDates.childNodes[o].childNodes[F]._date=new Date(s);this.contDates.childNodes[o].childNodes[F]._q=o;this.contDates.childNodes[o].childNodes[F]._w=F;this.contDates.childNodes[o].childNodes[F]._css_month=(a.getMonth()==H);this.contDates.childNodes[o].childNodes[F]._css_date=(!this._nullDate&&s==I);this.contDates.childNodes[o].childNodes[F]._css_weekend=(y>=6);this.contDates.childNodes[o].childNodes[F]._css_dis=this._isOutOfRange(s);this.contDates.childNodes[o].childNodes[F]._css_holiday=(this._holidays[s]==true);this._updateCellStyle(o,F);if(s==I){this._activeDateCell=this.contDates.childNodes[o].childNodes[F]}if(++y>7){y=1}u++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(z)};this._updateCellStyle=function(u,a){var t=this.contDates.childNodes[u].childNodes[a];var o="dhtmlxcalendar_cell dhtmlxcalendar_cell";o+=(t._css_month?"_month":"");o+=(t._css_date?"_date":"");o+=(t._css_weekend?"_weekend":"");o+=(t._css_holiday?"_holiday":"");o+=(t._css_dis?"_dis":"");o+=(t._css_hover&&!t._css_dis?"_hover":"");t.className=o;t=null};this._minutesInterval=5;this._initSelector=function(x,s){if(!this._selCover){this._selCover=document.createElement("DIV");this._selCover.className="dhtmlxcalendar_selector_cover";this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV");this._sel.className="dhtmlxcalendar_selector_obj";this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement("TABLE"));this._sel.firstChild.className="dhtmlxcalendar_selector_table";this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement("TBODY"));this._sel.firstChild.firstChild.appendChild(document.createElement("TR"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left";this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle";this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right";this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"};this._sel.onmouseover=function(w){w=w||event;var q=(w.target||w.srcElement);if(q._cell===true){if(g._selHover!=q){g._clearSelHover()}if(String(q.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){q.className+=" dhtmlxcalendar_selector_cell_hover";g._selHover=q}}};this._sel.onmouseout=function(){g._clearSelHover()};this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;g._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;g._scrollYears(1)};if(this.conf.touch==true){this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick;this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick}this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement("DIV"));this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[x]==true){return}if(x=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+s;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var o=0;for(var a=0;a<4;a++){var v=document.createElement("UL");v.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(v);for(var y=0;y<3;y++){var z=document.createElement("LI");z.innerHTML=this.langData[this.lang].monthesSNames[o];z.className="dhtmlxcalendar_selector_cell";v.appendChild(z);z._month=o;z._cell=true;this._msCells[o++]=z}}this.msCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._month!=null){g._hideSelector();g._updateActiveMonth();g._drawMonth(new Date(g._activeMonth.getFullYear(),q._month,1,0,0,0,0));g._doOnSelectorChange()}};if(this.conf.touch==true){this.msCont.ontouchstart=this.msCont.onclick}}if(x=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+s;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var a=0;a<4;a++){var v=document.createElement("UL");v.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(v);for(var y=0;y<3;y++){var z=document.createElement("LI");z.className="dhtmlxcalendar_selector_cell";z._cell=true;v.appendChild(z)}}this.ysCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._year!=null){g._hideSelector();g._drawMonth(new Date(q._year,g._activeMonth.getMonth(),1,0,0,0,0));g._doOnSelectorChange()}};if(this.conf.touch==true){this.ysCont.ontouchstart=this.ysCont.onclick}}if(x=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+s;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var o=0;for(var a=0;a<4;a++){var v=document.createElement("UL");v.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(v);for(var y=0;y<6;y++){var z=document.createElement("LI");z.innerHTML=this._fixLength(o,2);z.className="dhtmlxcalendar_selector_cell";v.appendChild(z);z._hours=o;z._cell=true;this._hsCells[o++]=z}}this.hsCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._hours!=null){g._hideSelector();g._activeDate.setHours(q._hours);g._updateActiveHours();g._updateVisibleHours();g._doOnSelectorChange();g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())])}};if(this.conf.touch==true){this.hsCont.ontouchstart=this.hsCont.onclick}}if(x=="minutes"){var u=4;var r=3;var t=2;if(this._minutesInterval==1){if(this._selectorMode==1){u=2;r=3;t=1}else{u=2;r=5;t=1;s+="5"}}if(this._minutesInterval==10){u=2}if(this._minutesInterval==15){u=1;r=4;s+="4"}this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+s;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var o=0;for(var a=0;a<u;a++){var v=document.createElement("UL");v.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(v);for(var y=0;y<r;y++){var z=document.createElement("LI");z.innerHTML=(t>1?this._fixLength(o,t):o);z.className="dhtmlxcalendar_selector_cell";v.appendChild(z);z._minutes=o;z._cell=true;this._rsCells[o]=z;o+=this._minutesInterval}}this.rsCont.onclick=function(A){A=A||event;if(A.type=="touchstart"&&A.preventDefault!=null){A.preventDefault()}A.cancelBubble=true;var w=(A.target||A.srcElement);if(w._minutes!=null){if(g._minutesInterval==1){var q=g.getFormatedDate("%i");if(g._selectorMode==1){q=w._minutes.toString()+q.charAt(1)}else{q=q.charAt(0)+w._minutes.toString()}g._activeDate.setMinutes(Number(q));g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())]);g._hideSelector();if(g._selectorMode==1){g._updateVisibleMinutes(true);g._selectorMode=2;g._showSelector("minutes",g._sel._x,g._sel._y,"selector_minutes",true);g._updateActiveMinutes();return}else{g._selectorMode=1}}else{g._hideSelector();g._activeDate.setMinutes(w._minutes);g._updateActiveMinutes();g.callEvent("onTimeChange",[new Date(g._activeDate.getTime())])}g._updateVisibleMinutes();g._doOnSelectorChange()}};if(this.conf.touch==true){this.rsCont.ontouchstart=this.rsCont.onclick}}this._sel._ta[x]=true};this._showSelector=function(s,o,t,r,a){if(a===true&&this._sel!=null&&this._isSelectorVisible()&&s==this._sel._t){this._hideSelector();return}if(this.conf.skin=="dhx_terrace"){o+=12}if(!this._sel||!this._sel._ta[s]){this._initSelector(s,r)}if(s!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")}this._sel._x=o;this._sel._y=t;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=s;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+r+(s=="hours"&&this.conf.today==true?"2":"");this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(s=="year"?"":"none");var q=Math.max(0,o-Math.round(this._sel.offsetWidth/2));if(q+this._sel.offsetWidth>this._sel.parentNode.offsetWidth){q=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=q+"px";if(s=="hours"||s=="minutes"){this._sel.style.top=t-this._sel.offsetHeight+"px"}else{this._sel.style.top=t+"px"}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(s)};this._doOnSelectorShow=function(a){if(a=="month"){this._updateActiveMonth()}if(a=="year"){this._updateYearsList(this._activeMonth)}if(a=="hours"){this._updateActiveHours()}if(a=="minutes"){this._updateActiveMinutes()}};this._hideSelector=function(a){if(!this._sel){return}this._sel.style.display="none";this._sel.style.visible="hidden";this._selCover.style.display="none";if(this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i");this._unloadSelector("minutes")}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!="none")};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,""));this._selHover=null};this._unloadSelector=function(q){if(!this._sel){return}if(!this._sel._ta[q]){return}if(q=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var o in this._msCells){this._msCells[o]._cell=null;this._msCells[o]._month=null;this._msCells[o].parentNode.removeChild(this._msCells[o]);this._msCells[o]=null}this._msCells=null;while(this.msCont.childNodes.length>0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(q=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var o in this._ysCells){this._ysCells[o]._cell=null;this._ysCells[o]._year=null;this._ysCells[o].parentNode.removeChild(this._ysCells[o]);this._ysCells[o]=null}this._ysCells=null;while(this.ysCont.childNodes.length>0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(q=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var o in this._hsCells){this._hsCells[o]._cell=null;this._hsCells[o]._hours=null;this._hsCells[o].parentNode.removeChild(this._hsCells[o]);this._hsCells[o]=null}this._hsCells=null;while(this.hsCont.childNodes.length>0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(q=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var o in this._rsCells){this._rsCells[o]._cell=null;this._rsCells[o]._minutes=null;this._rsCells[o].parentNode.removeChild(this._rsCells[o]);this._rsCells[o]=null}this._rsCells=null;while(this.rsCont.childNodes.length>0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[q]=null};this.setMinutesInterval=function(a){if(!(a==1||a==5||a==10||a==15)){return}this._minutesInterval=a;this._unloadSelector("minutes")};this._updateActiveMonth=function(){if(typeof(this._msActive)!="undefined"&&typeof(this._msCells[this._msActive])!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();if(this._ysCells[a]){this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(u){for(var r in this._ysCells){this._ysCells[r]=null;delete this._ysCells[r]}var s=12*Math.floor(u.getFullYear()/12);for(var t=0;t<4;t++){for(var o=0;o<3;o++){this.ysCont.childNodes[t].childNodes[o].innerHTML=s;this.ysCont.childNodes[t].childNodes[o]._year=s;this.ysCont.childNodes[t].childNodes[o].className="dhtmlxcalendar_selector_cell";this._ysCells[s++]=this.ysCont.childNodes[t].childNodes[o]}}this._updateActiveYear()};this._scrollYears=function(a){var q=(a<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a;var o=new Date(q,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(o)};this._updateActiveHours=function(){if(typeof(this._hsActive)!="undefined"&&typeof(this._hsCells[this._hsActive])!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof(this._rsActive)!="undefined"&&typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}if(this._minutesInterval==1){this._rsActive=(this.getFormatedDate("%i").toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(o){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();if(o==true){a=a.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+a.charAt(1)+"</span>"}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a;if(o==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(a,o){while(String(a).length<o){a="0"+String(a)}return a};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(s){var r={};if(this._strToDate!=null){for(var o in this.i){if(this.i[o].input!=null&&this.i[o].input.value.length>0){var t=this._strToDate(this.i[o].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");if(t instanceof Date){r[o]=t}}}}this._dateFormat=s;var q=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var u=a.replace(/%/,"");switch(u){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+g.langData[g.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+g.langData[g.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(q,"i");for(var o in r){this.i[o].input.value=this._dateToStr(r[o])}r=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(o){if(!this._dateFormatRE||!o.match(this._dateFormatRE)){return}if(o==this.getFormatedDate()){return}var a=this._strToDate(o);if(!(a instanceof Date)){return}if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])){this._updateInp();return}}this._nullDate=false;this._activeDate=a;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&&this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(a){if(typeof(a)=="string"){a=this._strToDate(a)}if(!(a instanceof Date)){return}this._drawMonth(a)};this.setFormatedDate=function(s,t,o,r){var q=this._strToDate(t,s);if(r){return q}this.setDate(q)};this.getFormatedDate=function(o,a){if(!(a&&a instanceof Date)){if(this._nullDate){return""}a=new Date(this._activeDate)}return this._dateToStr(a,o)};this.getWeekNumber=function(q){if(typeof(q)=="string"){q=this._strToDate(q)}if(!(q instanceof Date)){return"Invalid Date"}var o=q.getDay();if(o===0){o=7}var r=new Date(q.valueOf());r.setDate(q.getDate()+(4-o));var a=r.getFullYear();var s=Math.round((r.getTime()-new Date(a,0,1).getTime())/86400000);return 1+Math.floor(s/7)};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(r){if(!r&&this._hasParent){this._show();return}if(typeof(r)=="string"){var q=document.getElementById(r);if(q!=null&&typeof(q._dhtmlxcalendar_uid)!="undefined"&&this.i[q._dhtmlxcalendar_uid]!=null){this._show(q._dhtmlxcalendar_uid);return}}if(typeof(r)=="object"&&typeof(r._dhtmlxcalendar_uid)!="undefined"&&this.i[r._dhtmlxcalendar_uid]==r){this._show(r._dhtmlxcalendar_uid);return}if(typeof(r)=="undefined"){for(var o in this.i){if(!r){r=o}}}if(!r){return}this._show(r)};this.hide=function(){if(this._isVisible()){this._hide()}};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(a,o){this._px=null;this._py=null;if(a=="right"||a=="bottom"){this.pos=a}else{this.pos="int";if(typeof(a)!="undefined"&&!isNaN(a)){this.base.style.left=a+"px";this._px=a}if(typeof(o)!="undefined"&&!isNaN(o)){this.base.style.top=o+"px";this._py=o}this._ifrSize()}};this._show=function(u,o){if(o===true&&this._activeInp==u&&this._isVisible()){this._hide();return}this.base.style.visibility="hidden";this.base.style.display="";if(!u){if(this._px!=null&&this._py!=null){this.base.style.left=this._px+"px";this.base.style.top=this._py+"px"}else{this.base.style.left="0px";this.base.style.top="0px"}}else{if(this.base.className.indexOf("dhtmlxcalendar_in_input")==-1){this.base.className+=" dhtmlxcalendar_in_input"}var q=(this.i[u].input||this.i[u].button);var v=window.dhx4.screenDim();var t={top:window.dhx4.absTop(q),left:window.dhx4.absLeft(q)};if(this.pos=="right"){this.base.style.left=t.left+q.offsetWidth+"px";this.base.style.top=Math.min(t.top,v.bottom-this.base.offsetHeight)+"px"}else{if(this.pos=="bottom"){var s=t.top+q.offsetHeight+1;if(s+this.base.offsetHeight>v.bottom){var r=t.top-this.base.offsetHeight;if(r>=-20){s=r}}var a=t.left;if(a+this.base.offsetWidth>v.right){a=Math.max(0,t.left+q.offsetWidth-this.base.offsetWidth)}this.base.style.left=a+"px";this.base.style.top=s+"px"}else{this.base.style.left=(this._px||0)+"px";this.base.style.top=(this._py||0)+"px"}}this._activeInp=u;q=null}this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])};this._hide=function(){if(this._lastHover!=null){this._clearDayHover()}this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);if(this.base.className.indexOf("dhtmlxcalendar_in_input")>=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")}this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return(this.base.style.display!="none")};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(r){var a=this._extractDates(r);for(var o=0;o<a.length;o++){this._rangeSet[new Date(a[o].getFullYear(),a[o].getMonth(),a[o].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(o){if(o==null){this._clearHolidays()}else{if(o!=null){var a=this._extractDates(o);for(var s=0;s<a.length;s++){this._holidays[new Date(a[s].getFullYear(),a[s].getMonth(),a[s].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(s){if(typeof(s)=="string"||s instanceof Date){s=[s]}var o=[];for(var u=0;u<s.length;u++){if(typeof(s[u])=="string"){var v=s[u].split(",");for(var a=0;a<v.length;a++){o.push(this._strToDate(v[a]))}}else{if(s[u] instanceof Date){o.push(s[u])}}}return o};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var o in this._rangeSet){this._rangeSet[o]=null;delete this._rangeSet[o]}};this._clearHolidays=function(){for(var o in this._holidays){this._holidays[o]=null;delete this._holidays[o]}};this._isOutOfRange=function(o){if(this._rangeSet[o]==true){return true}if(this._rangeActive){if(this._rangeType=="in"&&(o<this._rangeFrom||o>this._rangeTo)){return true}if(this._rangeType=="out"&&(o>=this._rangeFrom&&o<=this._rangeTo)){return true}if(this._rangeType=="from"&&o<this._rangeFrom){return true}if(this._rangeType=="to"&&o>this._rangeTo){return true}}var a=new Date(o);if(this._rangeWeek){if(this._rangeWeekData[a.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[a.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[a.getMonth()+"_"+a.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(r,q,a){var o=false;if(r!=null&&q!=null){if(!(r instanceof Date)){r=this._strToDate(r)}if(!(q instanceof Date)){q=this._strToDate(q)}if(r.getTime()>q.getTime()){return}this._rangeFrom=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="in";o=true}if(!o&&r!=null&&q==null){if(!(r instanceof Date)){r=this._strToDate(r)}this._rangeFrom=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(a===true){this._rangeFrom++}this._rangeActive=true;this._rangeType="from";o=true}if(!o&&r==null&&q!=null){if(!(q instanceof Date)){q=this._strToDate(q)}this._rangeFrom=null;this._rangeTo=new Date(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0,0).getTime();if(a===true){this._rangeTo--}this._rangeActive=true;this._rangeType="to";o=true}if(o){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(o,a){if(o!=null&&a!=null){if(!(o instanceof Date)){o=this._strToDate(o)}if(!(a instanceof Date)){a=this._strToDate(a)}if(o.getTime()>a.getTime()){return}this._rangeFrom=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(o!=null&&a==null){this.setSensitiveRange(null,o,true);return}if(o==null&&a!=null){this.setSensitiveRange(a,null,true);return}};this.disableDays=function(v,u){if(v=="week"){if(typeof(u)!="object"&&typeof(u.length)=="undefined"){u=[u]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var o in this._rangeWeekData){this._rangeWeekData[o]=false;delete this._rangeWeekData[o]}for(var s=0;s<u.length;s++){this._rangeWeekData[u[s]]=true;if(u[s]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(v=="month"){if(typeof(u)!="object"&&typeof(u.length)=="undefined"){u=[u]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var o in this._rangeMonthData){this._rangeMonthData[o]=false;delete this._rangeMonthData[o]}for(var s=0;s<u.length;s++){this._rangeMonthData[u[s]]=true}this._rangeMonth=true}if(v=="year"){var r=this._extractDates(u);if(!this._rangeYearData){this._rangeYearData={}}for(var o in this._rangeYearData){this._rangeYearData[o]=false;delete this._rangeYearData[o]}for(var s=0;s<r.length;s++){this._rangeYearData[r[s].getMonth()+"_"+r[s].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(a){if(a=="week"){this._rangeWeek=false}if(a=="month"){this._rangeMonth=false}if(a=="year"){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(r,v,w,a){var s=this._extractDates(r);for(var u=0;u<s.length;u++){var o=new Date(s[u].getFullYear(),s[u].getMonth(),s[u].getDate(),0,0,0,0).getTime();this._tipData[o]={text:v,showIcon:w,usePopup:a}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(o){var r=this._extractDates(o);for(var s=0;s<r.length;s++){var a=new Date(r[s].getFullYear(),r[s].getMonth(),r[s].getDate(),0,0,0,0).getTime();this._tipData[a]=null;delete this._tipData[a]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent("onMouseOver",function(o){var a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();if(this._tipData[a]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=o;this._tipCellDim=this.getCellDimension(o);this._tipText=this._tipData[a].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent("onMouseOut",this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(r,a,s,o,q){if(!g._tipPopup){g._tipPopup=new dhtmlXPopup({mode:"top"})}g._tipPopup.attachHTML(g._tipText);g._tipPopup.show(g._tipCellDim.x,g._tipCellDim.y,g._tipCellDim.w,g._tipCellDim.h);g.callEvent("onPopupShow",[g._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&&this._tipPopup.isVisible()){this._tipPopup.hide();this.callEvent("onPopupHide",[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(r){if(typeof(r)=="string"){r=this._strToDate(r)}if(!(r instanceof Date)){return null}var s=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0).getTime();var o=null;for(var u=0;u<this.contDates.childNodes.length;u++){for(var a=0;a<this.contDates.childNodes[u].childNodes.length;a++){var v=this.contDates.childNodes[u].childNodes[a];if(v._date!=null&&v._date.getTime()==s){o={x:window.dhx4.absLeft(v),y:window.dhx4.absTop(v),w:v.offsetWidth,h:v.offsetHeight}}v=null}}return o};this._updateFromInput=function(a){if(this._nullInInput&&((a.value).replace(/\s/g,"")).length==0){if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[null])){this._updateInp();return}}this.setDate(null)}else{this._updateDateStr(a.value)}a=null};this._doOnClick=function(o){o=o||event;var a=(o.target||o.srcElement);if(a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=g._activeInp&&g._isVisible()&&g._activeInp){g._hide();return}if(!a._dhtmlxcalendar_uid||!g.i[a._dhtmlxcalendar_uid]){if(g._isSelectorVisible()){g._hideSelector()}else{if(!g._hasParent&&g._isVisible()){g._hide()}}}};this._doOnKeyDown=function(a){a=a||event;if(a.keyCode==27||a.keyCode==13){if(g._isSelectorVisible()){g._hideSelector()}else{if(g._isVisible()&&!g._hasParent){g._hide()}}}};this._doOnInpClick=function(o){o=o||event;if(o.type=="touchstart"&&o.preventDefault!=null){o.preventDefault()}var a=(o.target||o.srcElement);if(!a._dhtmlxcalendar_uid){return}if(!g._listenerEnabled){g._updateFromInput(a)}g._show(a._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(o){o=o||event;var a=(o.target||o.srcElement);if(o.keyCode==13||!a._dhtmlxcalendar_uid){return}if(!g._listenerEnabled){g._updateFromInput(a)}};this._doOnBtnClick=function(o){o=o||event;if(o.type=="touchstart"&&o.preventDefault!=null){o.preventDefault()}var a=(o.target||o.srcElement);if(!a._dhtmlxcalendar_uid){return}if(g.i[a._dhtmlxcalendar_uid].input!=null){g._updateFromInput(g.i[a._dhtmlxcalendar_uid].input)}g._show(a._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(g&&g.unload){g.unload()}};if(typeof(window.addEventListener)=="function"){document.body.addEventListener("click",g._doOnClick,false);window.addEventListener("keydown",g._doOnKeyDown,false);window.addEventListener("unload",g._doOnUnload,false);if(this.conf.touch==true){document.body.addEventListener("touchstart",g._doOnClick,false)}}else{document.body.attachEvent("onclick",g._doOnClick);document.body.attachEvent("onkeydown",g._doOnKeyDown);window.attachEvent("onunload",g._doOnUnload)}this.attachObj=function(q){var o=window.dhx4.newId();if(typeof(q)=="string"){this.i[o]={input:document.getElementById(q)}}else{if(typeof(q.tagName)!="undefined"){this.i[o]={input:q}}else{if(typeof(q)=="object"&&(q.input!=null||q.button!=null)){this.i[o]={};if(q.input!=null){this.i[o].input=(typeof(q.input)=="string"?document.getElementById(q.input):q.input)}if(q.button!=null){this.i[o].button=(typeof(q.button)=="string"?document.getElementById(q.button):q.button)}}}}this._attachEventsToObject(o);return o};this.detachObj=function(r){var q=null;if(this.i[r]!=null){q=r}else{if(typeof(r)=="string"){r=document.getElementById(r);q=r._dhtmlxcalendar_uid}else{if(typeof(r.tagName)!="undefined"){q=r._dhtmlxcalendar_uid}else{if(typeof(r)=="object"&&(r.input!=null||r.button!=null)){if(q==null&&r.input!=null){q=(typeof(r.input)=="string"?document.getElementById(r.input):r.input)._dhtmlxcalendar_uid}if(q==null&&r.button!=null){q=(typeof(r.button)=="string"?document.getElementById(r.button):r.button)._dhtmlxcalendar_uid}}}}}if(q!=null&&this.i[q]!=null){this._detachEventsFromObject(q);for(var o in this.i[o]){this.i[q][o]._dhtmlxcalendar_uid=null;this.i[q][o]=null;delete this.i[q][o]}this.i[q]=null;delete this.i[q];return true}return false};this._attachEventsToObject=function(o){if(this.i[o].button!=null){this.i[o].button._dhtmlxcalendar_uid=o;if(typeof(window.addEventListener)=="function"){this.i[o].button.addEventListener("click",g._doOnBtnClick,false);if(this.conf.touch==true){this.i[o].button.addEventListener("touchstart",g._doOnBtnClick,false)}}else{this.i[o].button.attachEvent("onclick",g._doOnBtnClick)}}else{if(this.i[o].input!=null){this.i[o].input._dhtmlxcalendar_uid=o;if(typeof(window.addEventListener)=="function"){this.i[o].input.addEventListener("click",g._doOnInpClick,false);this.i[o].input.addEventListener("keyup",g._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[o].input.addEventListener("touchstart",g._doOnInpClick,false)}}else{this.i[o].input.attachEvent("onclick",g._doOnInpClick);this.i[o].input.attachEvent("onkeyup",g._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(o){if(this.i[o].button!=null){if(typeof(window.addEventListener)=="function"){this.i[o].button.removeEventListener("click",g._doOnBtnClick,false);if(this.conf.touch==true){this.i[o].button.removeEventListener("touchstart",g._doOnBtnClick,false)}}else{this.i[o].button.detachEvent("onclick",g._doOnBtnClick)}}else{if(this.i[o].input!=null){if(typeof(window.addEventListener)=="function"){this.i[o].input.removeEventListener("click",g._doOnInpClick,false);this.i[o].input.removeEventListener("keyup",g._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[o].input.removeEventListener("touchstart",g._doOnInpClick,false)}}else{this.i[o].input.detachEvent("onclick",g._doOnInpClick);this.i[o].input.detachEvent("onkeyup",g._doOnInpKeyUp)}}}};this._updateInp=function(){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}};this.enableListener=function(a){if(!a){return}if(typeof(window.addEventListener)=="function"){a.addEventListener("focus",g._listenerEvFocus,false);a.addEventListener("blur",g._listenerEvBlur,false)}else{a.attachEvent("onfocus",g._listenerEvFocus);a.attachEvent("onblur",g._listenerEvBlur)}a=null};this.disableListener=function(a){if(!a){return}a._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)=="function"){a.removeEventListener("focus",g._listenerEvFocus,false);a.removeEventListener("blur",g._listenerEvBlur,false)}else{a.detachEvent("onfocus",g._listenerEvFocus);a.detachEvent("onblur",g._listenerEvBlur)}a=null};this._startListener=function(a){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(a._v1)=="undefined"){a._v1=a.value}if(a._v1!=a.value){this._updateFromInput(a);a._v1=a.value}if(a._f0){this._tmListener=window.setTimeout(function(){g._startListener(a)},100)}};this._listenerEvFocus=function(o){o=o||event;var a=o.target||o.srcElement;a._f0=true;g._startListener(a);a=null};this._listenerEvBlur=function(o){o=o||event;var a=o.target||o.srcElement;a._f0=false;a=null};for(var k in this.i){this._attachEventsToObject(k)}window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("click",g._doOnClick,false);window.removeEventListener("keydown",g._doOnKeyDown,false);window.removeEventListener("unload",g._doOnUnload,false);if(this.conf.touch==true){document.body.removeEventListener("touchstart",g._doOnClick,false)}}else{document.body.detachEvent("onclick",g._doOnClick);document.body.detachEvent("onkeydown",g._doOnKeyDown);window.detachEvent("onunload",g._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var o in this.i){this.i[o]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(o);this.disableListener(this.i[o].input);this.i[o]=null;delete this.i[o]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length>0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length>0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length>0){while(this.contDates.lastChild.childNodes.length>0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length>0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var o in this._sel._ta){this._sel._ta[o]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length>0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length>0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var o in this){delete this[o]}o=g=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(g){var b=this;var e=function(h){return(String(h).length==1?"0"+String(h):h)};var a=function(h,j){return"<span class='dhtmlxcalendar_month_label_"+h+"'>"+j+"</span>"};var c=String(this.langData[this.lang].hdrformat||("%F %Y")).replace(/%[a-z]/gi,function(h){switch(h){case"%m":return a("month",e(g.getMonth()+1));case"%n":return a("month",g.getMonth()+1);case"%M":return a("month",b.langData[b.lang].monthesSNames[g.getMonth()]);case"%F":return a("month",b.langData[b.lang].monthesFNames[g.getMonth()]);case"%y":return a("year",e(g.getYear()%100));case"%Y":return a("year",g.getFullYear());case"%%":return"%";default:return h}});b=e=a=null;return c};dhtmlXCalendarObject.prototype.enableIframe=function(a){if(a==true){if(!this._ifr){this._ifr=document.createElement("IFRAME");this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute("src","javascript:false;");this._ifr.className="dhtmlxcalendar_ifr";this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+"px";this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(b,a){return window.dhx4.str2date(b,a||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(b,a){return window.dhx4.date2str(b,a||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(b){var a=this;this.leftCalendar=new dhtmlXCalendarObject(b);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(b);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(c){a._updateRange("rightCalendar",c,null);a._evOnClick(["left",c])});this.rightCalendar.attachEvent("onClick",function(c){a._updateRange("leftCalendar",null,c);a._evOnClick(["right",c])});this.leftCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["left",c])});this.rightCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["right",c])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(c){this.leftCalendar.setDateFormat(c);this.rightCalendar.setDateFormat(c)};this.setDates=function(e,c){if(e!=null){this.leftCalendar.setDate(e)}if(c!=null){this.rightCalendar.setDate(c)}this._updateRange()};this._updateRange=function(c,g,e){if(arguments.length==3){(c=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(g,e)}else{this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate());this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null)}};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;a=null};this._evOnClick=function(c){return this.callEvent("onClick",c)};this._evOnBeforeChange=function(c){return this.callEvent("onBeforeChange",c)};window.dhx4._eventable(this);return this};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(a){return dhtmlx.extend((a||new Array()),dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(b){for(var a=0;a<this.length;a++){if(b==this[a]){return a}}return -1},_dhx_insertAt:function(c,b){this[this.length]=null;for(var a=this.length-1;a>=c;a--){this[a]=this[a-1]}this[c]=b},_dhx_removeAt:function(a){this.splice(a,1)},_dhx_swapItems:function(a,c){var b=this[a];this[a]=this[c];this[c]=b}};function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch){dhtmlxEvent.initTouch()}if(_isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}if(id){if(typeof(id)=="object"){this.entBox=id;if(!this.entBox.id){this.entBox.id="cgrid2_"+this.uid()}}else{this.entBox=document.getElementById(id)}}else{this.entBox=document.createElement("DIV");this.entBox.id="cgrid2_"+this.uid()}this.entBox.innerHTML="";dhx4._eventable(this);var self=this;this._RaSeCol=[];this._wcorr=0;this.fontWidth=7;this.cell=null;this.row=null;this.iconURL="";this.editor=null;this._f2kE=true;this._dclE=true;this.combos=new Array(0);this.defVal=new Array(0);this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=true;this.xmlLoader=this.doLoadDetails;this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?(this.entBox.style.width||window.getComputedStyle(this.entBox,null)["width"]):(this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0))||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?(this.entBox.style.height||window.getComputedStyle(this.entBox,null)["height"]):(this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0))||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return false};var t_creator=function(name){var t=document.createElement("TABLE");t.cellSpacing=t.cellPadding=0;t.style.cssText="width:100%;table-layout:fixed;";t.className=name.substr(2);return t};this.obj=t_creator("c_obj");this.hdr=t_creator("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=new Array(0);this.sortImg=document.createElement("DIV");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=(_isIE&&(document.compatMode!="BackCompat")?22:20);this.imgURL=window.dhx_globalImgPath||"";this.isActive=false;this.isEditable=true;this.useImagesInHeader=false;this.pagingOn=false;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{if(self.destructor){self.destructor()}}catch(e){}});this.setSkin=function(name){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+name)+4;this.skin_name=name;if(this._imgURL){this.setImagePath(this._imgURL)}var classname=this.entBox.className.split(" gridbox")[0];this.entBox.className=classname+" gridbox gridbox_"+name+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+name,"odd_"+name,this.isTreeGrid());this._fixAlterCss();switch(name){case"dhx_terrace":case"material":this._srdh=33;this.forceDivInHeader=true;break;case"dhx_web":case"material":this.forceDivInHeader=true;this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=true;break}if(_isIE&&this.hdr){var d=this.hdr.parentNode;d.removeChild(this.hdr);d.appendChild(this.hdr)}this.setSizes()};if(_isIE){this.preventIECaching(true)}if(window.dhtmlDragAndDropObject){this.dragger=new dhtmlDragAndDropObject()}this._doOnScroll=function(e,mode){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(e,mode)};this.doOnScroll=function(e,mode){var box=this.hdrBox;box._try_header_sync=true;setTimeout(function(){box._try_header_sync=false},2000);this.hdrBox.scrollLeft=this.objBox.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft}if(mode){return}if(this._srnd){if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}this._dLoadTimer=window.setTimeout(function(){if(self._update_srnd_view){self._update_srnd_view()}},100)}};this.attachToObject=function(obj){obj.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(fl){if((this.isTreeGrid())&&(!this._h2)){this._h2=this._createHierarchy();if((this._fake)&&(!this._realfake)){this._fake._h2=this._h2}this._tgc={imgURL:null}}if(!this._hstyles){return}if(!this.skin_name){this.setSkin(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material")}this.editStop();this.lastClicked=null;this.resized=null;this.fldSorted=this.r_fldSorted=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length>0){var temp=this.xmlFileUrl;this.clearAll(true);this.xmlFileUrl=temp}var hdrRow=this.hdr.insertRow(0);for(var i=0;i<this.hdrLabels.length;i++){hdrRow.appendChild(document.createElement("TH"));hdrRow.childNodes[i]._cellIndex=i;hdrRow.childNodes[i].style.height="0px"}if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){hdrRow.style.position="absolute"}else{hdrRow.style.height="auto"}var hdrRow=this.hdr.insertRow(_isKHTML?2:1);hdrRow._childIndexes=new Array();var col_ex=0;for(var i=0;i<this.hdrLabels.length;i++){hdrRow._childIndexes[i]=i-col_ex;if((this.hdrLabels[i]==this.splitSign)&&(i!=0)){if(_isKHTML){hdrRow.insertCell(i-col_ex)}hdrRow.cells[i-col_ex-1].colSpan=(hdrRow.cells[i-col_ex-1].colSpan||1)+1;hdrRow.childNodes[i-col_ex-1]._cellIndex++;col_ex++;hdrRow._childIndexes[i]=i-col_ex;continue}hdrRow.insertCell(i-col_ex);hdrRow.childNodes[i-col_ex]._cellIndex=i;hdrRow.childNodes[i-col_ex]._cellIndexS=i;this.setColumnLabel(i,this.hdrLabels[i])}if(col_ex==0){hdrRow._childIndexes=null}this._cCount=this.hdrLabels.length;if(_isIE){window.setTimeout(function(){if(self.setSizes){self.setSizes()}},1)}if(!this.obj.firstChild){this.obj.appendChild(document.createElement("TBODY"))}var tar=this.obj.firstChild;if(!tar.firstChild){tar.appendChild(document.createElement("TR"));tar=tar.firstChild;if(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined){tar.style.position="absolute"}else{tar.style.height="auto"}for(var i=0;i<this.hdrLabels.length;i++){tar.appendChild(document.createElement("TH"));tar.childNodes[i].style.height="0px"}}this._c_order=null;if(this.multiLine!=true){this.obj.className+=" row20px"}this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;if(this.noHeader){this.hdrBox.style.display="none"}else{this.noHeader=false}if(this._ivizcol){this.setColHidden()}this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();if(fl){this.parseXML()}this.obj.scrollTop=0;if(this.dragAndDropOff){this.dragger.addDragLanding(this.entBox,this)}if(this._initDrF){this._initD()}dhx4.callEvent("onGridCreated",[this])};this.setColumnSizes=function(gridWidth){var summ=0;var fcols=[];var fix=0;for(var i=0;i<this._cCount;i++){if((this.initCellWidth[i]=="*")&&!this._hrrar[i]){this._awdth=false;fcols.push(i);continue}if(this.cellWidthType=="%"){if(typeof this.cellWidthPC[i]=="undefined"){this.cellWidthPC[i]=this.initCellWidth[i]}var cwidth=(gridWidth*this.cellWidthPC[i]/100)||0;if(fix>0.5){cwidth++;fix--}var rwidth=this.cellWidthPX[i]=Math.floor(cwidth);var fix=fix+cwidth-rwidth}else{if(typeof this.cellWidthPX[i]=="undefined"){this.cellWidthPX[i]=this.initCellWidth[i]}}if(!this._hrrar[i]){summ+=this.cellWidthPX[i]*1}}if(fcols.length){var ms=Math.floor((gridWidth-summ)/fcols.length);if(ms<0){ms=1}for(var i=0;i<fcols.length;i++){var next=Math.max((this._drsclmW?(this._drsclmW[fcols[i]]||0):0),ms);this.cellWidthPX[fcols[i]]=next;summ+=next}if(gridWidth>summ){var last=fcols[fcols.length-1];this.cellWidthPX[last]=this.cellWidthPX[last]+(gridWidth-summ);summ=gridWidth}this._setAutoResize()}this.obj.style.width=summ+"px";this.hdr.style.width=summ+"px";if(this.ftr){this.ftr.style.width=summ+"px"}this.chngCellWidth();return summ};this.setSizes=function(){if((!this.hdr.rows[0])){return}var quirks=this.quirks=(_isIE&&document.compatMode=="BackCompat");var outerBorder=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){if(!this.globalBox.clientWidth){return}var ow=this.globalBox.clientWidth;var splitOuterBorder=(this.globalBox.offsetWidth-ow)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;this.globalBox.style.boxSizing="border-box";var owu=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,(owu+(quirks?splitOuterBorder*2:0))-this._fake.entBox.clientWidth)+"px";if(owu!=this._lastTimeSplitWidth){this._fake._correctSplit(this._fake.entBox.clientWidth);this._lastTimeSplitWidth=owu}}if(this._delta_y&&!this._realfake){this.globalBox.style.height=this._delta_y;this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden";this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(quirks?splitOuterBorder*2:0)+"px"}}else{if(this._delta_x){if(this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"){this.entBox.style.width="1px";this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-outerBorder*2+"px"}else{this.entBox.style.width=this._delta_x}}if(this._delta_y){this.entBox.style.height=this._delta_y}}}window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){if(self.setSizes){self.setSizes()}},250);return}var border_x=((!this._wthB)&&((this.entBox.cmp||this._delta_x)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!quirks)?2:0);var border_y=((!this._wthB)&&((this.entBox.cmp||this._delta_y)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!quirks)?2:0);if(this._sizeFix){border_x-=this._sizeFix;border_y-=this._sizeFix}var isVScroll=this.parentGrid?false:(this.objBox.scrollHeight>this.objBox.offsetHeight);var scrfix=dhtmlx.$customScroll?0:18;var gridWidth=this.entBox.clientWidth-(this.skin_h_correction||0)*(quirks?0:1)-border_x;var gridWidthActive=this.entBox.clientWidth-(this.skin_h_correction||0)-border_x;var gridHeight=this.entBox.clientHeight-border_y;var summ=this.setColumnSizes(gridWidthActive-(isVScroll?scrfix:0)-(this._correction_x||0));var isHScroll=this.parentGrid?false:((this.objBox.scrollWidth>this.objBox.offsetWidth)||(this.objBox.style.overflowX=="scroll"));var headerHeight=this.hdr.clientHeight;var footerHeight=this.ftr?this.ftr.clientHeight:0;var newWidth=gridWidth;var newHeight=gridHeight-headerHeight-footerHeight;if(this._awdth&&this._awdth[0]&&this._awdth[1]==99999){isHScroll=0}if(this._ahgr){if(this._ahgrMA){newHeight=this.entBox.parentNode.clientHeight-headerHeight-footerHeight}else{newHeight=this.obj.offsetHeight+(isHScroll?scrfix:0)+(this._correction_y||0)}if(this._ahgrM){if(this._ahgrF){newHeight=Math.min(this._ahgrM,newHeight+headerHeight+footerHeight)-headerHeight-footerHeight}else{newHeight=Math.min(this._ahgrM,newHeight)}}if(isVScroll&&newHeight>=this.obj.scrollHeight+(isHScroll?scrfix:0)){isVScroll=false;this.setColumnSizes(gridWidthActive-(this._correction_x||0))}}if((this._awdth)&&(this._awdth[0])){if(this.cellWidthType=="%"){this.cellWidthType="px"}if(this._fake){summ+=this._fake.entBox.clientWidth}var newWidth=Math.min(Math.max(summ+(isVScroll?scrfix:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=(!isVScroll&&this.objBox.scrollWidth<=newWidth)?"hidden":"auto";if(this._fake){newWidth-=this._fake.entBox.clientWidth}}newHeight=Math.max(0,newHeight);this._ff_size_delta=(this._ff_size_delta==0.1)?0.2:0.1;if(!_isFF){this._ff_size_delta=0}if(!this.dontSetSizes){this.entBox.style.width=Math.max(0,newWidth+(quirks?2:0)*outerBorder+this._ff_size_delta)+"px";this.entBox.style.height=newHeight+(quirks?2:0)*outerBorder+headerHeight+footerHeight+"px"}this.objBox.style.height=newHeight+((quirks&&!isVScroll)?2:0)*outerBorder+"px";this.hdrBox.style.height=headerHeight+"px";if(newHeight!=gridHeight){this.doOnScroll(0,!this._srnd)}var ext=this["setSizes_"+this.skin_name];if(ext){ext.call(this)}this.setSortImgPos();if(headerHeight!=this.hdr.clientHeight&&this._ahgr){this.setSizes()}this.callEvent("onSetSizes",[])};this.chngCellWidth=function(){if((_isOpera)&&(this.ftr)){this.ftr.width=this.objBox.scrollWidth+"px"}var l=this._cCount;for(var i=0;i<l;i++){this.hdr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px";this.obj.rows[0].childNodes[i].style.width=this.cellWidthPX[i]+"px";if(this.ftr){this.ftr.rows[0].cells[i].style.width=this.cellWidthPX[i]+"px"}}};this.setDelimiter=function(delim){this.delim=delim};this.setInitWidthsP=function(wp){this.cellWidthType="%";this.initCellWidth=wp.split(this.delim.replace(/px/gi,""));if(!arguments[1]){this._setAutoResize()}};this._setAutoResize=function(){if(this._realfake){return}var el=window;var self=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(self._resize_timer);if(self._setAutoResize){self._resize_timer=window.setTimeout(function(){if(self.setSizes){self.setSizes()}if(self._fake){self._fake._correctSplit()}},100)}});this._setAutoResize=function(){}};this.setInitWidths=function(wp){this.cellWidthType="px";this.initCellWidth=wp.split(this.delim);if(_isFF){for(var i=0;i<this.initCellWidth.length;i++){if(this.initCellWidth[i]!="*"){this.initCellWidth[i]=parseInt(this.initCellWidth[i])}}}};this.enableMultiline=function(state){this.multiLine=dhx4.s2b(state)};this.enableMultiselect=function(state){this.selMultiRows=dhx4.s2b(state)};this.setImagePath=function(path){path=path.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this._imgURL=path;this.imgURL=path+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"};this.setImagesPath=this.setImagePath;this.setIconPath=function(path){this.iconURL=path};this.setIconsPath=this.setIconPath;this.changeCursorState=function(ev){var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}if(!el){return}if((el.tagName=="TD")&&(this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return el.style.cursor="default"}var check=(ev.layerX||0)+(((!_isIE)&&(ev.target.tagName=="DIV"))?el.offsetLeft:0);if((el.offsetWidth-(ev.offsetX||(parseInt(this.getPosition(el,this.hdrBox))-check)*-1))<(_isOpera?20:10)){el.style.cursor="E-resize"}else{el.style.cursor="default"}if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft}};this.startColResize=function(ev){if(this.resized){this.stopColResize()}this.resized=null;var el=ev.target||ev.srcElement;if(el.tagName!="TD"){el=this.getFirstParentOfType(el,"TD")}var x=ev.clientX;var tabW=this.hdr.offsetWidth;var startW=parseInt(el.offsetWidth);if(el.tagName=="TD"&&el.style.cursor!="default"){if((this._drsclmn)&&(!this._drsclmn[el._cellIndex])){return}self._old_d_mm=document.body.onmousemove;self._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(e){if(self){self.doColResize(e||window.event,el,startW,x,tabW)}};document.body.onmouseup=function(){if(self){self.stopColResize()}}}};this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"";document.body.onmouseup=self._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(ev,el,startW,x,tabW){el.style.cursor="E-resize";this.resized=el;var fcolW=startW+(ev.clientX-x);var wtabW=tabW+(ev.clientX-x);if(!(this.callEvent("onResize",[el._cellIndex,fcolW,this]))){return}if(_isIE){this.objBox.scrollLeft=this.hdrBox.scrollLeft}var result=false;if(el.colSpan>1){var a_sizes=new Array();for(var i=0;i<el.colSpan;i++){a_sizes[i]=Math.round(fcolW*this.hdr.rows[0].childNodes[el._cellIndexS+i].offsetWidth/el.offsetWidth)}for(var i=0;i<el.colSpan;i++){result=this._setColumnSizeR(el._cellIndexS+i*1,a_sizes[i])}}else{result=this._setColumnSizeR(el._cellIndex,fcolW)}this.doOnScroll(0,1);this.setSizes();if(this._fake&&this._awdth){this._fake._correctSplit()}return result};this._setColumnSizeR=function(ind,fcolW){if(fcolW>((this._drsclmW&&!this._notresize)?(this._drsclmW[ind]||10):10)){this.obj.rows[0].childNodes[ind].style.width=fcolW+"px";this.hdr.rows[0].childNodes[ind].style.width=fcolW+"px";if(this.ftr){this.ftr.rows[0].childNodes[ind].style.width=fcolW+"px"}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=fcolW}else{var gridWidth=parseInt(this.entBox.offsetWidth);if(this.objBox.scrollHeight>this.objBox.offsetHeight){gridWidth-=17}var pcWidth=Math.round(fcolW/gridWidth*100);this.cellWidthPC[ind]=pcWidth}if(this.sortImg.style.display!="none"){this.setSortImgPos()}}else{return false}};this.setSortImgState=function(state,ind,order,row){order=(order||"asc").toLowerCase();if(!dhx4.s2b(state)){this.sortImg.style.display="none";if(this.r_fldSorted){this.r_fldSorted.className=""}this.fldSorted=this.r_fldSorted=null;return}if(order=="asc"){this.sortImg.className="dhxgrid_sort_asc"}else{this.sortImg.className="dhxgrid_sort_desc"}this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[ind];var r=this.hdr.rows[row||1];if(!r){return}for(var i=0;i<r.childNodes.length;i++){if(r.childNodes[i]._cellIndexS==ind){this.r_fldSorted=r.childNodes[i];return this.setSortImgPos()}}return this.setSortImgState(state,ind,order,(row||1)+1)};this.setSortImgPos=function(ind,mode,hRowInd,el){if(this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:ind]){return}if(this.ar_fldSorted){this.ar_fldSorted.className=""}if(!el){if(!ind){var el=this.r_fldSorted}else{var el=this.hdr.rows[hRowInd||0].cells[ind]}}if(el!=null){var pos=this.getPosition(el,this.hdrBox);var wdth=el.offsetWidth;this.ar_fldSorted=el;el.className=this.sortImg.className+"_col";this.sortImg.style.left=Number(pos[0]+wdth-13)+"px";this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=Number(pos[1]+5)+"px";if((!this.useImagesInHeader)&&(!mode)){this.sortImg.style.display="inline"}this.sortImg.style.left=this.sortImg.defLeft+"px"}};this.setActive=function(fl){if(arguments.length==0){var fl=true}if(fl==true){if(globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject!=this)){globalActiveDHTMLGridObject.editStop();globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])}globalActiveDHTMLGridObject=this;this.isActive=true}else{this.isActive=false;this.callEvent("onBlur",[this])}};this._doClick=function(ev){var selMethod=0;var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(!el||!el.parentNode||!el.parentNode.idd){return}var fl=true;if(this.markedCells){var markMethod=0;if(ev.shiftKey||ev.metaKey){markMethod=1}if(ev.ctrlKey){markMethod=2}this.doMark(el,markMethod);return true}if(this.selMultiRows!=false){if(ev.shiftKey&&this.row!=null&&this.selectedRows.length){selMethod=1}if(ev.ctrlKey||ev.metaKey){selMethod=2}}return this.doClick(el,fl,selMethod,false)};this._doContClick=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if((!el)||(typeof(el.parentNode.idd)=="undefined")){this.callEvent("onEmptyClick",[ev]);return true}if(ev.button==2||(_isMacOS&&ev.ctrlKey)){if(!this.callEvent("onRightClick",[el.parentNode.idd,el._cellIndex,ev])){var z=function(e){(e||event).cancelBubble=true;return false};(ev.srcElement||ev.target).oncontextmenu=z;return z(ev)}if(this._ctmndx){if(!(this.callEvent("onBeforeContextMenu",[el.parentNode.idd,el._cellIndex,this]))){return true}if(_isIE){ev.srcElement.oncontextmenu=function(){event.cancelBubble=true;return false}}if(this._ctmndx.showContextMenu){var dEl0=window.document.documentElement;var dEl1=window.document.body;var corrector=new Array((dEl0.scrollLeft||dEl1.scrollLeft),(dEl0.scrollTop||dEl1.scrollTop));if(_isIE){var x=ev.clientX+corrector[0];var y=ev.clientY+corrector[1]}else{var x=ev.pageX;var y=ev.pageY}this._ctmndx.showContextMenu(x-1,y-1);this.contextID=this._ctmndx.contextMenuZoneId=el.parentNode.idd+"_"+el._cellIndex;this._ctmndx._skip_hide=true}else{el.contextMenuId=el.parentNode.idd+"_"+el._cellIndex;el.contextMenu=this._ctmndx;el.a=this._ctmndx._contextStart;el.a(el,ev);el.a=null}ev.cancelBubble=true;return false}}else{if(this._ctmndx){if(this._ctmndx.hideContextMenu){this._ctmndx.hideContextMenu()}else{this._ctmndx._contextEnd()}}}return true};this.doClick=function(el,fl,selMethod,show){if(!this.selMultiRows){selMethod=0}var psid=this.row?this.row.idd:0;this.setActive(true);if(!selMethod){selMethod=0}if(this.cell!=null){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")}if(el.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")){var initial=this.getSelectedId()}var prow=this.row;if(selMethod==1){var elRowIndex=this.rowsCol._dhx_find(el.parentNode);var lcRowIndex=this.rowsCol._dhx_find(this.lastClicked);if(elRowIndex>lcRowIndex){var strt=lcRowIndex;var end=elRowIndex}else{var strt=elRowIndex;var end=lcRowIndex}for(var i=0;i<this.rowsCol.length;i++){if((i>=strt&&i<=end)){if(this.rowsCol[i]&&(!this.rowsCol[i]._sRow)){if(!this.rowsCol[i].idd){continue}if(this.rowsCol[i].className.indexOf("rowselected")==-1&&(this.callEvent("onBeforeSelect",[this.rowsCol[i].idd,psid,el._cellIndex]))){this.rowsCol[i].className+=" rowselected";this.selectedRows[this.selectedRows.length]=this.rowsCol[i]}}else{this.clearSelection();return this.doClick(el,fl,0,show)}}}}else{if(selMethod==2){if(el.parentNode.className.indexOf("rowselected")!=-1){el.parentNode.className=el.parentNode.className.replace(/[ \t]*rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(el.parentNode));var skipRowSelection=true;show=false}}}this.editStop();if(typeof(el.parentNode.idd)=="undefined"){return true}if((!skipRowSelection)&&(!el.parentNode._sRow)){if(this.callEvent("onBeforeSelect",[el.parentNode.idd,psid,el._cellIndex])){if(this.getSelectedRowId()!=el.parentNode.idd){if(selMethod==0){this.clearSelection()}this.cell=el;if((prow==el.parentNode)&&(this._chRRS)){fl=false}this.row=el.parentNode;this.row.className+=" rowselected";if(this.selectedRows._dhx_find(this.row)==-1){this.selectedRows[this.selectedRows.length]=this.row}}else{this.cell=el;this.row=el.parentNode}}else{fl=false}}if(this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")+" cellselected"}if(selMethod!=1){if(!this.row){return}}this.lastClicked=el.parentNode;var rid=this.row.idd;var cid=this.cell;if(fl&&typeof(rid)!="undefined"&&cid&&!skipRowSelection){self.onRowSelectTime=setTimeout(function(){if(self.callEvent){self.callEvent("onRowSelect",[rid,cid._cellIndex])}},100)}else{this.callEvent("onRowSelectRSOnly",[rid])}if(this.checkEvent("onSelectStateChanged")){var afinal=this.getSelectedId();if(initial!=afinal){this.callEvent("onSelectStateChanged",[afinal,initial])}}if(skipRowSelection){return false}}this.isActive=true;if(show!==false&&this.cell&&this.cell.parentNode.idd){this.moveToVisible(this.cell)}};this.selectAll=function(){this.clearSelection();var coll=this.rowsBuffer;if(this.pagingOn){coll=this.rowsCol}for(var i=0;i<coll.length;i++){this.render_row(i).className+=" rowselected"}this.selectedRows=dhtmlxArray([].concat(coll));if(this.selectedRows.length){this.row=this.selectedRows[0];this.cell=this.row.cells[0]}if((this._fake)&&(!this._realfake)){this._fake.selectAll()}};this.selectCell=function(r,cInd,fl,preserve,edit,show){if(!fl){fl=false}if(typeof(r)!="object"){r=this.render_row(r)}if(!r||r==-1){return null}if(r._childIndexes){var c=r.childNodes[r._childIndexes[cInd]]}else{var c=r.childNodes[cInd]}if(!c){c=r.childNodes[0]}if(!this.markedCells){if(preserve){this.doClick(c,fl,3,show)}else{this.doClick(c,fl,0,show)}}else{this.doMark(c,preserve?2:0)}if(edit){this.editCell()}};this.moveToVisible=function(cell_obj,onlyVScroll){if(this.pagingOn){var newPage=Math.floor(this.getRowIndex(cell_obj.parentNode.idd)/this.rowsBufferOutSize)+1;if(newPage!=this.currentPage){this.changePage(newPage)}}try{if(cell_obj.offsetHeight){var distance=cell_obj.offsetLeft+cell_obj.offsetWidth+20;var scrollLeft=0;if(distance>(this.objBox.offsetWidth+this.objBox.scrollLeft)){if(cell_obj.offsetLeft>this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-(this.objBox.offsetWidth-cell_obj.offsetWidth)+5}}else{if(cell_obj.offsetLeft<this.objBox.scrollLeft){distance-=cell_obj.offsetWidth*2/3;if(distance<this.objBox.scrollLeft){scrollLeft=cell_obj.offsetLeft-5}}}if((scrollLeft)&&(!onlyVScroll)){this.objBox.scrollLeft=scrollLeft}}if(!cell_obj.offsetHeight){var mask=this._realfake?this._fake.rowsAr[cell_obj.parentNode.idd]:cell_obj.parentNode;distance=this.rowsBuffer._dhx_find(mask)*this._srdh}else{distance=cell_obj.offsetTop}var distancemax=distance+cell_obj.offsetHeight+38;if(distancemax>(this.objBox.offsetHeight+this.objBox.scrollTop)){var scrollTop=distance}else{if(distance<this.objBox.scrollTop){var scrollTop=distance-5}}if(scrollTop){this.objBox.scrollTop=scrollTop}}catch(er){}};this.editCell=function(){if(this.editor&&this.cell==this.editor.cell){return}this.editStop();if((this.isEditable!=true)||(!this.cell)){return false}var c=this.cell;if(c.parentNode._locked){return false}this.editor=this.cells4(c);if(this.editor!=null){if(this.editor.isDisabled()){this.editor=null;return false}if(this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=false&&this.editor.edit){this._Opera_stop=(new Date).valueOf();c.className+=" editable";this.editor.edit();this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])}else{this.editor=null}}};this.editStop=function(mode){if(_isOpera){if(this._Opera_stop){if((this._Opera_stop*1+50)>(new Date).valueOf()){return}this._Opera_stop=null}}if(this.editor&&this.editor!=null){this.editor.cell.className=this.editor.cell.className.replace("editable","");if(mode){var t=this.editor.val;this.editor.detach();this.editor.setValue(t);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,t]);return}if(this.editor.detach()){this.cell.wasChanged=true}var g=this.editor;if(g==null){return}this.editor=null;var z=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,g.getValue(),g.val]);if((typeof(z)=="string")||(typeof(z)=="number")){g[g.setImage?"setLabel":"setValue"](z)}else{if(!z){g[g.setImage?"setLabel":"setValue"](g.val)}}if(this._ahgr&&this.multiLine){this.setSizes()}}};this._nextRowCell=function(row,dir,pos){row=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(row),dir);if(!row){return null}return row.childNodes[row._childIndexes?row._childIndexes[pos]:pos]};this._getNextCell=function(acell,dir,i){acell=acell||this.cell;var arow=acell.parentNode;if(this._tabOrder){i=this._tabOrder[acell._cellIndex];if(typeof i!="undefined"){if(i<0){acell=this._nextRowCell(arow,dir,Math.abs(i)-1)}else{acell=arow.childNodes[i]}}}else{var i=acell._cellIndex+dir;if(i>=0&&i<this._cCount){if(arow._childIndexes){i=arow._childIndexes[acell._cellIndex]+dir}acell=arow.childNodes[i]}else{acell=this._nextRowCell(arow,dir,(dir==1?0:(this._cCount-1)))}}if(!acell){if((dir==1)&&this.tabEnd){this.tabEnd.focus();this.tabEnd.focus();this.setActive(false)}if((dir==-1)&&this.tabStart){this.tabStart.focus();this.tabStart.focus();this.setActive(false)}return null}if(acell.style.display!="none"&&(!this.smartTabOrder||!this.cells(acell.parentNode.idd,acell._cellIndex).isDisabled())){return acell}return this._getNextCell(acell,dir)};this._nextRow=function(ind,dir){var r=this.render_row(ind+dir);if(!r||r==-1){return null}if(r&&r.style.display=="none"){return this._nextRow(ind+dir,dir)}return r};this.scrollPage=function(dir){if(!this.rowsBuffer.length){return}var master=this._realfake?this._fake:this;var new_ind=Math.floor((master._r_select||this.getRowIndex(this.row.idd)||0)+(dir)*this.objBox.offsetHeight/(this._srdh||20));if(new_ind<0){new_ind=0}if(new_ind>=this.rowsBuffer.length){new_ind=this.rowsBuffer.length-1}if(this._srnd&&!this.rowsBuffer[new_ind]){this.objBox.scrollTop+=Math.floor((dir)*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20);if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}master._r_select=new_ind}else{this.selectCell(new_ind,this.cell._cellIndex,true,false,false,(this.multiLine||this._srnd));if(!this.multiLine&&!this._srnd&&!this._realfake){this.objBox.scrollTop=this.getRowById(this.getRowId(new_ind)).offsetTop;if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}}master._r_select=null}};this.doKey=function(ev){if(!ev){return true}if((ev.target||ev.srcElement).value!==window.undefined){var zx=(ev.target||ev.srcElement);if(zx.className!="dhxcombo_input"&&zx.className!="dhx_tab_ignore"&&((!zx.parentNode)||(zx.parentNode.className.indexOf("editable")==-1))){return true}}if((globalActiveDHTMLGridObject)&&(this!=globalActiveDHTMLGridObject)){return globalActiveDHTMLGridObject.doKey(ev)}if(this.isActive==false){return true}if(this._htkebl){return true}if(!this.callEvent("onKeyPress",[ev.keyCode,ev.ctrlKey,ev.shiftKey,ev])){return false}var code="k"+ev.keyCode+"_"+(ev.ctrlKey?1:0)+"_"+(ev.shiftKey?1:0);if(this.cell){if(this._key_events[code]){if(false===this._key_events[code].call(this)){return true}if(ev.preventDefault){ev.preventDefault()}ev.cancelBubble=true;return false}if(this._key_events.k_other){this._key_events.k_other.call(this,ev)}}return true};this.selectRow=function(r,fl,preserve,show){if(typeof(r)!="object"){r=this.render_row(r)}this.selectCell(r,0,fl,preserve,false,show)};this.wasDblClicked=function(ev){var el=this.getFirstParentOfType(_isIE?ev.srcElement:ev.target,"TD");if(el){var rowId=el.parentNode.idd;return this.callEvent("onRowDblClicked",[rowId,el._cellIndex,ev])}};this._onHeaderClick=function(e,el){var that=this.grid;el=el||that.getFirstParentOfType(_isIE?event.srcElement:e.target,"TD");if(this.grid.resized==null){if(!(this.grid.callEvent("onHeaderClick",[el._cellIndexS,(e||window.event)]))){return false}that.sortField(el._cellIndexS,false,el)}this.grid.resized=null};this.deleteSelectedRows=function(){var num=this.selectedRows.length;if(num==0){return}var tmpAr=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=num-1;i>=0;i--){var node=tmpAr[i];if(!this.deleteRow(node.idd,node)){this.selectedRows[this.selectedRows.length]=node}else{if(node==this.row){var ind=i}}}if(ind){try{if(ind+1>this.rowsCol.length){ind--}this.selectCell(ind,0,true)}catch(er){this.row=null;this.cell=null}}};this.getSelectedRowId=function(){var selAr=new Array(0);var uni={};for(var i=0;i<this.selectedRows.length;i++){var id=this.selectedRows[i].idd;if(uni[id]){continue}selAr[selAr.length]=id;uni[id]=true}if(selAr.length==0){return null}else{return selAr.join(this.delim)}};this.getSelectedCellIndex=function(){if(this.cell!=null){return this.cell._cellIndex}else{return -1}};this.getColWidth=function(ind){return parseInt(this.cellWidthPX[ind])};this.setColWidth=function(ind,value){if(value=="*"){this.initCellWidth[ind]="*"}else{if(this._hrrar[ind]){return}if(this.cellWidthType=="px"){this.cellWidthPX[ind]=parseInt(value)}else{this.cellWidthPC[ind]=parseInt(value)}}this.setSizes()};this.getRowIndex=function(row_id){for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==row_id){return i}}return -1};this.getRowId=function(ind){return this.rowsBuffer[ind]?this.rowsBuffer[ind].idd:this.undefined};this.setRowId=function(ind,row_id){this.changeRowId(this.getRowId(ind),row_id)};this.changeRowId=function(oldRowId,newRowId){if(oldRowId==newRowId){return}var row=this.rowsAr[oldRowId];row.idd=newRowId;if(this.UserData[oldRowId]){this.UserData[newRowId]=this.UserData[oldRowId];this.UserData[oldRowId]=null}if(this._h2&&this._h2.get[oldRowId]){this._h2.get[newRowId]=this._h2.get[oldRowId];this._h2.get[newRowId].id=newRowId;delete this._h2.get[oldRowId]}this.rowsAr[oldRowId]=null;this.rowsAr[newRowId]=row;for(var i=0;i<row.childNodes.length;i++){if(row.childNodes[i]._code){row.childNodes[i]._code=this._compileSCL(row.childNodes[i]._val,row.childNodes[i])}}if(this._mat_links&&this._mat_links[oldRowId]){var a=this._mat_links[oldRowId];delete this._mat_links[oldRowId];for(var c in a){for(var i=0;i<a[c].length;i++){this._compileSCL(a[c][i].original,a[c][i])}}}this.callEvent("onRowIdChange",[oldRowId,newRowId])};this.setColumnIds=function(ids){this.columnIds=ids.split(this.delim)};this.setColumnId=function(ind,id){this.columnIds[ind]=id};this.getColIndexById=function(id){for(var i=0;i<this.columnIds.length;i++){if(this.columnIds[i]==id){return i}}};this.getColumnId=function(cin){return this.columnIds[cin]};this.getColumnLabel=function(cin,ind,hdr,raw){var z=(hdr||this.hdr).rows[(ind||0)+1];for(var i=0;i<z.cells.length;i++){if(z.cells[i]._cellIndexS==cin){return raw?z.cells[i].firstChild.innerHTML:(_isIE?z.cells[i].innerText:z.cells[i].textContent)}}return""};this.getColLabel=this.getColumnLabel;this.getFooterLabel=function(cin,ind,raw){return this.getColumnLabel(cin,ind,this.ftr,raw)};this.setRowTextBold=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="bold"}};this.setRowTextStyle=function(row_id,styleString){var r=this.getRowById(row_id);if(!r){return}for(var i=0;i<r.childNodes.length;i++){var pfix=r.childNodes[i]._attrs.style||"";if((this._hrrar)&&(this._hrrar[i])){pfix="display:none;"}if(_isIE){r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}else{r.childNodes[i].style.cssText=pfix+"width:"+r.childNodes[i].style.width+";"+styleString}}};this.setRowColor=function(row_id,color){var r=this.getRowById(row_id);for(var i=0;i<r.childNodes.length;i++){r.childNodes[i].bgColor=color}};this.setCellTextStyle=function(row_id,ind,styleString){var r=this.getRowById(row_id);if(!r){return}var cell=r.childNodes[r._childIndexes?r._childIndexes[ind]:ind];if(!cell){return}var pfix="";if((this._hrrar)&&(this._hrrar[ind])){pfix="display:none;"}if(_isIE){cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}else{cell.style.cssText=pfix+"width:"+cell.style.width+";"+styleString}};this.setRowTextNormal=function(row_id){var r=this.getRowById(row_id);if(r){r.style.fontWeight="normal"}};this.doesRowExist=function(row_id){if(this.getRowById(row_id)!=null){return true}else{return false}};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,-1)}var rInd=this.rowsCol._dhx_find(r);if((r.previousSibling)&&(rInd!=0)){r.parentNode.insertBefore(r,r.previousSibling);this.rowsCol._dhx_swapItems(rInd,rInd-1);this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd-1);if(this._cssEven){this._fixAlterCss(rInd-1)}}};this.moveRowDown=function(row_id){var r=this.getRowById(row_id);if(this.isTreeGrid()){return this.moveRowUDTG(row_id,1)}var rInd=this.rowsCol._dhx_find(r);if(r.nextSibling){this.rowsCol._dhx_swapItems(rInd,rInd+1);if(r.nextSibling.nextSibling){r.parentNode.insertBefore(r,r.nextSibling.nextSibling)}else{r.parentNode.appendChild(r)}this.setSizes();var bInd=this.rowsBuffer._dhx_find(r);this.rowsBuffer._dhx_swapItems(bInd,bInd+1);if(this._cssEven){this._fixAlterCss(rInd)}}};this.getCombo=function(col_ind){if(!this.combos[col_ind]){this.combos[col_ind]=new dhtmlXGridComboObject()}return this.combos[col_ind]};this.setUserData=function(row_id,name,value){if(!row_id){row_id="gridglobaluserdata"}if(!this.UserData[row_id]){this.UserData[row_id]=new Hashtable()}this.UserData[row_id].put(name,value)};this.getUserData=function(row_id,name){if(!row_id){row_id="gridglobaluserdata"}this.getRowById(row_id);var z=this.UserData[row_id];return(z?z.get(name):"")};this.setEditable=function(fl){this.isEditable=dhx4.s2b(fl)};this.selectRowById=function(row_id,multiFL,show,call){if(!call){call=false}this.selectCell(this.getRowById(row_id),0,call,multiFL,false,show)};this.clearSelection=function(){this.editStop();for(var i=0;i<this.selectedRows.length;i++){var r=this.rowsAr[this.selectedRows[i].idd];if(r){r.className=r.className.replace(/[ \t]*rowselected/g,"")}}this.selectedRows=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"");this.cell=null}this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(from_row_id,to_row_id){var frRow=this.getRowById(from_row_id);if(!this.isTreeGrid()){for(var i=0;i<frRow.cells.length;i++){this.cells(to_row_id,i).setValue(this.cells(from_row_id,i).getValue())}}else{this._copyTreeGridRowContent(frRow,from_row_id,to_row_id)}if(!_isIE){this.getRowById(from_row_id).cells[0].height=frRow.cells[0].offsetHeight}};this.setFooterLabel=function(c,label,ind){return this.setColumnLabel(c,label,ind,this.ftr)};this.setColumnLabel=function(c,label,ind,hdr){var z=(hdr||this.hdr).rows[ind||1];var col=(z._childIndexes?z._childIndexes[c]:c);if(!z.cells[col]){return}if(!this.useImagesInHeader){var hdrHTML="<div class='hdrcell'>";if(label.indexOf("img:[")!=-1){var imUrl=label.replace(/.*\[([^>]+)\].*/,"$1");label=label.substr(label.indexOf("]")+1,label.length);hdrHTML+="<img width='18px' height='18px' align='absmiddle' src='"+imUrl+"' hspace='2'>"}hdrHTML+=label;hdrHTML+="</div>";z.cells[col].innerHTML=hdrHTML;if(this._hstyles[c]){z.cells[col].style.cssText=this._hstyles[c]}}else{z.cells[col].style.textAlign="left";z.cells[col].innerHTML="<img src='"+label+"'>";var a=new Image();a.src=""+label.replace(/(\.[a-z]+)/,".des$1");this.preloadImagesAr[this.preloadImagesAr.length]=a;var b=new Image();b.src=""+label.replace(/(\.[a-z]+)/,".asc$1");this.preloadImagesAr[this.preloadImagesAr.length]=b}if((label||"").indexOf("#")!=-1){var t=label.match(/(^|{)#([^}]+)(}|$)/);if(t){var tn="_in_header_"+t[2];if(this[tn]){this[tn]((this.forceDivInHeader?z.cells[col].firstChild:z.cells[col]),col,label.split(t[0]))}}}};this.setColLabel=function(a,b,ind,c){return this.setColumnLabel(a,b,(ind||0)+1,c)};this.clearAll=function(header){if(!this.obj.rows[0]){return}if(this._h2){this._h2=this._createHierarchy();if(this._fake){if(this._realfake){this._h2=this._fake._h2}else{this._fake._h2=this._h2}}}this.limit=this._limitC=0;this.editStop(true);if(this._dLoadTimer){window.clearTimeout(this._dLoadTimer)}if(this._dload){this.objBox.scrollTop=0;this.limit=this._limitC||0;this._initDrF=true}var len=this.rowsCol.length;len=this.obj.rows.length;for(var i=len-1;i>0;i--){var t_r=this.obj.rows[i];t_r.parentNode.removeChild(t_r)}if(header){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var i=this.hdr.rows.length-1;i>=0;i--){var t_r=this.hdr.rows[i];t_r.parentNode.removeChild(t_r)}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr);this.ftr=null}this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.row=null;this.cell=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd){this.xmlFileUrl=""}if(this.pagingOn){this.changePage(1)}if(this._contextCallTimer){window.clearTimeout(this._contextCallTimer)}if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;this.setSortImgState(false);this.setSizes();this.callEvent("onClearAll",[])};this.sortField=function(ind,repeatFl,r_el){if(this.getRowsNum()==0){return false}var el=this.hdr.rows[0].cells[ind];if(!el){return}if(el.tagName=="TH"&&(this.fldSort.length-1)>=el._cellIndex&&this.fldSort[el._cellIndex]!="na"){var data=this.getSortingState();var sortType=(data[0]==ind&&data[1]=="asc")?"des":"asc";if(!this.callEvent("onBeforeSorting",[ind,this.fldSort[ind],sortType])){return}this.sortImg.className="dhxgrid_sort_"+(sortType=="asc"?"asc":"desc");if(this.useImagesInHeader){var cel=this.hdr.rows[1].cells[el._cellIndex].firstChild;if(this.fldSorted!=null){var celT=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;celT.src=celT.src.replace(/(\.asc\.)|(\.des\.)/,".")}cel.src=cel.src.replace(/(\.[a-z]+)$/,"."+sortType+"$1")}this.sortRows(el._cellIndex,this.fldSort[el._cellIndex],sortType);this.fldSorted=el;if(r_el&&r_el.tagName.toLowerCase()!="th"){this.r_fldSorted=r_el}var c=this.hdr.rows[1];var c=r_el.parentNode;var real_el=c._childIndexes?c._childIndexes[el._cellIndex]:el._cellIndex;this.setSortImgPos(false,false,false,r_el)}};this.setCustomSorting=function(func,col){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[col]=(typeof(func)=="string")?eval(func):func;this.fldSort[col]="cus"};this.enableHeaderImages=function(fl){this.useImagesInHeader=fl};this.setHeader=function(hdrStr,splitSign,styles){if(typeof(hdrStr)!="object"){var arLab=this._eSplit(hdrStr)}else{arLab=[].concat(hdrStr)}var arWdth=new Array(0);var arTyp=new dhtmlxArray(0);var arAlg=new Array(0);var arVAlg=new Array(0);var arSrt=new Array(0);for(var i=0;i<arLab.length;i++){arWdth[arWdth.length]=Math.round(100/arLab.length);arTyp[arTyp.length]="ed";arAlg[arAlg.length]="left";arVAlg[arVAlg.length]="middle";arSrt[arSrt.length]="na"}this.splitSign=splitSign||"#cspan";this.hdrLabels=arLab;this.cellWidth=arWdth;if(!this.initCellWidth.length){this.setInitWidthsP(arWdth.join(this.delim),true)}this.cellType=arTyp;this.cellAlign=arAlg;this.cellVAlign=arVAlg;this.fldSort=arSrt;this._hstyles=styles||[]};this._eSplit=function(str){if(![].push){return str.split(this.delim)}var a="r"+(new Date()).valueOf();var z=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(str||"").replace(RegExp(z,"g"),a).replace(RegExp("\\\\"+a,"g"),this.delim).split(a)};this.getColType=function(cInd){return this.cellType[cInd]};this.getColTypeById=function(cID){return this.cellType[this.getColIndexById(cID)]};this.setColTypes=function(typeStr){this.cellType=dhtmlxArray(typeStr.split(this.delim));this._strangeParams=new Array();for(var i=0;i<this.cellType.length;i++){if((this.cellType[i].indexOf("[")!=-1)){var z=this.cellType[i].split(/[\[\]]+/g);this.cellType[i]=z[0];this.defVal[i]=z[1];if(z[1].indexOf("=")==0){this.cellType[i]="math";this._strangeParams[i]=z[0]}}if(!window["eXcell_"+this.cellType[i]]){dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[i],this,this.cellType[i]])}}};this.setColSorting=function(sortStr){this.fldSort=sortStr.split(this.delim);var check={str:1,"int":1,date:1};for(var i=0;i<this.fldSort.length;i++){if((!check[this.fldSort[i]])&&(typeof(window[this.fldSort[i]])=="function")){if(!this._customSorts){this._customSorts=new Array()}this._customSorts[i]=window[this.fldSort[i]];this.fldSort[i]="cus"}}};this.setColAlign=function(alStr){this.cellAlign=alStr.split(this.delim);for(var i=0;i<this.cellAlign.length;i++){this.cellAlign[i]=this.cellAlign[i]._dhx_trim()}};this.setColVAlign=function(valStr){this.cellVAlign=valStr.split(this.delim)};this.setNoHeader=function(fl){this.noHeader=dhx4.s2b(fl)};this.showRow=function(rowID){this.getRowById(rowID);if(this._h2){this.openItem(this._h2.get[rowID].parent.id)}var c=this.getRowById(rowID).childNodes[0];while(c&&c.style.display=="none"){c=c.nextSibling}if(c){this.moveToVisible(c,true)}};this.setStyle=function(ss_header,ss_grid,ss_selCell,ss_selRow){this.ssModifier=[ss_header,ss_grid,ss_selCell,ss_selCell,ss_selRow];var prefs=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];var index=0;while(!_isIE){try{var temp=document.styleSheets[index].cssRules.length}catch(e){index++;continue}break}for(var i=0;i<prefs.length;i++){if(this.ssModifier[i]){if(_isIE){document.styleSheets[0].addRule(prefs[i],this.ssModifier[i])}else{document.styleSheets[index].insertRule(prefs[i]+(" { "+this.ssModifier[i]+" }"),document.styleSheets[index].cssRules.length)}}}};this.setColumnColor=function(clr){this.columnColor=clr.split(this.delim)};this.enableAlterCss=function(cssE,cssU,perLevel,levelUnique){if(cssE||cssU){this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();if(this._fake){this._fake._fixAlterCss()}})}this._cssSP=perLevel;this._cssSU=levelUnique;this._cssEven=cssE;this._cssUnEven=cssU};this._fixAlterCss=function(ind){if(this._h2&&(this._cssSP||this._cssSU)){return this._fixAlterCssTGR(ind)}if(!this._cssEven&&!this._cssUnEven){return}ind=ind||0;var j=ind;for(var i=ind;i<this.rowsCol.length;i++){if(!this.rowsCol[i]){continue}if(this.rowsCol[i].style.display!="none"){if(this.rowsCol[i]._cntr){j=1;continue}if(this.rowsCol[i].className.indexOf("rowselected")!=-1){if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" rowselected "+(this.rowsCol[i]._css||"")}}else{if(j%2==1){this.rowsCol[i].className=this._cssUnEven+" "+(this.rowsCol[i]._css||"")}else{this.rowsCol[i].className=this._cssEven+" "+(this.rowsCol[i]._css||"")}}j++}}};this.clearChangedState=function(clear_added){for(var i=0;i<this.rowsCol.length;i++){var row=this.rowsCol[i];if(row&&row.childNodes){var cols=row.childNodes.length;for(var j=0;j<cols;j++){row.childNodes[j].wasChanged=false}if(clear_added){row._added=false}}}};this.getChangedRows=function(and_added){var res=new Array();this.forEachRow(function(id){var row=this.rowsAr[id];if(row.tagName!="TR"){return}var cols=row.childNodes.length;if(and_added&&row._added){res[res.length]=row.idd}else{for(var j=0;j<cols;j++){if(row.childNodes[j].wasChanged){res[res.length]=row.idd;break}}}});return res.join(this.delim)};this._sUDa=false;this._sAll=false;this.setSerializationLevel=function(userData,fullXML,config,changedAttr,onlyChanged,asCDATA){this._sUDa=userData;this._sAll=fullXML;this._sConfig=config;this._chAttr=changedAttr;this._onlChAttr=onlyChanged;this._asCDATA=asCDATA};this.setSerializableColumns=function(list){if(!list){this._srClmn=null;return}this._srClmn=(list||"").split(",");for(var i=0;i<this._srClmn.length;i++){this._srClmn[i]=dhx4.s2b(this._srClmn[i])}};this._serialise=function(rCol,inner,closed){this.editStop();var out=[];var close="</"+this.xml.s_row+">";if(this.isTreeGrid()){this._h2.forEachChildF(0,function(el){var temp=this._serializeRow(this.render_row_tree(-1,el.id));out.push(temp);if(temp){return true}else{return false}},this,function(){out.push(close)})}else{for(var i=0;i<this.rowsBuffer.length;i++){if(this.rowsBuffer[i]){if(this._chAttr&&this.rowsBuffer[i]._locator){continue}var temp=this._serializeRow(this.render_row(i));out.push(temp);if(temp){out.push(close)}}}}return[out.join("")]};this._serializeRow=function(r,i){var out=[];var ra=this.xml.row_attrs;var ca=this.xml.cell_attrs;out.push("<"+this.xml.s_row);out.push(" id='"+r.idd+"'");if((this._sAll)&&this.selectedRows._dhx_find(r)!=-1){out.push(" selected='1'")}if(this._h2&&this._h2.get[r.idd].state=="minus"){out.push(" open='1'")}if(ra.length){for(var i=0;i<ra.length;i++){out.push(" "+ra[i]+"='"+r._attrs[ra[i]]+"'")}}out.push(">");if(this._sUDa&&this.UserData[r.idd]){keysAr=this.UserData[r.idd].getKeys();for(var ii=0;ii<keysAr.length;ii++){var subkey=keysAr[ii];if(subkey.indexOf("__")!==0){out.push("<userdata name='"+subkey+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[r.idd].get(subkey)+(this._asCDATA?"]]>":"")+"</userdata>")}}}var changeFl=false;for(var jj=0;jj<this._cCount;jj++){if((!this._srClmn)||(this._srClmn[jj])){var zx=this.cells3(r,jj);out.push("<cell");if(ca.length){for(var i=0;i<ca.length;i++){out.push(" "+ca[i]+"='"+zx.cell._attrs[ca[i]]+"'")}}zxVal=zx[this._agetm]();if(this._asCDATA){zxVal="<![CDATA["+zxVal+"]]>"}if((this._ecspn)&&(zx.cell.colSpan)&&zx.cell.colSpan>1){out.push(' colspan="'+zx.cell.colSpan+'" ')}if(this._chAttr){if(zx.wasChanged()){out.push(' changed="1"');changeFl=true}}else{if((this._onlChAttr)&&(zx.wasChanged())){changeFl=true}}if(this._sAll&&this.cellType[jj]=="tree"){out.push((this._h2?(" image='"+this._h2.get[r.idd].image+"'"):"")+">"+zxVal+"</cell>")}else{out.push(">"+zxVal+"</cell>")}if((this._ecspn)&&(zx.cell.colSpan)){for(var u=0;u<zx.cell.colSpan-1;u++){out.push("<cell/>");jj++}}}}if((this._onlChAttr)&&(!changeFl)&&(!r._added)){return""}return out.join("")};this._serialiseConfig=function(){var out="<head>";for(var i=0;i<this.hdr.rows[0].cells.length;i++){if(this._srClmn&&!this._srClmn[i]){continue}var sort=this.fldSort[i];if(sort=="cus"){sort=this._customSorts[i].toString();sort=sort.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}out+="<column width='"+this.getColWidth(i)+"' align='"+this.cellAlign[i]+"' type='"+this.cellType[i]+"' sort='"+(sort||"na")+"' color='"+(this.columnColor[i]||"")+"'"+(this.columnIds[i]?(" id='"+this.columnIds[i]+"'"):"")+">";if(this._asCDATA){out+="<![CDATA["+this.getColumnLabel(i)+"]]>"}else{out+=this.getColumnLabel(i)}var z=this.getCombo(i);if(z){for(var j=0;j<z.keys.length;j++){out+="<option value='"+z.keys[j]+"'>"+z.values[j]+"</option>"}}out+="</column>"}return out+="</head>"};this.serialize=function(){var out='<?xml version="1.0"?><rows>';if(this._mathSerialization){this._agetm="getMathValue"}else{this._agetm="getValue"}if(this._sUDa&&this.UserData.gridglobaluserdata){var keysAr=this.UserData.gridglobaluserdata.getKeys();for(var i=0;i<keysAr.length;i++){out+="<userdata name='"+keysAr[i]+"'>"+this.UserData.gridglobaluserdata.get(keysAr[i])+"</userdata>"}}if(this._sConfig){out+=this._serialiseConfig()}out+=this._serialise();out+="</rows>";return out};this.getPosition=function(oNode,pNode){if(!pNode){var pos=dhx4.getOffset(oNode);return[pos.left,pos.top]}pNode=pNode||document.body;var oCurrentNode=oNode;var iLeft=0;var iTop=0;while((oCurrentNode)&&(oCurrentNode!=pNode)){iLeft+=oCurrentNode.offsetLeft-oCurrentNode.scrollLeft;iTop+=oCurrentNode.offsetTop-oCurrentNode.scrollTop;oCurrentNode=oCurrentNode.offsetParent}if(pNode==document.body){if(_isIE){iTop+=document.body.offsetTop||document.documentElement.offsetTop;iLeft+=document.body.offsetLeft||document.documentElement.offsetLeft}else{if(!_isFF){iLeft+=document.body.offsetLeft;iTop+=document.body.offsetTop}}}return[iLeft,iTop]};this.getFirstParentOfType=function(obj,tag){while(obj&&obj.tagName!=tag&&obj.tagName!="BODY"){obj=obj.parentNode}return obj};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.hdrBox.onscroll=function(){if(this._try_header_sync){return}this._try_header_sync=true;if(Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1){this.grid.objBox.scrollLeft=this.scrollLeft}this._try_header_sync=false};if((!_isOpera)||(_OperaRv>8.5)){this.hdr.onmousemove=function(e){this.grid.changeCursorState(e||window.event)};this.hdr.onmousedown=function(e){return this.grid.startColResize(e||window.event)}}this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(e){e=e||event;e.cancelBubble=true;this.firstChild.grid.setActive(true);window.dhx4.callEvent("_onGridClick",[e,this.firstChild.grid])};this.obj.onclick=function(e){if(this.grid._doClick(e||window.event)!==false){if(this.grid._sclE){this.grid.editCell(e||window.event)}else{this.grid.editStop()}}e=e||event;e.cancelBubble=true;window.dhx4.callEvent("_onGridClick",[e,this.grid])};if(_isMacOS){this.entBox.oncontextmenu=function(e){e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var that=this.grid;if(that._realfake){that=that._fake}return that._doContClick(e||window.event)}}else{this.entBox.onmousedown=function(e){return this.grid._doContClick(e||window.event)};this.entBox.oncontextmenu=function(e){if(this.grid._ctmndx){(e||event).cancelBubble=true}return !this.grid._ctmndx}}this.obj.ondblclick=function(e){if(!this.grid.wasDblClicked(e||window.event)){return false}if(this.grid._dclE){var row=this.grid.getFirstParentOfType((_isIE?event.srcElement:e.target),"TR");if(row==this.grid.row){this.grid.editCell(e||window.event)}}(e||event).cancelBubble=true;if(_isOpera){return false}};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;if(!document.body._dhtmlxgrid_onkeydown){dhtmlxEvent(document,"keydown",function(e){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(e||window.event)}});document.body._dhtmlxgrid_onkeydown=true}dhtmlxEvent(document.body,"click",function(){if(self.editStop){self.editStop()}if(self.isActive){self.setActive(false)}});if(this.entBox.style.height.toString().indexOf("%")!=-1){this._delta_y=this.entBox.style.height}if(this.entBox.style.width.toString().indexOf("%")!=-1){this._delta_x=this.entBox.style.width}if(this._delta_x||this._delta_y){this._setAutoResize()}this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;if(dhtmlx.image_path){this.setImagePath(dhtmlx.image_path)}if(dhtmlx.skin){this.setSkin(dhtmlx.skin)}return this}dhtmlXGridObject.prototype={getRowAttribute:function(b,a){return this.getRowById(b)._attrs[a]},setRowAttribute:function(c,a,b){this.getRowById(c)._attrs[a]=b},isTreeGrid:function(){return(this.cellType._dhx_find("tree")!=-1)},setRowHidden:function(h,c){var b=dhx4.s2b(c);var g=this.getRowById(h);if(!g){return}if(g.expand===""){this.collapseKids(g)}if((c)&&(g.style.display!="none")){g.style.display="none";var e=this.selectedRows._dhx_find(g);if(e!=-1){g.className=g.className.replace("rowselected","");for(var a=0;a<g.childNodes.length;a++){g.childNodes[a].className=g.childNodes[a].className.replace(/cellselected/g,"")}this.selectedRows._dhx_removeAt(e)}this.callEvent("onGridReconstructed",[])}if((!c)&&(g.style.display=="none")){g.style.display="";this.callEvent("onGridReconstructed",[])}this.callEvent("onRowHide",[h,c]);this.setSizes()},setColumnHidden:function(c,b){if(!this.hdr.rows.length){if(!this._ivizcol){this._ivizcol=[]}return this._ivizcol[c]=b}if((this.fldSorted)&&(this.fldSorted.cellIndex==c)&&(b)){this.sortImg.style.display="none"}var a=dhx4.s2b(b);if(a){if(!this._hrrar){this._hrrar=new Array()}else{if(this._hrrar[c]){return}}this._hrrar[c]="display:none;";this._hideShowColumn(c,"none")}else{if((!this._hrrar)||(!this._hrrar[c])){return}this._hrrar[c]="";this._hideShowColumn(c,"")}if((this.fldSorted)&&(this.fldSorted.cellIndex==c)&&(!b)){this.sortImg.style.display="inline"}this.setSortImgPos();this.callEvent("onColumnHidden",[c,b])},isColumnHidden:function(a){if((this._hrrar)&&(this._hrrar[a])){return true}return false},setColumnsVisibility:function(b){if(b){this._ivizcol=b.split(this.delim)}if(this.hdr.rows.length&&this._ivizcol){for(var a=0;a<this._ivizcol.length;a++){this.setColumnHidden(a,this._ivizcol[a])}}},_fixHiddenRowsAll:function(l,c,a,b,h){h=h||"_cellIndex";var k=l.rows.length;for(var g=0;g<k;g++){var m=l.rows[g].childNodes;if(m.length!=this._cCount){for(var e=0;e<m.length;e++){if(m[e][h]==c){m[e].style[a]=b;break}}}else{m[c].style[a]=b}}},_hideShowColumn:function(g,e){var a=g;if(this.hdr.rows[1]&&(this.hdr.rows[1]._childIndexes)&&(this.hdr.rows[1]._childIndexes[g]!=g)){a=this.hdr.rows[1]._childIndexes[g]}if(e=="none"){this.hdr.rows[0].cells[g]._oldWidth=this.hdr.rows[0].cells[g].style.width||(this.initCellWidth[g]+"px");this.hdr.rows[0].cells[g]._oldWidthP=this.cellWidthPC[g];this.obj.rows[0].cells[g].style.width="0px";var b={rows:[this.obj.rows[0]]};this.forEachRow(function(h){if(this.rowsAr[h].tagName=="TR"){b.rows.push(this.rowsAr[h])}});this._fixHiddenRowsAll(b,g,"display","none");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(g,"none")}if((_isOpera&&_OperaRv<9)||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,g,"display","none","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],g,"display","none")}this._fixHiddenRowsAll(this.hdr,g,"whiteSpace","nowrap","_cellIndexS");if(!this.cellWidthPX.length&&!this.cellWidthPC.length){this.cellWidthPX=[].concat(this.initCellWidth)}if(this.cellWidthPX[g]){this.cellWidthPX[g]=0}if(this.cellWidthPC[g]){this.cellWidthPC[g]=0}}else{if(this.hdr.rows[0].cells[g]._oldWidth){var c=this.hdr.rows[0].cells[g];if(_isOpera||_isKHTML||(_isFF)){this._fixHiddenRowsAll(this.hdr,g,"display","","_cellIndexS")}if(this.ftr){this._fixHiddenRowsAll(this.ftr.childNodes[0],g,"display","")}var b={rows:[this.obj.rows[0]]};this.forEachRow(function(h){if(this.rowsAr[h].tagName=="TR"){b.rows.push(this.rowsAr[h])}});this._fixHiddenRowsAll(b,g,"display","");if(this.isTreeGrid()){this._fixHiddenRowsAllTG(g,"")}this._fixHiddenRowsAll(this.hdr,g,"whiteSpace","normal","_cellIndexS");if(c._oldWidthP){this.cellWidthPC[g]=c._oldWidthP}if(c._oldWidth){this.cellWidthPX[g]=parseInt(c._oldWidth)}}}if(!e&&this._realfake){this.setColumnSizes(this.entBox.clientWidth)}this.setSizes();if((!_isIE)&&(!_isFF)){this.obj.border=1;this.obj.border=0}},enableColSpan:function(a){this._ecspn=dhx4.s2b(a)},enableRowsHover:function(b,a){this._unsetRowHover(false,true);this._hvrCss=a;if(dhx4.s2b(b)){if(!this._elmnh){this.obj._honmousemove=this.obj.onmousemove;this.obj.onmousemove=this._setRowHover;if(_isIE){this.obj.onmouseleave=this._unsetRowHover}else{this.obj.onmouseout=this._unsetRowHover}this._elmnh=true}}else{if(this._elmnh){this.obj.onmousemove=this.obj._honmousemove;if(_isIE){this.obj.onmouseleave=null}else{this.obj.onmouseout=null}this._elmnh=false}}},enableEditEvents:function(b,c,a){this._sclE=dhx4.s2b(b);this._dclE=dhx4.s2b(c);this._f2kE=dhx4.s2b(a)},enableLightMouseNavigation:function(a){if(dhx4.s2b(a)){if(!this._elmn){this.entBox._onclick=this.entBox.onclick;this.entBox.onclick=function(){return true};this.obj._onclick=this.obj.onclick;this.obj.onclick=function(b){var g=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(!g){return}this.grid.editStop();this.grid.doClick(g);this.grid.editCell();(b||event).cancelBubble=true};this.obj._onmousemove=this.obj.onmousemove;this.obj.onmousemove=this._autoMoveSelect;this._elmn=true}}else{if(this._elmn){this.entBox.onclick=this.entBox._onclick;this.obj.onclick=this.obj._onclick;this.obj.onmousemove=this.obj._onmousemove;this._elmn=false}}},_unsetRowHover:function(b,g){if(g){that=this}else{that=this.grid}if((that._lahRw)&&(that._lahRw!=g)){for(var a=0;a<that._lahRw.childNodes.length;a++){that._lahRw.childNodes[a].className=that._lahRw.childNodes[a].className.replace(that._hvrCss,"")}that._lahRw=null}},_setRowHover:function(b){var g=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(g&&g.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,g);g=g.parentNode;if(!g.idd||g.idd=="__filler__"){return}for(var a=0;a<g.childNodes.length;a++){g.childNodes[a].className+=" "+this.grid._hvrCss}this.grid._lahRw=g}this._honmousemove(b)},_autoMoveSelect:function(a){if(!this.grid.editor){var b=this.grid.getFirstParentOfType(a?a.target:event.srcElement,"TD");if(b.parentNode.idd){this.grid.doClick(b,true,0)}}this._onmousemove(a)},enableDistributedParsing:function(c,a,b){if(dhx4.s2b(c)){this._ads_count=a||10;this._ads_time=b||250}else{this._ads_count=0}},destructor:function(){this.editStop(true);if(this._sizeTime){this._sizeTime=window.clearTimeout(this._sizeTime)}this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs){for(var c=0;c<this.formInputs.length;c++){this.parentForm.removeChild(this.formInputs[c])}}var b;for(var c=0;c<this.rowsCol.length;c++){if(this.rowsCol[c]){this.rowsCol[c].grid=null}}for(c in this.rowsAr){if(this.rowsAr[c]){this.rowsAr[c]=null}}this.rowsCol=new dhtmlxArray();this.rowsAr={};this.entBox.innerHTML="";var e=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=e;this.setSizes=this._update_srnd_view=this.callEvent=e;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;if(this._fake){this.globalBox.innerHTML="";this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=e;this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=e}for(b in this){if((this[b])&&(this[b].m_obj)){this[b].m_obj=null}this[b]=null}if(this==globalActiveDHTMLGridObject){globalActiveDHTMLGridObject=null}return null},getSortingState:function(){var a=new Array();if(this.fldSorted){a[0]=this.fldSorted._cellIndex;a[1]=(this.sortImg.className=="dhxgrid_sort_desc"?"des":"asc")}return a},enableAutoHeight:function(c,b,a){this._ahgr=dhx4.s2b(c);this._ahgrF=dhx4.s2b(a);this._ahgrM=b||null;if(arguments.length==1){this.objBox.style.overflowY=c?"hidden":"auto"}if(b=="auto"){this._ahgrM=null;this._ahgrMA=true;this._setAutoResize()}},enableStableSorting:function(a){this._sst=dhx4.s2b(a);this.rowsCol.stablesort=function(h){var g=this.length-1;for(var e=0;e<this.length-1;e++){for(var c=0;c<g;c++){if(h(this[c],this[c+1])>0){var b=this[c];this[c]=this[c+1];this[c+1]=b}}g--}}},enableKeyboardSupport:function(a){this._htkebl=!dhx4.s2b(a)},enableContextMenu:function(a){this._ctmndx=a},setScrollbarWidthCorrection:function(a){},enableTooltips:function(b){this._enbTts=b.split(",");for(var a=0;a<this._enbTts.length;a++){this._enbTts[a]=dhx4.s2b(this._enbTts[a])}},enableResizing:function(b){this._drsclmn=b.split(",");for(var a=0;a<this._drsclmn.length;a++){this._drsclmn[a]=dhx4.s2b(this._drsclmn[a])}},setColumnMinWidth:function(a,b){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=new Array()}this._drsclmW[b]=a}else{this._drsclmW=a.split(",")}},enableCellIds:function(a){this._enbCid=dhx4.s2b(a)},lockRow:function(a,c){var b=this.getRowById(a);if(b){b._locked=dhx4.s2b(c);if((this.cell)&&(this.cell.parentNode.idd==a)){this.editStop()}}},_getRowArray:function(g){var e=new Array();for(var c=0;c<g.childNodes.length;c++){var b=this.cells3(g,c);e[c]=b.getValue()}return e},setDateFormat:function(b,a){this._dtmask=b;this._dtmask_inc=a},setNumberFormat:function(k,c,g,j){var e=k.replace(/[^0\,\.]*/g,"");var a=e.indexOf(".");if(a>-1){a=e.length-a-1}var b=e.indexOf(",");if(b>-1){b=e.length-a-2-b}if(typeof g!="string"){g=this.i18n.decimal_separator}if(typeof j!="string"){j=this.i18n.group_separator}var l=k.split(e)[0];var h=k.split(e)[1];this._maskArr[c]=[a,b,l,h,g,j]},_aplNFb:function(g,e){var b=this._maskArr[e];if(!b){return g}var c=parseFloat(g.toString().replace(/[^0-9]*/g,""));if(g.toString().substr(0,1)=="-"){c=c*-1}if(b[0]>0){c=c/Math.pow(10,b[0])}return c},_aplNF:function(h,g){var b=this._maskArr[g];if(!b){return h}var k=(parseFloat(h)<0?"-":"")+b[2];h=Math.abs(Math.round(parseFloat(h)*Math.pow(10,b[0]>0?b[0]:0))).toString();h=(h.length<b[0]?Math.pow(10,b[0]+1-h.length).toString().substr(1,b[0]+1)+h.toString():h).split("").reverse();h[b[0]]=(h[b[0]]||"0")+b[4];if(b[1]>0){for(var e=(b[0]>0?0:1)+b[0]+b[1];e<h.length;e+=b[1]){h[e]+=b[5]}}return k+h.reverse().join("")+b[3]},_launchCommands:function(a){for(var e=0;e<a.length;e++){var c=new Array();for(var b=0;b<a[e].childNodes.length;b++){if(a[e].childNodes[b].nodeType==1){c[c.length]=a[e].childNodes[b].firstChild.data}}this[a[e].getAttribute("command")].apply(this,c)}},_parseHead:function(g){var e=dhx4.ajax.xpath("./head",g);if(e.length){var h=dhx4.ajax.xpath("./column",e[0]);var k=dhx4.ajax.xpath("./settings",e[0]);var w="setInitWidths";var r=false;if(k[0]){for(var l=0;l<k[0].childNodes.length;l++){switch(k[0].childNodes[l].tagName){case"colwidth":if(k[0].childNodes[l].firstChild&&k[0].childNodes[l].firstChild.data=="%"){w="setInitWidthsP"}break;case"splitat":r=(k[0].childNodes[l].firstChild?k[0].childNodes[l].firstChild.data:false);break}}}this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",e[0]));if(h.length>0){if(this.hdr.rows.length>0){this.clearAll(true)}var a=[[],[],[],[],[],[],[],[],[]];var q=["","width","type","align","sort","color","format","hidden","id"];var o=["",w,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"];for(var v=0;v<h.length;v++){for(var u=1;u<q.length;u++){a[u].push(h[v].getAttribute(q[u]))}a[0].push((h[v].firstChild?h[v].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(a[0]);for(var v=0;v<o.length;v++){if(o[v]){this[o[v]](a[v].join(this.delim))}}for(var v=0;v<h.length;v++){if((this.cellType[v].indexOf("co")==0)||(this.cellType[v]=="clist")){var m=dhx4.ajax.xpath("./option",h[v]);if(m.length){var t=new Array();if(this.cellType[v]=="clist"){for(var u=0;u<m.length;u++){t[t.length]=m[u].firstChild?m[u].firstChild.data:""}this.registerCList(v,t)}else{var x=this.getCombo(v);for(var u=0;u<m.length;u++){x.put(m[u].getAttribute("value"),m[u].firstChild?m[u].firstChild.data:"")}}}}else{if(a[6][v]){if((this.cellType[v].toLowerCase().indexOf("calendar")!=-1)||(this.fldSort[v]=="date")){this.setDateFormat(a[6][v])}else{this.setNumberFormat(a[6][v],v)}}}}this.init();var c=a[7].join(this.delim);if(this.setColHidden&&c.replace(/,/g,"")!=""){this.setColHidden(c)}if((r)&&(this.splitAt)){this.splitAt(r)}}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",e[0]))}var b=dhx4.ajax.xpath("//rows/userdata",g);if(b.length>0){if(!this.UserData.gridglobaluserdata){this.UserData.gridglobaluserdata=new Hashtable()}for(var u=0;u<b.length;u++){var y="";for(var n=0;n<b[u].childNodes.length;n++){y+=b[u].childNodes[n].nodeValue}this.UserData.gridglobaluserdata.put(b[u].getAttribute("name"),y)}}},getCheckedRows:function(a){var b=new Array();this.forEachRowA(function(e){var c=this.cells(e,a);if(c.changeState&&c.getValue()!=0){b.push(e)}},true);return b.join(",")},checkAll:function(){var b=arguments.length?arguments[0]:1;for(var a=0;a<this.getColumnsNum();a++){if(this.getColType(a)=="ch"){this.setCheckedRows(a,b)}}},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(b,a){this.forEachRowA(function(c){if(this.cells(c,b).isCheckbox()){this.cells(c,b).setValue(a)}})},_drawTooltip:function(h){var j=this.grid.getFirstParentOfType(h?h.target:event.srcElement,"TD");if(!j||((this.grid.editor)&&(this.grid.editor.cell==j))){return true}var g=j.parentNode;if(!g.idd||g.idd=="__filler__"){return}var b=(h?h.target:event.srcElement);if(g.idd==window.unknown){return true}if(!this.grid.callEvent("onMouseOver",[g.idd,j._cellIndex,(h||window.event)])){return true}if((this.grid._enbTts)&&(!this.grid._enbTts[j._cellIndex])){if(b.title){b.title=""}return true}if(j._cellIndex>=this.grid._cCount){return}var a=this.grid.cells3(g,j._cellIndex);if(!a||!a.cell||!a.cell._attrs){return}if(b._title){a.cell.title=""}if(!a.cell._attrs.title){b._title=true}if(a){b.title=a.cell._attrs.title||(a.getTitle?a.getTitle():(a.getValue()||"").toString().replace(/<[^>]*>/gi,""))}return true},enableCellWidthCorrection:function(a){if(_isFF){this._wcorr=parseInt(a)}},getAllRowIds:function(c){var a=[];for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){a.push(this.rowsBuffer[b].idd)}}return a.join(c||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(b,t,e){if(!this._ecspn){return}var a=this.getRowById(b);if((a._childIndexes)&&(a.childNodes[a._childIndexes[t]])){var k=a._childIndexes[t];var g=a.childNodes[k];var h=g.colSpan;g.colSpan=1;if((h)&&(h!=1)){for(var o=1;o<h;o++){var s=document.createElement("TD");if(g.nextSibling){a.insertBefore(s,g.nextSibling)}else{a.appendChild(s)}a._childIndexes[t+o]=k+o;s._cellIndex=t+o;s.style.textAlign=this.cellAlign[o];s.style.verticalAlign=this.cellVAlign[o];g=s;this.cells3(a,t+o).setValue("")}}for(var q=t*1+1*h;q<a._childIndexes.length;q++){a._childIndexes[q]+=(h-1)*1}}if((e)&&(e>1)){if(a._childIndexes){var k=a._childIndexes[t]}else{var k=t;a._childIndexes=new Array();for(var q=0;q<a.childNodes.length;q++){a._childIndexes[q]=q}}a.childNodes[k].colSpan=e;for(var q=1;q<e;q++){a._childIndexes[a.childNodes[k+1]._cellIndex]=k;a.removeChild(a.childNodes[k+1])}var l=a.childNodes[a._childIndexes[t]]._cellIndex;for(var q=l*1+1*e;q<a._childIndexes.length;q++){a._childIndexes[q]-=(e-1)}}},preventIECaching:function(a){dhx4.ajax.cache=!a},enableColumnAutoSize:function(a){this._eCAS=dhx4.s2b(a)},_onHeaderDblClick:function(c){var b=this.grid;var a=b.getFirstParentOfType(_isIE?event.srcElement:c.target,"TD");if(!b._eCAS){return false}b.adjustColumnSize(a._cellIndexS)},adjustColumnSize:function(n,c){if(this._hrrar&&this._hrrar[n]){return}this._notresize=true;var e=0;this._setColumnSizeR(n,20);for(var h=1;h<this.hdr.rows.length;h++){var r=this.hdr.rows[h];r=r.childNodes[(r._childIndexes)?r._childIndexes[n]:n];if((r)&&((!r.colSpan)||(r.colSpan<2))&&r._cellIndex==n){if((r.childNodes[0])&&(r.childNodes[0].className=="hdrcell")){r=r.childNodes[0]}e=Math.max(e,r.scrollWidth)}}var g=this.obj.rows.length;var q=0;var t=this.cellType._dhx_find("tree");var o=document.createElement("DIV");o.className="dhx_grid_adjust";o.style.cssText="width:auto;height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;";document.body.appendChild(o);for(var k=1;k<g;k++){var s=this.obj.rows[k];var b=n;if(!this.rowsAr[s.idd]){continue}if(s._childIndexes){if(s._childIndexes[n]==s._childIndexes[n+1]){continue}b=s._childIndexes[n]}if(!s.childNodes[b]||s.childNodes[b]._cellIndex!=n){continue}o.innerHTML=(s.childNodes[b].innerText||s.childNodes[b].textContent||"");q=o.offsetWidth;if(this._h2&&n==t){q+=this._h2.get[s.idd].level*22}if(q>e){e=q}}document.body.removeChild(o);e+=20+(c||0);this._setColumnSizeR(n,e);this._notresize=false;this.setSizes()},detachHeader:function(a,c){c=c||this.hdr;var b=c.rows[a+1];if(b){b.parentNode.removeChild(b)}this.setSizes()},detachFooter:function(a){this.detachHeader(a,this.ftr)},attachHeader:function(a,e,b){if(typeof(a)=="string"){a=this._eSplit(a)}if(typeof(e)=="string"){e=e.split(this.delim)}b=b||"_aHead";if(this.hdr.rows.length){if(a){this._createHRow([a,e],this[(b=="_aHead")?"hdr":"ftr"])}else{if(this[b]){for(var c=0;c<this[b].length;c++){this.attachHeader.apply(this,this[b][c])}}}}else{if(!this[b]){this[b]=new Array()}this[b][this[b].length]=[a,e,b]}},_createHRow:function(c,n){if(!n){if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative"}var k=document.createElement("DIV");k.className="c_ftr".substr(2);this.entBox.appendChild(k);var r=document.createElement("TABLE");r.cellPadding=r.cellSpacing=0;if(!_isIE||_isIE==8){r.width="100%";r.style.paddingRight="20px"}r.style.marginRight="20px";r.style.tableLayout="fixed";k.appendChild(r);r.appendChild(document.createElement("TBODY"));this.ftr=n=r;var h=r.insertRow(0);var a=((this.hdrLabels.length<=1)?c[0].length:this.hdrLabels.length);for(var e=0;e<a;e++){h.appendChild(document.createElement("TH"));h.childNodes[e]._cellIndex=e}if(_isIE&&_isIE<8){h.style.position="absolute"}else{h.style.height="auto"}}var g=c[1];var k=document.createElement("TR");n.rows[0].parentNode.appendChild(k);for(var e=0;e<c[0].length;e++){if(c[0][e]=="#cspan"){var l=k.cells[k.cells.length-1];l.colSpan=(l.colSpan||1)+1;continue}if((c[0][e]=="#rspan")&&(n.rows.length>1)){var u=n.rows.length-2;var s=false;var l=null;while(!s){var l=n.rows[u];for(var b=0;b<l.cells.length;b++){if(l.cells[b]._cellIndex==e){s=b+1;break}}u--}l=l.cells[s-1];l.rowSpan=(l.rowSpan||1)+1;continue}var m=document.createElement("TD");m._cellIndex=m._cellIndexS=e;if(this._hrrar&&this._hrrar[e]&&!_isIE){m.style.display="none"}if(typeof c[0][e]=="object"){m.appendChild(c[0][e])}else{if(this.forceDivInHeader){m.innerHTML="<div class='hdrcell'>"+(c[0][e]||"&nbsp;")+"</div>"}else{m.innerHTML=(c[0][e]||"&nbsp;")}if((c[0][e]||"").indexOf("#")!=-1){var r=c[0][e].match(/(^|{)#([^}]+)(}|$)/);if(r){var o="_in_header_"+r[2];if(this[o]){this[o]((this.forceDivInHeader?m.firstChild:m),e,c[0][e].split(r[0]))}}}}if(g){m.style.cssText=g[e]}k.appendChild(m)}var q=n;if(_isKHTML){if(n._kTimer){window.clearTimeout(n._kTimer)}n._kTimer=window.setTimeout(function(){n.rows[1].style.display="none";window.setTimeout(function(){n.rows[1].style.display=""},1)},500)}},attachFooter:function(a,b){this.attachHeader(a,b,"_aFoot")},setCellExcellType:function(c,a,b){this.changeCellType(this.getRowById(c),a,b)},getCellExcellType:function(b,a){var e=this.getRowById(b);var c=this.cells3(e,a);return c.cell._cellType||this.cellType[a]},changeCellType:function(c,e,b){b=b||this.cellType[e];var g=this.cells3(c,e);var a=g.getValue();g.cell._cellType=b;var g=this.cells3(c,e);g.setValue(a)},setRowExcellType:function(c,b){var e=this.rowsAr[c];for(var a=0;a<e.childNodes.length;a++){this.changeCellType(e,a,b)}},setColumnExcellType:function(a,c){for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]&&this.rowsBuffer[b].tagName=="TR"){this.changeCellType(this.rowsBuffer[b],a,c)}}if(this.cellType[a]=="math"){this._strangeParams[b]=c}else{this.cellType[a]=c}},forEachRow:function(c){for(var b in this.rowsAr){if(this.rowsAr[b]&&this.rowsAr[b].idd){c.apply(this,[this.rowsAr[b].idd])}}},forEachRowA:function(c){for(var b=0;b<this.rowsBuffer.length;b++){if(this.rowsBuffer[b]){c.call(this,this.render_row(b).idd)}}},forEachCell:function(c,b){var e=this.getRowById(c);if(!e){return}for(var a=0;a<this._cCount;a++){b(this.cells3(e,a),a)}},enableAutoWidth:function(c,a,b){this._awdth=[dhx4.s2b(c),parseInt(a||99999),parseInt(b||0)];if(arguments.length==1){this.objBox.style.overflowX=c?"hidden":"auto"}},updateFromXML:function(a,e,b,c){if(typeof e=="undefined"){e=true}this._refresh_mode=[true,e,b];this.load(a,c)},_refreshFromXML:function(e){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(q){var o=this.grid._h2.get[this.cell.parentNode.idd];if(o&&this.cell.parentNode.valTag){this.setLabel(q)}else{this.setValueX(q)}}}var n=this.cellType._dhx_find("tree");var h=dhx4.ajax.xmltop("rows",e);var g=h.getAttribute("parent")||0;var k={};if(this._refresh_mode[2]){if(n!=-1){this._h2.forEachChild(g,function(o){k[o.id]=true},this)}else{this.forEachRow(function(o){k[o]=true})}}var m=dhx4.ajax.xpath("//row",h);for(var c=0;c<m.length;c++){var l=m[c];var a=l.getAttribute("id");k[a]=false;var g=l.parentNode.getAttribute("id")||g;if(this.rowsAr[a]&&this.rowsAr[a].tagName!="TR"){if(this._h2){this._h2.get[a].buff.data=l}else{this.rowsBuffer[this.getRowIndex(a)].data=l}this.rowsAr[a]=l}else{if(this.rowsAr[a]){this._process_xml_row(this.rowsAr[a],l,-1);this._postRowProcessing(this.rowsAr[a],true);if(this._fake&&this._fake.rowsAr[a]){this._fake._process_xml_row(this._fake.rowsAr[a],l,-1)}}else{if(this._refresh_mode[1]){var j={idd:a,data:l,_parser:this._process_xml_row,_locator:this._get_xml_data};var b=this.rowsBuffer.length;if(this._refresh_mode[1]=="top"){this.rowsBuffer.unshift(j);b=0}else{this.rowsBuffer.push(j)}if(this._h2){reset=true;(this._h2.add(a,(l.parentNode.getAttribute("id")||l.parentNode.getAttribute("parent")))).buff=this.rowsBuffer[this.rowsBuffer.length-1]}else{if(this._srnd){reset=true}}this.rowsAr[a]=l;l=this.render_row(b);this._insertRowAt(l,b?-1:0)}}}}if(this._refresh_mode[2]){for(a in k){if(k[a]&&this.rowsAr[a]){this.deleteRow(a)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){if(this._h2){this._renderSort()}else{this.render_dataset()}}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},getCustomCombo:function(c,b){var a=this.cells(c,b).cell;if(!a._combo){a._combo=new dhtmlXGridComboObject()}return a._combo},setTabOrder:function(b){var e=b.split(this.delim);this._tabOrder=[];var a=this._cCount||b.length;for(var c=0;c<a;c++){e[c]={c:parseInt(e[c]),ind:c}}e.sort(function(h,g){return(h.c>g.c?1:-1)});for(var c=0;c<a;c++){if(!e[c+1]||(typeof e[c].c=="undefined")){this._tabOrder[e[c].ind]=(e[0].ind+1)*-1}else{this._tabOrder[e[c].ind]=e[c+1].ind}}},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a+1],this.cell._cellIndex,true)},k13_0_1:function(){var a=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[a-1],this.cell._cellIndex,true)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[(this.row?this.row.idd:null),(this.cell?this.cell._cellIndex:null)]);this._still_active=true},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[true])){return true}var a=this._getNextCell(null,1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[false])){return false}var a=this._getNextCell(null,-1);if(a){this.selectCell(a.parentNode,a._cellIndex,(this.row!=a.parentNode),false,true);this._still_active=true}},k113_0_0:function(){if(this._f2kE){this.editCell()}},k32_0_0:function(){var a=this.cells4(this.cell);if(!a.changeState||(a.changeState()===false)){return false}},k27_0_0:function(){this.editStop(true)},k33_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage-1)}else{this.scrollPage(-1)}},k34_0_0:function(){if(this.pagingOn){this.changePage(this.currentPage+1)}else{this.scrollPage(1)}},k37_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.collapseKids(this.row)}else{return false}},k39_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{return false}},k40_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(!this.row.idd){return}var a=Math.max((b._r_select||0),this.getRowIndex(this.row.idd));var c=this._nextRow(a,1);if(c){b._r_select=null;this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn){b.showRow(c.idd)}}else{if(!this.callEvent("onLastRow",[])){return false}this._key_events.k34_0_0.apply(this,[]);if(this.pagingOn&&this.rowsCol[a+1]){this.selectCell(a+1,0,true)}}}this._still_active=true},k38_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(!this.row.idd){return}var a=this.getRowIndex(this.row.idd)+1;if(a!=-1&&(!this.pagingOn||(a!=1))){var c=this._nextRow(a-1,-1);this.selectCell(c,this.cell._cellIndex,true);if(b.pagingOn&&c){b.showRow(c.idd)}}else{this._key_events.k33_0_0.apply(this,[])}}this._still_active=true}},_build_master_row:function(){var c=document.createElement("DIV");var b=["<table><tr>"];for(var a=0;a<this._cCount;a++){b.push("<td></td>")}b.push("</tr></table>");c.innerHTML=b.join("");this._master_row=c.firstChild.rows[0]},_prepareRow:function(a){if(!this._master_row){this._build_master_row()}var c=this._master_row.cloneNode(true);for(var b=0;b<c.childNodes.length;b++){c.childNodes[b]._cellIndex=b;if(this._enbCid){c.childNodes[b].id="c_"+a+"_"+b}if(this.dragAndDropOff){this.dragger.addDraggableItem(c.childNodes[b],this)}}c.idd=a;c.grid=this;return c},_process_jsarray_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,(this._c_order?this._swapColumns(c):c));return b},_get_jsarray_data:function(b,a){return b[a]},_process_json_row:function(a,b){b=this._c_order?this._swapColumns(b.data):b.data;return this._process_some_row(a,b)},_process_some_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,c);return b},_get_json_data:function(b,a){return b.data[a]},_process_js_row:function(c,e){var a=[];for(var b=0;b<this.columnIds.length;b++){a[b]=e[this.columnIds[b]];if(!a[b]&&a[b]!==0){a[b]=""}}this._process_some_row(c,a);c._attrs=e;return c},_get_js_data:function(b,a){return b[this.columnIds[a]]},_process_csv_row:function(b,c){b._attrs={};for(var a=0;a<b.childNodes.length;a++){b.childNodes[a]._attrs={}}this._fillRow(b,(this._c_order?this._swapColumns(c.split(this.csv.cell)):c.split(this.csv.cell)));return b},_get_csv_data:function(b,a){return b.split(this.csv.cell)[a]},_process_store_row:function(g,e){var a=[];for(var c=0;c<this.columnIds.length;c++){a[c]=e[this.columnIds[c]]}for(var b=0;b<g.childNodes.length;b++){g.childNodes[b]._attrs={}}g._attrs=e;this._fillRow(g,a)},_process_xml_row:function(a,h){var o=dhx4.ajax.xpath(this.xml.cell,h);var m=[];a._attrs=this._xml_attrs(h);if(this._ud_enabled){var n=dhx4.ajax.xpath("./userdata",h);for(var g=n.length-1;g>=0;g--){var l="";for(var c=0;c<n[g].childNodes.length;c++){l+=n[g].childNodes[c].nodeValue}this.setUserData(a.idd,n[g].getAttribute("name"),l)}}for(var c=0;c<o.length;c++){var e=o[this._c_order?this._c_order[c]:c];if(!e){continue}var b=a._childIndexes?a._childIndexes[c]:c;var k=e.getAttribute("type");if(a.childNodes[b]){if(k){a.childNodes[b]._cellType=k}a.childNodes[b]._attrs=this._xml_attrs(e)}if(!e.getAttribute("xmlcontent")){if(e.firstChild){e=e.firstChild.wholeText||e.firstChild.data}else{e=""}}m.push(e)}for(c<o.length;c<a.childNodes.length;c++){a.childNodes[c]._attrs={}}if(a.parentNode&&a.parentNode.tagName=="row"){a._attrs.parent=a.parentNode.getAttribute("idd")}this._fillRow(a,m);return a},_get_xml_data:function(b,a){b=b.firstChild;while(true){if(!b){return""}if(b.tagName=="cell"){a--}if(a<0){break}b=b.nextSibling}return(b.firstChild?b.firstChild.data:"")},_fillRow:function(e,h){if(this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==e.idd){this.editStop()}for(var b=0;b<e.childNodes.length;b++){if((b<h.length)||(this.defVal[b])){var c=e.childNodes[b]._cellIndex;var g=h[c];var a=this.cells4(e.childNodes[b]);if((this.defVal[c])&&((g=="")||(typeof(g)=="undefined"))){g=this.defVal[c]}if(a){a.setValue(g)}}else{e.childNodes[b].innerHTML="&nbsp;";e.childNodes[b]._clearCell=true}}return e},_postRowProcessing:function(h,k){if(h._attrs["class"]){h._css=h.className=h._attrs["class"]}if(h._attrs.locked){h._locked=true}if(h._attrs.bgColor){h.bgColor=h._attrs.bgColor}var j=0;for(var b=0;b<h.childNodes.length;b++){var l=h.childNodes[b];var g=l._cellIndex;var e=l._attrs.style||h._attrs.style;if(e){l.style.cssText+=";"+e}if(l._attrs["class"]){l.className=l._attrs["class"]}e=l._attrs.align||this.cellAlign[g];if(e){l.align=e}l.vAlign=l._attrs.valign||this.cellVAlign[g];var a=l._attrs.bgColor||this.columnColor[g];if(a){l.bgColor=a}if(l._attrs.colspan&&!k){this.setColspan(h.idd,b+j,l._attrs.colspan);j+=(l._attrs.colspan-1)}if(this._hrrar&&this._hrrar[g]&&!k){l.style.display="none"}}this.callEvent("onRowCreated",[h.idd,h,null])},load:function(a,c,b){this.callEvent("onXLS",[this]);if(arguments.length==2&&typeof c!="function"){b=c;c=null}this._last_load_type=b=b||this._last_load_type||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=a}this._data_type=b;this.xmlLoader=this.doLoadDetails;var e=this;this.xmlLoader=function(g){if(!e.callEvent){return}e["_process_"+b](g.xmlDoc);if(!e._contextCallTimer){e.callEvent("onXLE",[e,0,0,g.xmlDoc,b])}if(c){c();c=null}};return dhx4.ajax.get(a,this.xmlLoader)},loadXMLString:function(b,a){if(window.console&&window.console.info){window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.parse({responseXML:dhx4.ajax.parse(b)},a,"xml")},loadXML:function(a,b){if(window.console&&window.console.info){window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44")}this.load(a,b,"xml")},parse:function(c,b,a){if(arguments.length==2&&typeof b!="function"){a=b;b=null}this._last_load_type=a=a||this._last_load_type||"xml";this._data_type=a;if(a=="xml"&&typeof c=="string"){c={responseXML:dhx4.ajax.parse(c)}}this["_process_"+a](c);if(!this._contextCallTimer){this.callEvent("onXLE",[this,0,0,c,a])}if(b){b()}},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(b){var c={};if(b.attributes.length){for(var a=0;a<b.attributes.length;a++){c[b.attributes[a].name]=b.attributes[a].value}}return c},_process_xml:function(m){if(this._refresh_mode){return this._refreshFromXML(m)}this._parsing=true;var j=dhx4.ajax.xmltop(this.xml.top,m);if(j.tagName!=this.xml.top){return}var l=j.getAttribute("dhx_security");if(l){dhtmlx.security_key=l}this._parseHead(j);var n=dhx4.ajax.xpath(this.xml.row,j);var g=parseInt(j.getAttribute("pos")||0);var k=parseInt(j.getAttribute("total_count")||0);if(!this.pagingOn){var k=Math.min(k,32000000/this._srdh)}var e=false;if(k&&k!=this.rowsBuffer.length){if(!this.rowsBuffer[k-1]){if(this.rowsBuffer.length){e=true}this.rowsBuffer[k-1]=null}if(k<this.rowsBuffer.length){this.rowsBuffer.splice(k,this.rowsBuffer.length-k);e=true}}if(this.isTreeGrid()){return this._process_tree_xml(j)}for(var b=0;b<n.length;b++){if(this.rowsBuffer[b+g]){continue}var a=n[b].getAttribute("id")||(b+g+1);this.rowsBuffer[b+g]={idd:a,data:n[b],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[a]=n[b]}this.callEvent("onDataReady",[]);if(e&&this._srnd){var c=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=c}else{this.render_dataset()}this._parsing=false},_process_jsarray:function(data){this._parsing=true;data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[id]=data[i]}this.render_dataset();this._parsing=false},_process_csv:function(e){this._parsing=true;e=e.responseText||e;e=e.replace(/\r/g,"");e=e.split(this.csv.row);if(this._csvHdr){this.clearAll();var c=e.splice(0,1)[0].split(this.csv.cell);if(!this._csvAID){c.splice(0,1)}this.setHeader(c.join(this.delim));this.init()}for(var b=0;b<e.length;b++){if(!e[b]&&b==e.length-1){continue}if(this._csvAID){var g=b+1;this.rowsBuffer.push({idd:g,data:e[b],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var a=e[b].split(this.csv.cell);var g=a.splice(0,1)[0];this.rowsBuffer.push({idd:g,data:a,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[g]=e[b]}this.render_dataset();this._parsing=false},_process_js:function(a){return this._process_json(a,"js")},_process_json:function(data,mode){this._parsing=true;var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){var row=data[i];var id=row.id||(i+1);this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[id]=data[i]}}else{if(data.rows){for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data});this.rowsAr[id]=data.rows[i]}}}if(data.dhx_security){dhtmlx.security_key=data.dhx_security}this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=false},render_dataset:function(e,l){if(this._srnd){if(this._fillers){return this._update_srnd_view()}l=Math.min((this._get_view_size()+(this._srnd_pr||0)),this.rowsBuffer.length)}if(this.pagingOn){e=Math.max((e||0),(this.currentPage-1)*this.rowsBufferOutSize);l=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)}else{e=e||0;l=l||this.rowsBuffer.length}for(var g=e;g<l;g++){var a=this.render_row(g);if(a==-1){if(this.xmlFileUrl){if(this.callEvent("onDynXLS",[g,(this._dpref?this._dpref:(l-g))])){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+g+"&count="+(this._dpref?this._dpref:(l-g)),this._data_type)}}l=g;break}if(!a.parentNode||!a.parentNode.tagName){this._insertRowAt(a,g);if(a._attrs.selected||a._attrs.select){this.selectRow(a,a._attrs.call?true:false,true);a._attrs.selected=a._attrs.select=null}}if(this._ads_count&&g-e==this._ads_count){var k=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){k._contextCallTimer=null;k.render_dataset(g,l);if(!k._contextCallTimer){if(k._context_parsing){k.callEvent("onXLE",[])}else{k._fixAlterCss()}k._context_parsing=false}},this._ads_time)}}if(this._ads_count&&g==l){this.callEvent("onDistributedEnd",[])}if(this._srnd&&!this._fillers){var b=this.rowsBuffer.length-l;this._fillers=[];if(this._fake&&!this._realfake){this._fake._fillers=[]}var c=Math.round(990000/this._srdh);while(b>0){var h=(_isIE||window._FFrv)?Math.min(b,c):b;var j=this._add_filler(l,h);if(j){this._fillers.push(j)}b-=h;l+=h}}this.setSizes()},render_row:function(b){if(!this.rowsBuffer[b]){return -1}if(this.rowsBuffer[b]._parser){var a=this.rowsBuffer[b];if(this.rowsAr[a.idd]&&this.rowsAr[a.idd].tagName=="TR"){return this.rowsBuffer[b]=this.rowsAr[a.idd]}var c=this._prepareRow(a.idd);this.rowsBuffer[b]=c;this.rowsAr[a.idd]=c;a._parser.call(this,c,a.data);this._postRowProcessing(c);return c}return this.rowsBuffer[b]},_get_cell_value:function(b,a,c){if(b._locator){if(this._c_order){a=this._c_order[a]}return b._locator.call(this,b.data,a)}return this.cells3(b,a)[c?c:"getValue"]()},sortRows:function(c,h,b){this.editStop();b=(b||"asc").toLowerCase();h=(h||this.fldSort[c]);c=c||0;if(this.isTreeGrid()){this.sortTreeRows(c,h,b)}else{var a={};var g=this.cellType[c];var j="getValue";if(g=="link"){j="getContent"}if(g=="dhxCalendar"||g=="dhxCalendarA"){j="getDate"}if(g=="co"||g=="coro"){j="getText"}for(var e=0;e<this.rowsBuffer.length;e++){a[this.rowsBuffer[e].idd]=this._get_cell_value(this.rowsBuffer[e],c,j)}this._sortRows(c,h,b,a)}this.callEvent("onAfterSorting",[c,h,b])},_sortCore:function(c,h,b,a,g){var e="sort";if(this._sst){g.stablesort=this.rowsCol.stablesort;e="stablesort"}if(h.length>4){h=window[h]}if(h=="cus"){var j=this._customSorts[c];g[e](function(l,k){return j(a[l.idd],a[k.idd],b,l.idd,k.idd)})}else{if(typeof(h)=="function"){g[e](function(l,k){return h(a[l.idd],a[k.idd],b,l.idd,k.idd)})}else{if(h=="str"){g[e](function(l,k){if(b=="asc"){return a[l.idd]>a[k.idd]?1:(a[l.idd]<a[k.idd]?-1:0)}else{return a[l.idd]<a[k.idd]?1:(a[l.idd]>a[k.idd]?-1:0)}})}else{if(h=="int"){g[e](function(m,l){var k=parseFloat(a[m.idd]);k=isNaN(k)?-99999999999999:k;var n=parseFloat(a[l.idd]);n=isNaN(n)?-99999999999999:n;if(b=="asc"){return k-n}else{return n-k}})}else{if(h=="date"){g[e](function(m,l){var k=Date.parse(a[m.idd])||(Date.parse("01/01/1900"));var n=Date.parse(a[l.idd])||(Date.parse("01/01/1900"));if(b=="asc"){return k-n}else{return n-k}})}}}}}},_sortRows:function(c,e,b,a){this._sortCore(c,e,b,a,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(c){if(!this.obj.rows[0]){return}if(this._lahRw){this._unsetRowHover(0,true)}this.callEvent("onResetView",[]);var a=this.obj.rows[0].parentNode;var e=a.removeChild(a.childNodes[0],true);if(_isKHTML){for(var b=a.parentNode.childNodes.length-1;b>=0;b--){if(a.parentNode.childNodes[b].tagName=="TR"){a.parentNode.removeChild(a.parentNode.childNodes[b],true)}}}else{if(_isIE){for(var b=a.childNodes.length-1;b>=0;b--){a.childNodes[b].removeNode(true)}}else{a.innerHTML=""}}a.appendChild(e);this.rowsCol=dhtmlxArray();if(this._sst){this.enableStableSorting(true)}this._fillers=this.undefined;if(!c){if(_isIE&&this._srnd){this.render_dataset()}else{this.render_dataset()}}},deleteRow:function(b,e){if(!e){e=this.getRowById(b)}if(!e){return}this.editStop();if(!this._realfake){if(this.callEvent("onBeforeRowDeleted",[b])==false){return false}}var a=0;if(this.cellType._dhx_find("tree")!=-1&&!this._realfake){a=this._h2.get[b].parent.id;this._removeTrGrRow(e)}else{if(e.parentNode){e.parentNode.removeChild(e)}var h=this.rowsCol._dhx_find(e);if(h!=-1){this.rowsCol._dhx_removeAt(h)}for(var c=0;c<this.rowsBuffer.length;c++){if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==b){this.rowsBuffer._dhx_removeAt(c);h=c;break}}}this.rowsAr[b]=null;for(var c=0;c<this.selectedRows.length;c++){if(this.selectedRows[c].idd==b){this.selectedRows._dhx_removeAt(c)}}if(this._srnd){for(var c=0;c<this._fillers.length;c++){var g=this._fillers[c];if(!g){continue}if(g[0]>=h){this._update_fillers(c,0,-1)}else{if(g[0]+g[1]>h){this._update_fillers(c,-1,0)}}}this._update_srnd_view()}if(this.pagingOn){this.changePage()}if(!this._realfake){this.callEvent("onAfterRowDeleted",[b,a])}this.callEvent("onGridReconstructed",[]);if(this._ahgr){this.setSizes()}return true},_addRow:function(h,k,b){if(b==-1||typeof b=="undefined"){b=this.rowsBuffer.length}if(typeof k=="string"){k=k.split(this.delim)}var l=this._prepareRow(h);l._attrs={};for(var c=0;c<l.childNodes.length;c++){l.childNodes[c]._attrs={}}this.rowsAr[l.idd]=l;if(this._h2){this._h2.get[l.idd].buff=l}this._fillRow(l,k);this._postRowProcessing(l);if(this._skipInsert){this._skipInsert=false;return this.rowsAr[l.idd]=l}if(this.pagingOn){this.rowsBuffer._dhx_insertAt(b,l);this.rowsAr[l.idd]=l;return l}if(this._fillers){this.rowsCol._dhx_insertAt(b,null);this.rowsBuffer._dhx_insertAt(b,l);if(this._fake){this._fake.rowsCol._dhx_insertAt(b,null)}this.rowsAr[l.idd]=l;var m=false;for(var e=0;e<this._fillers.length;e++){var g=this._fillers[e];if(g&&g[0]<=b&&(g[0]+g[1])>=b){g[1]=g[1]+1;var a=g[2].firstChild.style.height=parseInt(g[2].firstChild.style.height)+this._srdh+"px";m=true;if(this._fake){this._fake._fillers[e][1]++;this._fake._fillers[e][2].firstChild.style.height=a}}if(g&&g[0]>b){g[0]=g[0]+1;if(this._fake){this._fake._fillers[e][0]++}}}if(!m){this._fillers.push(this._add_filler(b,1,(b==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:(this.rowsCol[1])}:this.rowsCol[b-1])))}return l}this.rowsBuffer._dhx_insertAt(b,l);return this._insertRowAt(l,b)},addRow:function(a,e,c){var b=this._addRow(a,e,c);if(!this.dragContext){this.callEvent("onRowAdded",[a])}if(this.pagingOn){this.changePage(this.currentPage)}if(this._srnd){this._update_srnd_view()}b._added=true;if(this._srnd&&!this._fillers){this._fillers=[]}if(this._ahgr){this.setSizes()}this.callEvent("onGridReconstructed",[]);return b},_insertRowAt:function(c,e,b){this.rowsAr[c.idd]=c;if(this._skipInsert){this._skipInsert=false;return c}if((e<0)||((!e)&&(parseInt(e)!==0))){e=this.rowsCol.length}else{if(e>this.rowsCol.length){e=this.rowsCol.length}}if(this._cssEven){var a=c.className.replace(this._cssUnEven,"");if((this._cssSP?this.getLevel(c.idd):e)%2==1){c.className=a+" "+this._cssUnEven+(this._cssSU?(" "+this._cssUnEven+"_"+this.getLevel(c.idd)):"")}else{c.className=a+" "+this._cssEven+(this._cssSU?(" "+this._cssEven+"_"+this.getLevel(c.idd)):"")}}if(!b){if((e==(this.obj.rows.length-1))||(!this.rowsCol[e])){if(_isKHTML){this.obj.appendChild(c)}else{this.obj.firstChild.appendChild(c)}}else{this.rowsCol[e].parentNode.insertBefore(c,this.rowsCol[e])}}this.rowsCol._dhx_insertAt(e,c);this.callEvent("onRowInserted",[c,e]);return c},getRowById:function(c){var b=this.rowsAr[c];if(b){if(b.tagName!="TR"){for(var a=0;a<this.rowsBuffer.length;a++){if(this.rowsBuffer[a]&&this.rowsBuffer[a].idd==c){return this.render_row(a)}}if(this._h2){return this.render_row(null,b.idd)}}return b}return null},cellById:function(b,a){return this.cells(b,a)},cells:function(e,b){if(arguments.length==0){return this.cells4(this.cell)}else{var g=this.getRowById(e)}var a=(g._childIndexes?g.childNodes[g._childIndexes[b]]:g.childNodes[b]);if(!a&&g._childIndexes){a=g.firstChild||{}}return this.cells4(a)},cellByIndex:function(b,a){return this.cells2(b,a)},cells2:function(e,b){var g=this.render_row(e);var a=(g._childIndexes?g.childNodes[g._childIndexes[b]]:g.childNodes[b]);if(!a&&g._childIndexes){a=g.firstChild||{}}return this.cells4(a)},cells3:function(c,b){var a=(c._childIndexes?c.childNodes[c._childIndexes[b]]:c.childNodes[b]);return this.cells4(a)},cells4:function(a){var b=window["eXcell_"+(a._cellType||this.cellType[a._cellIndex])];if(b){return new b(a)}},cells5:function(a,c){var c=c||(a._cellType||this.cellType[a._cellIndex]);if(!this._ecache[c]){if(!window["eXcell_"+c]){var b=eXcell_ro}else{var b=window["eXcell_"+c]}this._ecache[c]=new b(a)}this._ecache[c].cell=a;return this._ecache[c]},dma:function(a){if(!this._ecache){this._ecache={}}if(a&&!this._dma){this._dma=this.cells4;this.cells4=this.cells5}else{if(!a&&this._dma){this.cells4=this._dma;this._dma=null}}},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(a){if(arguments.length>0){this.smartTabOrder=dhx4.s2b(a)}else{this.smartTabOrder=true}},setExternalTabOrder:function(g,a){var b=this;this.tabStart=(typeof(g)=="object")?g:document.getElementById(g);var c=this.tabStart.onkeydown;this.tabStart.onkeydown=function(j){if(c){c.call(this,j)}var h=(j||window.event);if(h.keyCode==9&&!h.shiftKey){h.cancelBubble=true;b.selectCell(0,0,0,0,1);if(b.smartTabOrder&&b.cells2(0,0).isDisabled()){b._key_events.k9_0_0.call(b)}this.blur();return false}};if(_isOpera){this.tabStart.onkeypress=this.tabStart.onkeydown}this.tabEnd=(typeof(a)=="object")?a:document.getElementById(a);var e=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(j){if(e){e.call(this,j)}var h=(j||window.event);if(h.keyCode==9&&h.shiftKey){h.cancelBubble=true;b.selectCell((b.getRowsNum()-1),(b.getColumnCount()-1),0,0,1);if(b.smartTabOrder&&b.cells2((b.getRowsNum()-1),(b.getColumnCount()-1)).isDisabled()){b._key_events.k9_0_1.call(b)}this.blur();return false}};if(_isOpera){this.tabEnd.onkeypress=this.tabEnd.onkeydown}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date()).valueOf()}return this._ui_seed++},setIconset:function(a){this.iconset=a},clearAndLoad:function(){if(this._last_load_request){var b=this._last_load_request.xmlDoc;if(b.readyState!=4){try{b.onreadystatechange=function(){};b.abort()}catch(c){}}}var a=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=a;this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var e=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,e,Math.min(e+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}var b=Math.floor(this.objBox.scrollTop/this._srdh);var a=Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh);if(this.multiLine){var c=this.objBox.scrollTop;b=0;while(c>=0){c-=this.rowsCol[b]?this.rowsCol[b].offsetHeight:this._srdh;b++}b--;c+=this.objBox.offsetHeight;a=0;while(c>=0){c-=this.rowsCol[b+a]?this.rowsCol[b+a].offsetHeight:this._srdh;a++}}return[b,a,this.rowsBuffer.length]}};(function(){function e(j,k){this[j]=k}function h(j,k){this[j].call(this,k)}function c(j,k){this[j].call(this,k.join(this.delim))}function a(j,m){for(var l=0;l<m.length;l++){if(typeof m[l]=="object"){var n=this.getCombo(l);for(var k in m[l]){n.put(k,m[l][k])}}}}function g(l,t,o){var v=1;var s=[];function u(w,k,x){if(!s[k]){s[k]=[]}if(typeof x=="object"){x.toString=function(){return this.text}}s[k][w]=x}for(var q=0;q<t.length;q++){if(typeof(t[q])=="object"&&t[q].length){for(var n=0;n<t[q].length;n++){u(q,n,t[q][n])}}else{u(q,0,t[q])}}for(var q=0;q<s.length;q++){for(var n=0;n<s[0].length;n++){var r=s[q][n];s[q][n]=(r||"").toString()||"&nbsp;";if(r&&r.colspan){for(var m=1;m<r.colspan;m++){u(n+m,q,"#cspan")}}if(r&&r.rowspan){for(var m=1;m<r.rowspan;m++){u(n,q+m,"#rspan")}}}}this.setHeader(s[0]);for(var q=1;q<s.length;q++){this.attachHeader(s[q])}}var b=[{name:"label",def:"&nbsp;",operation:"setHeader",type:g},{name:"id",def:"",operation:"columnIds",type:e},{name:"width",def:"*",operation:"setInitWidths",type:c},{name:"align",def:"left",operation:"cellAlign",type:e},{name:"valign",def:"middle",operation:"cellVAlign",type:e},{name:"sort",def:"na",operation:"fldSort",type:e},{name:"type",def:"ro",operation:"setColTypes",type:c},{name:"options",def:"",operation:"",type:a}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(j){return[j.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(o){for(var k=0;k<b.length;k++){var n=[];for(var l=0;l<o.length;l++){n[l]=o[l][b[k].name]||b[k].def}var m=b[k].type||h;m.call(this,b[k].operation,n,o)}this.init()},rows:function(j){},headers:function(k){for(var j=0;j<k.length;j++){this.attachHeader(k[j])}}})})();dhtmlXGridObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(b,e){if(this.obj._h2){this.obj.addRow(e,c,null,parent)}else{this.obj.addRow(e,[],0)}var c=this.obj.getRowById(e);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c)}});a.attachEvent("updateCallback",function(b,e){var c=this.obj.getRowById(e);if(c){this.obj._process_xml_row(c,b.firstChild);this.obj._postRowProcessing(c)}});a.attachEvent("deleteCallback",function(b,c){this.obj.setUserData(c,this.action_param,"true_deleted");this.obj.deleteRow(c)});a._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(e,g,c){if(a._columns&&!a._columns[c]){return true}var b=this.cells(g,c);if(e==1){if(b.isCheckbox()){a.setUpdated(g,true)}}else{if(e==2){if(b.wasChanged()){a.setUpdated(g,true)}}}return true});this.attachEvent("onRowPaste",function(b){a.setUpdated(b,true)});this.attachEvent("onUndo",function(b){a.setUpdated(b,true)});this.attachEvent("onRowIdChange",function(e,b){var c=a.findRow(e);if(c<a.updatedRows.length){a.updatedRows[c]=b}});this.attachEvent("onSelectStateChanged",function(b){if(a.updateMode=="row"){a.sendData()}return true});this.attachEvent("onEnter",function(c,b){if(a.updateMode=="row"){a.sendData()}return true});this.attachEvent("onBeforeRowDeleted",function(b){if(a._silent_mode||(!this.rowsAr[b])){return true}if(this.dragContext&&a.dnd){window.setTimeout(function(){a.setUpdated(b,true)},1);return true}var c=a.getState(b);if(this._h2){this._h2.forEachChild(b,function(e){a.setUpdated(e.id,false);a.markRow(e.id,true,"deleted")},this)}if(c=="inserted"){a.set_invalid(b,false);a.setUpdated(b,false);return true}if(c=="deleted"){return false}if(c=="true_deleted"){a.setUpdated(b,false);return true}a.setUpdated(b,true,"deleted");return false});this.attachEvent("onBindUpdate",function(c,b,e){a.setUpdated(e,true)});this.attachEvent("onRowAdded",function(b){if(this.dragContext&&a.dnd){return true}a.setUpdated(b,true,"inserted");return true});a._getRowData=function(e,o){var k={};k.gr_id=e;if(this.obj.isTreeGrid()){k.gr_pid=this.obj.getParentId(e)}var b=this.obj.getRowById(e);for(var l=0;l<this.obj._cCount;l++){if(this.obj._c_order){var m=this.obj._c_order[l]}else{var m=l}var n=this.obj.cells(b.idd,l);if(this._changed&&!n.wasChanged()){continue}if(this._endnm){k[this.obj.getColumnId(l)]=n.getValue()}else{k["c"+m]=n.getValue()}}var g=this.obj.UserData[e];if(g){for(var h=0;h<g.keys.length;h++){if(g.keys[h]&&g.keys[h].indexOf("__")!=0){k[g.keys[h]]=g.values[h]}}}var g=this.obj.UserData.gridglobaluserdata;if(g){for(var h=0;h<g.keys.length;h++){k[g.keys[h]]=g.values[h]}}return k};a._clearUpdateFlag=function(c){var e=this.obj.getRowById(c);if(e){for(var b=0;b<this.obj._cCount;b++){this.obj.cells(c,b).cell.wasChanged=false}}};a.checkBeforeUpdate=function(h){var g=true;var b=[];for(var e=0;e<this.obj._cCount;e++){if(this.mandatoryFields[e]){var c=this.mandatoryFields[e].call(this.obj,this.obj.cells(h,e).getValue(),h,e);if(typeof c=="string"){this.messages.push(c);g=false}else{g&=c;b[e]=!c}}}if(!g){this.set_invalid(h,"invalid",b);this.setUpdated(h,false)}return g}};dhx4.attachEvent("onGridCreated",function(b){b._con_f_used=[].concat(b._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];if(b._was_created_once){return}b._was_created_once=true;var a=function(h){h=h.replace(/(\?|\&)connector[^\f]*/g,"");return h+(h.indexOf("?")!=-1?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")};var g=function(h){return a.call(this,h)+(this._connector_sorting||"")+(this._connector_filter||"")};var e=function(j,k,h){this._connector_sorting="&dhx_sort["+k+"]="+h;return g.call(this,j)};var c=function(j,h,l){var m=[];for(var k=0;k<h.length;k++){m[k]="dhx_filter["+h[k]+"]="+encodeURIComponent(l[k])}this._connector_filter="&"+m.join("&");return g.call(this,j)};b.attachEvent("onCollectValues",function(h){if(this._con_f_used[h]){if(typeof(this._con_f_used[h])=="object"){return this._con_f_used[h]}else{return false}}return true});b.attachEvent("onDynXLS",function(){if(this.xmlFileUrl){this.xmlFileUrl=g.call(this,this.xmlFileUrl)}return true});b.attachEvent("onBeforeSorting",function(l,k,j){if(k=="connector"){var h=this;this.clearAndLoad(e.call(this,this.xmlFileUrl,l,j),function(){h.setSortImgState(true,l,j)});return false}return true});b.attachEvent("onFilterStart",function(j,h){if(this._con_f_used.length){var l=this.getSortingState();var k=this;this.clearAndLoad(c.call(this,this.xmlFileUrl,j,h));if(l.length){k.setSortImgState(true,l[0],l[1])}return false}return true})});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(b,a){if(!this._con_f_used[a]){this._con_f_used[a]=1}return this._in_header_text_filter(b,a)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(b,a){if(!this._con_f_used[a]){this._con_f_used[a]=2}return this._in_header_select_filter(b,a)};if(!dhtmlXGridObject.prototype.load_connector){dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load;dhtmlXGridObject.prototype.load=function(b,g,e){if(!this._colls_loaded&&this.cellType){var a=[];for(var c=0;c<this.cellType.length;c++){if(this.cellType[c].indexOf("co")==0||this.cellType[c].indexOf("clist")==0||this._con_f_used[c]==2){a.push(c)}}if(a.length){arguments[0]+=(arguments[0].indexOf("?")!=-1?"&":"?")+"connector=true&dhx_colls="+a.join(",")}}return this.load_connector.apply(this,arguments)};dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead;dhtmlXGridObject.prototype._parseHead=function(b,r,n){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){var o=dhx4.ajax.xpath("./coll_options",arguments[0]);for(var k=0;k<o.length;k++){var m=o[k].getAttribute("for");var q=[];var e=null;if(this.cellType[m]=="combo"){e=this.getColumnCombo(m)}else{if(this.cellType[m].indexOf("co")==0){e=this.getCombo(m)}}var h=dhx4.ajax.xpath("./item",o[k]);var a=[];for(var g=0;g<h.length;g++){var c=h[g].getAttribute("value");if(e){var l=h[g].getAttribute("label")||c;if(e.addOption){a.push([c,l])}else{e.put(c,l)}q[q.length]=l}else{q[q.length]=c}}if(a.length){if(e){e.addOption(a)}}else{if(q.length&&!e){if(this.registerCList){this.registerCList(m*1,q)}}}if(this._con_f_used[m*1]){this._con_f_used[m*1]=q}}this._colls_loaded=true}}}dhtmlXGridObject.prototype.getRowData=function(g){var b={};var a=this.getColumnsNum();for(var c=0;c<a;c++){var e=this.getColumnId(c);if(e){b[e]=this.cells(g,c).getValue()}}return b};dhtmlXGridObject.prototype.setRowData=function(g,c){var a=this.getColumnsNum();for(var b=0;b<a;b++){var e=this.getColumnId(b);if(e&&c.hasOwnProperty(e)){this.cells(g,b).setValue(c[e])}}};function dhtmlXGridCellObject(a){this.destructor=function(){this.cell.obj=null;this.cell=null;this.grid=null;this.base=null;return null};this.cell=a;this.getValue=function(){if((this.cell.textContent)&&(this.cell.textContent.tagName=="TEXTAREA")){return this.cell.textContent.value}else{return this.cell.innerHTML._dhx_trim()}};this.getMathValue=function(){if(this.cell.original){return this.cell.original}else{return this.getValue()}};this.getFont=function(){arOut=new Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily}if(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold"){arOut[1]="bold"}if(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic"){arOut[1]+="italic"}if(this.cell.style.fontSize){arOut[2]=this.cell.style.fontSize}else{arOut[2]=""}return arOut.join("-")};this.getTextColor=function(){if(this.cell.style.color){return this.cell.style.color}else{return"#000000"}};this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"};this.getHorAlign=function(){if(this.cell.style.textAlign){return this.cell.style.textAlign}else{if(this.cell.style.textAlign){return this.cell.style.textAlign}else{return"left"}}};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(b){fntAr=b.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight="bold"}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle="italic"}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration="underline"}}};this.setTextColor=function(b){this.cell.style.color=b};this.setBgColor=function(b){if(b==""){b=null}this.cell.style.background=b};this.setHorAlign=function(b){if(b.length==1){if(b=="c"){this.cell.style.textAlign="center"}else{if(b=="l"){this.cell.style.textAlign="left"}else{this.cell.style.textAlign="right"}}}else{this.cell.style.textAlign=b}};this.wasChanged=function(){if(this.cell.wasChanged){return true}else{return false}};this.isCheckbox=function(){var b=this.cell.firstChild;if(b&&b.tagName=="INPUT"){type=b.type;if(type=="radio"||type=="checkbox"){return true}else{return false}}else{return false}};this.isChecked=function(){if(this.isCheckbox()){return this.cell.firstChild.checked}};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(b){if(this.isCheckbox()){if(b!="true"&&b!=1){b=false}this.cell.firstChild.checked=b}};this.setDisabled=function(b){if(b!="true"&&b!=1){b=false}if(this.isCheckbox()){this.cell.firstChild.disabled=b;if(this.disabledF){this.disabledF(b)}}this.cell._disabled=b}}dhtmlXGridCellObject.prototype={getAttribute:function(a){return this.cell._attrs[a]},setAttribute:function(a,b){this.cell._attrs[a]=b},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA")){return this.obj}var a=(this.obj||this.cell).getElementsByTagName("TEXTAREA");if(!a.length){a=(this.obj||this.cell).getElementsByTagName("INPUT")}return a[0]}};dhtmlXGridCellObject.prototype.setValue=function(a){if((typeof(a)!="number")&&(!a||a.toString()._dhx_trim()=="")){a="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCValue(a)};dhtmlXGridCellObject.prototype.getTitle=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};dhtmlXGridCellObject.prototype.setCValue=function(b,a){this.cell.innerHTML=b;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,(arguments.length>1?a:b)])};dhtmlXGridCellObject.prototype.setCTxtValue=function(a){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(a));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,a])};dhtmlXGridCellObject.prototype.setLabel=function(a){this.cell.innerHTML=a};dhtmlXGridCellObject.prototype.getMath=function(){if(this._val){return this.val}else{return this.getValue()}};function eXcell(){this.obj=null;this.val=null;this.changeState=function(){return false};this.edit=function(){this.val=this.getValue()};this.detach=function(){return false};this.getPosition=function(e){var a=e;var c=0;var b=0;while(a.tagName!="BODY"){c+=a.offsetLeft;b+=a.offsetTop;a=a.offsetParent}return new Array(c,b)}}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.cell.atag=(!this.grid.multiLine)?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=(this.cell.offsetHeight-(this.grid.multiLine?9:4))+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(b){(b||event).cancelBubble=true};this.obj.onmousedown=function(b){(b||event).cancelBubble=true};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(b){if(!b){b=event}b.cancelBubble=true;return true};if(_isIE){this.obj.focus();this.obj.blur()}this.obj.focus()};this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&((this.cell.atag)&&(this.cell.firstChild.tagName==this.cell.atag))){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(b){if(!b||b.toString()._dhx_trim()==""){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_edn(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}return this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){var b=this.obj.value;this.setValue(b);return this.val!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(a){if(!a||a.toString()._dhx_trim()==""){this.cell._clearCell=true;return this.setCValue("&nbsp;",0)}else{this.cell._clearCell=false;this.cell._orig_value=a}this.setCValue(this.grid._aplNF(a,this.cell._cellIndex),a)};function eXcell_ch(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")}};this.changeState=function(b){if(b===true&&!this.grid.isActive){if(window.globalActiveDHTMLGridObject!=null&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive){window.globalActiveDHTMLGridObject.setActive(false)}this.grid.setActive(true)}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(b){this.setValue(b.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b=""}}if(b){b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}var a=this;this.cell.setAttribute("excell","ch");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+b+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};function eXcell_ra(a){this.base=eXcell_ch;this.base(a);this.grid=a.parentNode.grid;this.disabledF=function(b){if((b==true)||(b==1)){this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis.")}else{this.cell.innerHTML=this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")}};this.changeState=function(b){if(b===false&&this.getValue()==1){return}if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("0")}else{this.setValue("1")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b){b=b.toString()._dhx_trim();if((b=="false")||(b=="0")){b=""}}if(b){if(!this.grid._RaSeCol){this.grid._RaSeCol=[]}if(this.grid._RaSeCol[this.cell._cellIndex]){var c=this.grid._RaSeCol[this.cell._cellIndex];if(this.grid.rowsAr[c]){var a=this.grid.cells(c,this.cell._cellIndex);a.setValue("0");if(this.grid.rowsAr[a.cell.parentNode.idd]){this.grid.callEvent("onEditCell",[1,a.cell.parentNode.idd,a.cell._cellIndex])}}}this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd;b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}this.cell.setAttribute("excell","ra");this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+b+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};function eXcell_txt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(g){(g||event).cancelBubble=true};var b=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);if(_isOpera){this.obj.onkeypress=function(e){if(e.keyCode==9||e.keyCode==27){return false}}}this.obj.onkeydown=function(h){var g=(h||event);if(g.keyCode==9||g.keyCode==27){globalActiveDHTMLGridObject.entBox.focus();globalActiveDHTMLGridObject.doKey({keyCode:g.keyCode,shiftKey:g.shiftKey,srcElement:"0"});return false}};this.obj.style.left=b[0]+"px";this.obj.style.top=b[1]+this.cell.offsetHeight+"px";if(this.cell.offsetWidth<200){var c=200}else{var c=this.cell.offsetWidth}this.obj.style.width=c+16+"px";if(_isIE){this.obj.select();this.obj.value=this.obj.value}this.obj.focus()};this.detach=function(){var b="";b=this.obj.value;if(b==""){this.cell._clearCell=true}else{this.cell._clearCell=false}this.setValue(b);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){if(this.obj){return this.obj.value}if(this.cell._clearCell){return""}if(typeof this.cell._brval!="undefined"){return this.cell._brval}if((!this.grid.multiLine)){return this.cell._brval||this.cell.innerHTML}else{return this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim()}}}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.getValue=function(){if((this.cell.firstChild)&&(this.cell.firstChild.tagName=="TEXTAREA")){return this.cell.firstChild.value}if(this.cell._clearCell){return""}if((!this.grid.multiLine)&&this.cell._brval){return this.cell._brval}return(_isIE?this.cell.innerText:this.cell.textContent)};this.setValue=function(b){this.cell._brval=b;if(!b||b.toString()._dhx_trim()==""){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(a){this.cell._brval=a;if(!a||a.toString()._dhx_trim()==""){a="&nbsp;";this.cell._clearCell=true}else{this.cell._clearCell=false}if((!this.grid.multiLine)||this.cell._clearCell){this.setCValue(a,this.cell._brval)}else{this.setCValue(a.replace(/\n/g,"<br/>"),a)}};function eXcell_co(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.combo=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));this.editable=true}this.shiftNext=function(){var b=this.list.options[this.list.selectedIndex+1];if(b){b.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text;return true};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var b=this.list.options[this.list.selectedIndex-1];if(b){b.selected=true}this.obj.value=this.list.options[this.list.selectedIndex].text}return true};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var e=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=(this.cell.offsetHeight-(this.grid.multiLine?9:4))+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(l){(l||event).cancelBubble=true};this.obj.onmousedown=function(l){(l||event).cancelBubble=true};this.obj.value=this.text;this.obj.onselectstart=function(l){if(!l){l=event}l.cancelBubble=true;return true};var h=this;this.obj.onkeyup=function(n){var m=(n||event).keyCode;if(m==38||m==40||m==9){return}var o=this.readonly?String.fromCharCode(m):this.value;var q=h.list.options;for(var l=0;l<q.length;l++){if(q[l].text.indexOf(o)==0){return q[l].selected=true}}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=e[0]+"px";this.list.style.top=e[1]+this.cell.offsetHeight+"px";this.list.onclick=function(n){var m=n||window.event;var l=m.target||m.srcElement;if(l.tagName=="OPTION"){l=l.parentNode}h.editable=false;h.grid.editStop();m.cancelBubble=true};var b=this.combo.getKeys();var g=false;var k=0;for(var c=0;c<b.length;c++){var j=this.combo.get(b[c]);this.list.options[this.list.options.length]=new Option(j,b[c]);if(b[c]==this.val){k=this.list.options.length-1;g=true}}if(g==false){this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val);k=this.list.options.length-1}document.body.appendChild(this.list);this.list.size="6";this.cstate=1;if(this.editable){this.cell.innerHTML=""}else{this.obj.style.width="0px";this.obj.style.height="0px"}this.cell.appendChild(this.obj);this.list.options[k].selected=true;if(this.editable){this.obj.focus();this.obj.focus()}if(!this.editable){this.obj.style.visibility="hidden";this.obj.style.position="absolute";this.list.focus();this.list.onkeydown=function(l){l=l||window.event;h.grid.setActive(true);if(l.keyCode<30){return h.grid.doKey({target:h.cell,keyCode:l.keyCode,shiftKey:l.shiftKey,ctrlKey:l.ctrlKey})}}}};this.getValue=function(){return((this.cell.combo_value==window.undefined)?"":this.cell.combo_value)};this.detach=function(){if(this.val!=this.getValue()){this.cell.wasChanged=true}if(this.list.parentNode!=null){if(this.editable){var b=this.list.options[this.list.selectedIndex];if(b&&b.text==this.obj.value){this.setValue(this.list.value)}else{var c=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex));var e=c.values._dhx_find(this.obj.value);if(e!=-1){this.setValue(c.keys[e])}else{this.setValue(this.cell.combo_value=this.obj.value)}}}else{this.setValue(this.list.value)}}if(this.list.parentNode){this.list.parentNode.removeChild(this.list)}if(this.obj.parentNode){this.obj.parentNode.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(e){if(typeof(e)=="object"){var c=dhx4.ajax.xpath("./option",e);if(c.length){this.cell._combo=new dhtmlXGridComboObject()}for(var b=0;b<c.length;b++){this.cell._combo.put(c[b].getAttribute("value"),c[b].firstChild?c[b].firstChild.data:"")}e=e.firstChild.data}if((e||"").toString()._dhx_trim()==""){e=null}this.cell.combo_value=e;if(e!==null){var a=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(e);this.setCValue(a===null?e:a,e)}else{this.setCValue("&nbsp;",e)}};function eXcell_coro(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(a){this.base=eXcell_co;this.base(a)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return(_isIE?this.cell.innerText:this.cell.textContent)};eXcell_cotxt.prototype.setValue=function(c){if(typeof(c)=="object"){var b=dhx4.ajax.xpath("./option",c);if(b.length){this.cell._combo=new dhtmlXGridComboObject()}for(var a=0;a<b.length;a++){this.cell._combo.put(b[a].getAttribute("value"),b[a].firstChild?b[a].firstChild.data:"")}c=c.firstChild.data}if((c||"").toString()._dhx_trim()==""){c=null}if(c!==null){this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(c)||c,c)}else{this.setCTxtValue(" ",c)}this.cell.combo_value=c};function eXcell_corotxt(a){this.base=eXcell_co;this.base(a);this.editable=false}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var c=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=c[0]+"px";this.obj.style.zIndex=1000;this.obj.style.top=c[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(c){if(c.length==1){c="0"+c}return c};this.colorPanel=function(o,t){var l=document.createElement("TABLE");t.appendChild(l);l.cellSpacing=0;l.editor_obj=this;l.style.cursor="default";l.onclick=function(r){var n=r||window.event;var c=n.target||n.srcElement;var j=c.parentNode.parentNode.parentNode.editor_obj;if(j){j.setValue(c._bg);j.grid.editStop()}};var h=256/o;for(var k=0;k<=(256/h);k++){var e=l.insertRow(k);for(var m=0;m<=(256/h);m++){for(var g=0;g<=(256/h);g++){R=new Number(h*k)-(k==0?0:1);G=new Number(h*m)-(m==0?0:1);B=new Number(h*g)-(g==0?0:1);var s=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16));var q=e.insertCell(m);q.width="10px";q.innerHTML="&nbsp;";q.title=s.toUpperCase();q.style.backgroundColor="#"+s;q._bg="#"+s;if(this.val!=null&&"#"+s.toUpperCase()==this.val.toUpperCase()){q.style.border="2px solid white"}}}}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){if(this.obj.offsetParent!=null){document.body.removeChild(this.obj)}return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(a){this.setCValue("<div style='width:100%;height:"+((this.grid.multiLine?"100%":23))+";background-color:"+(a||"")+";border:0px;'>&nbsp;</div>",a);this.cell.firstChild._bg=a};function eXcell_img(a){try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG"){return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"")}else{if(this.cell.firstChild.tagName=="A"){var c=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");c+="^"+this.cell.lnk;if(this.cell.trg){c+="^"+this.cell.trg}return c}}};this.isDisabled=function(){return true}}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(c){var b=c;if((c||"").indexOf("^")!=-1){var a=c.split("^");c=a[0];b=this.cell._attrs.title||a[1];if(a.length>2){this.cell.lnk=a[2];if(a[3]){this.cell.trg=a[3]}}this.cell.titFl="1"}if(!this.grid.multiLine){this.setCValue("<img src='"+this.grid.iconURL+(c||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",c)}else{this.setCValue("<img src='"+this.grid.iconURL+(c||"")._dhx_trim()+"' border='0'>",c)}if(this.cell.lnk){this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"}this.cell._brval=b};function eXcell_icon(a){this.base=eXcell_ed;this.base(a);try{this.cell=a;this.grid=this.cell.parentNode.grid}catch(b){}this.setValue=function(c){this.cell._raw_value=c;this.setCValue('<div class="dhx_grid_icon"><i class="fa fa-'+c.toString()._dhx_trim()+'"></i></div>')};this.getValue=function(){return this.cell._raw_value};this.isDisabled=function(){return true}}eXcell_icon.prototype=new eXcell_ed;function eXcell_price(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(this.cell.childNodes.length>1){return this.cell.childNodes[1].innerHTML.toString()._dhx_trim()}else{return"0"}}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(b){if(isNaN(parseFloat(b))){b=this.val||0}var a="green";if(b<0){a="red"}this.setCValue("<span>$</span><span style='padding-right:2px;color:"+a+";'>"+b+"</span>",b)};function eXcell_dyn(a){this.base=eXcell_ed;this.base(a);this.getValue=function(){if(!this.cell.firstChild.childNodes[1]){return""}var c=this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim();var b=this.grid._aplNFb(c,this.cell._cellIndex);if(isNaN(Number(b))){return c}return b}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.getValue=function(){var a=eXcell_ed.prototype.getValue.call(this);return};eXcell_dyn.prototype.setValue=function(c){if(!c||isNaN(Number(c))){if(c!==""){c=0}}else{if(c>0){var b="green";var a="dyn_up.gif"}else{if(c==0){var b="black";var a="dyn_.gif"}else{var b="red";var a="dyn_down.gif"}}c=this.grid._aplNF(c,this.cell._cellIndex)}this.setCValue("<div class='grid_cell_dyn'><img src='"+this.grid.imgURL+""+a+"'><span style='color:"+b+";'>"+c+"</span></div>",c)};function eXcell_ro(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;eXcell_hidden.prototype.setValue=function(a){this.cell.val=a};function eXcell_ron(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(a){if(a===0){}else{if(!a||a.toString()._dhx_trim()==""){this.setCValue("&nbsp;");return this.cell._clearCell=true}}this.cell._orig_value=a;this.cell._clearCell=false;this.setCValue(a?this.grid._aplNF(a,this.cell._cellIndex):"0")};function eXcell_rotxt(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return true};this.setValue=function(b){if(!b){b=" ";this.cell._clearCell=true}else{this.cell._clearCell=false}this.setCTxtValue(b)};this.getValue=function(){if(this.cell._clearCell){return""}return(_isIE?this.cell.innerText:this.cell.textContent)}}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();this.put=function(b,c){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.values[a]=c;return true}}this.values[this.values.length]=c;this.keys[this.keys.length]=b};this.get=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){return this.values[a]}}return null};this.clear=function(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray()};this.remove=function(b){for(var a=0;a<this.keys.length;a++){if(this.keys[a]==b){this.keys._dhx_removeAt(a);this.values._dhx_removeAt(a);return true}}};this.size=function(){var a=0;for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a++}}return a};this.getKeys=function(){var a=new Array(0);for(var b=0;b<this.keys.length;b++){if(this.keys[b]!=null){a[a.length]=this.keys[b]}}return a};this.save=function(){this._save=new Array();for(var a=0;a<this.keys.length;a++){this._save[a]=[this.keys[a],this.values[a]]}};this.restore=function(){if(this._save){this.keys[a]=new Array();this.values[a]=new Array();for(var a=0;a<this._save.length;a++){this.keys[a]=this._save[a][0];this.values[a]=this._save[a][1]}}};return this}function Hashtable(){this.keys=new dhtmlxArray();this.values=new dhtmlxArray();return this}Hashtable.prototype=new dhtmlXGridComboObject;if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachGrid=function(a){this.callEvent("_onBeforeContentAttach",["grid"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);this.dataType="grid";if(a&&typeof a==="object"&&!a.tagName){a.parent=b;b=a}this.dataObj=new dhtmlXGridObject(b);this.dataObj.setSkin(this.conf.skin);if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell&&navigator.userAgent.match(/7[\.\d]* mobile/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null){this.dataObj.objBox.style.webkitOverflowScrolling="auto"}if(this.conf.skin=="material"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell){this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden"}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXGridObject.prototype.enableDragAndDrop=function(a){if(a=="temporary_disabled"){this.dADTempOff=false;a=true}else{this.dADTempOff=true}this.dragAndDropOff=dhx4.s2b(a);this._drag_validate=true;if(a){this.objBox.ondragstart=function(b){(b||event).cancelBubble=true;return false}}};dhtmlXGridObject.prototype.setDragBehavior=function(a){this.dadmodec=this.dadmodefix=0;switch(a){case"child":this.dadmode=0;this._sbmod=false;break;case"sibling":this.dadmode=1;this._sbmod=false;break;case"sibling-next":this.dadmode=1;this._sbmod=true;break;case"complex":this.dadmode=2;this._sbmod=false;break;case"complex-next":this.dadmode=2;this._sbmod=true;break}};dhtmlXGridObject.prototype.enableDragOrder=function(a){this._dndorder=dhx4.s2b(a)};dhtmlXGridObject.prototype._checkParent=function(e,b){var c=this._h2.get[e.idd].parent;if(!c.parent){return}for(var a=0;a<b.length;a++){if(b[a]==c.id){return true}}return this._checkParent(this.rowsAr[c.id],b)};dhtmlXGridObject.prototype._createDragNode=function(c,g){this.editStop();if(window.dhtmlDragAndDrop.dragNode){return null}if(!this.dADTempOff){return null}c.parentObject=new Object();c.parentObject.treeNod=this;var l=this.callEvent("onBeforeDrag",[c.parentNode.idd,c._cellIndex,g]);if(!l){return null}var h=new Array();h=this.getSelectedId();h=(((h)&&(h!=""))?h.split(this.delim):[]);var j=false;for(var b=0;b<h.length;b++){if(h[b]==c.parentNode.idd){j=true}}if(!j){this.selectRow(this.rowsAr[c.parentNode.idd],false,g.ctrlKey,false);if(!g.ctrlKey){h=[]}h[this.selMultiRows?h.length:0]=c.parentNode.idd}if(this.isTreeGrid()){for(var b=h.length-1;b>=0;b--){if(this._checkParent(this.rowsAr[h[b]],h)){h.splice(b,1)}}}var m=this;if(h.length&&this._dndorder){h.sort(function(n,e){return(m.rowsAr[n].rowIndex>m.rowsAr[e].rowIndex?1:-1)})}var a=this.getFirstParentOfType(_isIE?g.srcElement:g.target,"TD");if(a){this._dndExtra=a._cellIndex}this._dragged=new Array();for(var b=0;b<h.length;b++){if(this.rowsAr[h[b]]){this._dragged[this._dragged.length]=this.rowsAr[h[b]];this.rowsAr[h[b]].treeNod=this}}c.parentObject.parentNode=c.parentNode;var k=document.createElement("div");k.innerHTML=(l!==true?l:this.rowToDragElement(c.parentNode.idd));k.style.position="absolute";k.className="dragSpanDiv";return k};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};function dragContext(x,w,v,u,t,s,q,r,o,n,g){this.source=x||"grid";this.target=w||"grid";this.mode=v||"move";this.dropmode=u||"child";this.sid=t||0;this.tid=s;this.sobj=q||null;this.tobj=r||null;this.sExtra=o||null;this.tExtra=n||null;this.before=g||false;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj){return true}if(this.sid==this.tid){return false}if(this.target=="treeGrid"){var a=this.tid;while(a=this.tobj.getParentId(a)){if(this.sid==a){return false}}}return true};dragContext.prototype.close=function(){this.sobj=null;this.tobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra,this.before)};dragContext.prototype.set=function(e,c){this[e]=c;return this};dragContext.prototype.uid=function(e,c){this.nid=this.sid;while(this.tobj.rowsAr[this.nid]){this.nid=this.nid+((new Date()).valueOf())}return this};dragContext.prototype.data=function(){if(this.sobj==this.tobj){return this.sobj._getRowArray(this.sobj.rowsAr[this.sid])}if(this.source=="tree"){return this.tobj.treeToGridElement(this.sobj,this.sid,this.tid)}else{return this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)}};dragContext.prototype.attrs=function(){if(this.source=="tree"){return{}}else{return this.sobj.rowsAr[this.sid]._attrs}};dragContext.prototype.childs=function(){if(this.source=="treeGrid"){return this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null}return null};dragContext.prototype.pid=function(){if(!this.tid){return 0}if(!this.tobj._h2){return 0}if(this.target=="treeGrid"){if(this.dropmode=="child"){return this.tid}else{var b=this.tobj.rowsAr[this.tid];var a=this.tobj._h2.get[b.idd].parent.id;if((this.alfa)&&(this.tobj._sbmod)&&(b.nextSibling)){var c=this.tobj._h2.get[b.nextSibling.idd].parent.id;if(c==this.tid){return this.tid}if(c!=a){return c}}return a}}};dragContext.prototype.ind=function(){if(this.tid==window.unknown){return this.tobj.rowsBuffer.length}if(this.target=="treeGrid"){if(this.dropmode=="child"){this.tobj.openItem(this.tid)}else{this.tobj.openItem(this.tobj.getParentId(this.tid))}}var a=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if((this.alfa)&&(this.tobj._sbmod)&&(this.dropmode=="sibling")){var b=this.tobj.rowsAr[this.tid];if((b.nextSibling)&&(this._h2.get[b.nextSibling.idd].parent.id==this.tid)){return a+1}}return(a+1+((this.target=="treeGrid"&&a>=0&&this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state=="minus")?this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd,0):0))};dragContext.prototype.img=function(){if((this.target!="grid")&&(this.sobj._h2)){return this.sobj.getItemImage(this.sid)}else{return null}};dragContext.prototype.slist=function(){var b=new Array();for(var a=0;a<this.sid.length;a++){b[b.length]=this.sid[a][(this.source=="tree")?"id":"idd"]}return b.join(",")};dhtmlXGridObject.prototype._drag=function(n,g,m,o){if(this._realfake){return this._fake._drag()}var l=(this.lastLanding);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}var e=m.parentNode;var b=n.parentObject;if(!e.idd){e.grid=this;this.dadmodefix=0}var k=new dragContext(0,0,0,((e.grid.dadmode==1||e.grid.dadmodec)?"sibling":"child"));if(b&&b.childNodes){k.set("source","tree").set("sobj",b.treeNod).set("sid",k.sobj._dragged)}else{if(!b){return true}if(b.treeNod.isTreeGrid&&b.treeNod.isTreeGrid()){k.set("source","treeGrid")}k.set("sobj",b.treeNod).set("sid",k.sobj._dragged)}if(e.grid.isTreeGrid()){k.set("target","treeGrid")}else{k.set("dropmode","sibling")}k.set("tobj",e.grid).set("tid",e.idd);if(((k.tobj.dadmode==2)&&(k.tobj.dadmodec==1))&&(k.tobj.dadmodefix<0)){if(k.tobj.obj.rows[1].idd!=k.tid){k.tid=e.previousSibling.idd}else{if(this._h2&&k.tid){k.before=true}else{k.tid=0}}}var a=this.getFirstParentOfType(o,"TD");if(a){k.set("tExtra",a._cellIndex)}if(a){k.set("sExtra",k.sobj._dndExtra)}if(k.sobj.dpcpy){k.set("mode","copy")}if(k.tobj._realfake){k.tobj=k.tobj._fake}if(k.sobj._realfake){k.sobj=k.sobj._fake}k.tobj._clearMove();if(b&&b.treeNod&&b.treeNod._nonTrivialRow){b.treeNod._nonTrivialRow(this,k.tid,k.dropmode,b)}else{k.tobj.dragContext=k;if(!k.tobj.callEvent("onDrag",[k.slist(),k.tid,k.sobj,k.tobj,k.sExtra,k.tExtra])){return k.tobj.dragContext=null}var q=new Array();if(typeof(k.sid)=="object"){var j=k.copy();for(var h=0;h<k.sid.length;h++){if(!j.set("alfa",(!h)).set("sid",k.sid[h][(k.source=="tree"?"id":"idd")]).valid()){continue}j.tobj._dragRoutine(j);if(j.target=="treeGrid"&&j.dropmode=="child"){j.tobj.openItem(j.tid)}q[q.length]=j.nid;j.set("dropmode","sibling").set("tid",j.nid)}j.close()}else{k.tobj._dragRoutine(k)}if(k.tobj.laterLink){k.tobj.laterLink()}k.tobj.callEvent("onDrop",[k.slist(),k.tid,q.join(","),k.sobj,k.tobj,k.sExtra,k.tExtra])}k.tobj.dragContext=null;k.close()};dhtmlXGridObject.prototype._dragRoutine=function(o){if((o.sobj==o.tobj)&&(o.source=="grid")&&(o.mode=="move")&&!this._fake){if(o.sobj._dndProblematic){return}var m=o.sobj.rowsAr[o.sid];var n=o.sobj.rowsCol._dhx_find(m);o.sobj.rowsCol._dhx_removeAt(o.sobj.rowsCol._dhx_find(m));o.sobj.rowsBuffer._dhx_removeAt(o.sobj.rowsBuffer._dhx_find(m));o.sobj.rowsBuffer._dhx_insertAt(o.ind(),m);if(o.tobj._fake){o.tobj._fake.rowsCol._dhx_removeAt(n);var q=o.tobj._fake.rowsAr[o.sid];q.parentNode.removeChild(q)}o.sobj._insertRowAt(m,o.ind()-(this.pagingOn?((this.currentPage-1)*this.rowsBufferOutSize):0));o.nid=o.sid;o.sobj.callEvent("onGridReconstructed",[]);return}var k;if(this._h2&&typeof o.tid!="undefined"&&o.dropmode=="sibling"&&(this._sbmod||o.tid)){if(o.before){k=o.uid().tobj.addRowBefore(o.nid,o.data(),o.tid,o.img(),o.childs())}else{if(o.alfa&&this._sbmod&&this._h2.get[o.tid].childs.length){this.openItem(o.tid);k=o.uid().tobj.addRowBefore(o.nid,o.data(),this._h2.get[o.tid].childs[0].id,o.img(),o.childs())}else{k=o.uid().tobj.addRowAfter(o.nid,o.data(),o.tid,o.img(),o.childs())}}}else{k=o.uid().tobj.addRow(o.nid,o.data(),o.ind(),o.pid(),o.img(),o.childs())}k._attrs=o.attrs();if(o.source=="tree"){this.callEvent("onRowAdded",[o.nid]);var a=o.sobj._globalIdStorageFind(o.sid);if(a.childsCount){var h=o.copy().set("tid",o.nid).set("dropmode",o.target=="grid"?"sibling":"child");for(var e=0;e<a.childsCount;e++){o.tobj._dragRoutine(h.set("sid",a.childNodes[e].id));if(o.mode=="move"){e--}}h.close()}}else{o.tobj._copyUserData(o);this.callEvent("onRowAdded",[o.nid]);if((o.source=="treeGrid")){if(o.sobj==o.tobj){k._xml=o.sobj.rowsAr[o.sid]._xml}var g=o.sobj._h2.get[o.sid];if((g)&&(g.childs.length)){var h=o.copy().set("tid",o.nid);if(o.target=="grid"){h.set("dropmode","sibling")}else{if(!h.tobj.kidsXmlFile){h.tobj.openItem(o.tid)}h.set("dropmode","child")}var b=g.childs.length;if(!h.tobj.kidsXmlFile){for(var e=0;e<b;e++){o.sobj.render_row_tree(null,g.childs[e].id);o.tobj._dragRoutine(h.set("sid",g.childs[e].id));if(b!=g.childs.length){e--;b=g.childs.length}}}h.close()}}}if(o.mode=="move"){o.sobj[(o.source=="tree")?"deleteItem":"deleteRow"](o.sid);if((o.sobj==o.tobj)&&(!o.tobj.rowsAr[o.sid])){o.tobj.changeRowId(o.nid,o.sid);o.nid=o.sid}}};dhtmlXGridObject.prototype.gridToGrid=function(e,a,c){var g=new Array();for(var b=0;b<a.hdr.rows[0].cells.length;b++){g[b]=a.cells(e,b).getValue()}return g};dhtmlXGridObject.prototype.checkParentLine=function(a,b){if((!this._h2)||(!b)||(!a)){return false}if(a.id==b){return true}else{return this.checkParentLine(a.parent,b)}};dhtmlXGridObject.prototype._dragIn=function(h,e,b,j){if(!this.dADTempOff){return 0}var a=this.isTreeGrid();var g=e.parentNode.idd?e.parentNode:e.parentObject;if(this._drag_validate){if(h.parentNode==e.parentNode){return 0}if((a)&&(this==g.grid)&&((this.checkParentLine(this._h2.get[h.parentNode.idd],e.parentNode.idd)))){return 0}}if(!this.callEvent("onDragIn",[g.idd||g.id,h.parentNode.idd,g.grid||g.treeNod,(h.grid||h.parentNode.grid)])){return this._setMove(h,b,j,true)}this._setMove(h,b,j);if((a)&&(h.parentNode.expand!="")){var c=this;this._autoOpenTimer=window.setTimeout(function(){c._autoOpenItem(null,c);c=null},1000);this._autoOpenId=h.parentNode.idd}else{if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}}return h};dhtmlXGridObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(b){this._clearMove();var a=b.parentNode.parentObject?b.parentObject.id:b.parentNode.idd;this.callEvent("onDragOut",[a]);if(this._autoOpenTimer){window.clearTimeout(this._autoOpenTimer)}};dhtmlXGridObject.prototype._setMove=function(h,b,k,g){if(!h.parentNode.idd){return}var c=dhx4.absTop(h);var a=dhx4.absTop(this.objBox);if((c-a)>(parseInt(this.objBox.offsetHeight)-50)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20}if((c-a+parseInt(this.objBox.scrollTop))<(parseInt(this.objBox.scrollTop)+30)){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20}if(g){return 0}if(this.dadmode==2){var j=k-c+(document.body.scrollTop||document.documentElement.scrollTop)-2-h.offsetHeight/2;if((Math.abs(j)-h.offsetHeight/6)>0){this.dadmodec=1;if(j<0){this.dadmodefix=-1}else{this.dadmodefix=1}}else{this.dadmodec=0}}else{this.dadmodec=this.dadmode}if(this.dadmodec){if(!this._sdrgc){this._createSdrgc()}this._sdrgc.style.display="block";this._sdrgc.style.top=c-a+parseInt(this.objBox.scrollTop)+((this.dadmodefix>=0)?h.offsetHeight:0)+"px"}else{this._llSelD=h;if(h.parentNode.tagName=="TR"){for(var e=0;e<h.parentNode.childNodes.length;e++){var j=h.parentNode.childNodes[e];j._bgCol=j.style.backgroundColor;j.style.backgroundColor="#FFCCCC"}}}};dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc){this._sdrgc.style.display="none"}if((this._llSelD)&&(this._llSelD.parentNode.tagName=="TR")){var b=this._llSelD.parentNode.childNodes;for(var a=0;a<b.length;a++){b[a].style.backgroundColor=b[a]._bgCol}}this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(a){var b=this.cells(a,0).getValue();return b};dhtmlXGridObject.prototype._copyUserData=function(e){if(!e.tobj.UserData[e.nid]||e.tobj!=e.sobj){e.tobj.UserData[e.nid]=new Hashtable()}else{return}var b=e.sobj.UserData[e.sid];var a=e.tobj.UserData[e.nid];if(b){a.keys=a.keys.concat(b.keys);a.values=a.values.concat(b.values)}};dhtmlXGridObject.prototype.moveRow=function(c,e,a,b){switch(e){case"row_sibling":this.moveRowTo(c,a,"move","sibling",this,b);break;case"up":this.moveRowUp(c);break;case"down":this.moveRowDown(c);break}};dhtmlXGridObject.prototype._nonTrivialNode=function(n,m,j,k,c){if((n.callEvent)&&(!c)){if(!n.callEvent("onDrag",[k.idd,m.id,(j?j.id:null),this,n])){return false}}var l=k.idd;var a=l;while(n._idpull[a]){a+=(new Date()).getMilliseconds().toString()}var g=(this.isTreeGrid()?this.getItemImage(l):"");if(j){for(e=0;e<m.childsCount;e++){if(m.childNodes[e]==j){break}}if(e!=0){j=m.childNodes[e-1]}else{st="TOP";j=""}}var b=n._attachChildNode(m,a,this.gridToTreeElement(n,a,l),"",g,g,g,"","",j);if(this._h2){var h=this._h2.get[l];if(h.childs.length){for(var e=0;e<h.childs.length;e++){this._nonTrivialNode(n,b,0,this.rowsAr[h.childs[e].id],1);if(!this.dpcpy){e--}}}}if(!this.dpcpy){this.deleteRow(l)}if((n.callEvent)&&(!c)){n.callEvent("onDrop",[a,m.id,(j?j.id:null),this,n])}};dhtmlXGridObject.prototype.gridToTreeElement=function(b,c,a){return this.cells(a,0).getValue()};dhtmlXGridObject.prototype.treeToGridElement=function(e,g,a){var b=new Array();var h=this.cellType._dhx_find("tree");if(h==-1){h=0}for(var c=0;c<this.getColumnCount();c++){b[b.length]=(c!=h)?(e.getUserData(g,this.getColumnId(c))||""):e.getItemText(g)}return b};dhtmlXGridObject.prototype.moveRowTo=function(e,b,j,h,a,g){var k=new dragContext((a||this).isTreeGrid()?"treeGrid":"grid",(g||this).isTreeGrid()?"treeGrid":"grid",j,h||"sibling",e,b,a||this,g||this);k.tobj._dragRoutine(k);k.close();return k.nid};dhtmlXGridObject.prototype.enableMercyDrag=function(a){this.dpcpy=dhx4.s2b(a)};dhtmlXGridObject.prototype.toPDF=function(e,m,r,o,k,w){var g={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(g.row===null||g.col===-1){g=false}else{if(g.row){for(var s=0;s<g.row.length;s++){if(g.row[s]){var b=this.cells(g.row[s],g.col).cell;b.parentNode.className=b.parentNode.className.replace(" rowselected","");b.className=b.className.replace(" cellselected","");g.row[s]=b}}}else{g=false}}m=m||"color";var t=m=="full_color";var a=this;a._asCDATA=true;if(typeof(w)==="undefined"){this.target=' target="_blank"'}else{this.target=w}eXcell_ch.prototype.getContent=function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};function v(z){var H=[];for(var E=1;E<a.hdr.rows.length;E++){H[E]=[];for(var D=0;D<a._cCount;D++){var J=a.hdr.rows[E].childNodes[D];if(!H[E][D]){H[E][D]=[0,0]}if(J){H[E][J._cellIndexS]=[J.colSpan,J.rowSpan]}}}var F="<rows profile='"+z+"'";if(r){F+=" header='"+r+"'"}if(o){F+=" footer='"+o+"'"}F+="><head>"+a._serialiseExportConfig(H).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(var E=2;E<a.hdr.rows.length;E++){var x=0;var M=a.hdr.rows[E];var I="";for(var D=0;D<a._cCount;D++){if((a._srClmn&&!a._srClmn[D])||(a._hrrar[D]&&(!a._fake||D>=a._fake.hdrLabels.length))){x++;continue}var L=H[E][D];var K=((L[0]&&L[0]>1)?' colspan="'+L[0]+'" ':"");if(L[1]&&L[1]>1){K+=' rowspan="'+L[1]+'" ';x=-1}var y="";var C=M;if(a._fake&&D<a._fake._cCount){C=a._fake.hdr.rows[E]}for(var A=0;A<C.cells.length;A++){if(C.cells[A]._cellIndexS==D){if(C.cells[A].getElementsByTagName("SELECT").length){y=""}else{y=_isIE?C.cells[A].innerText:C.cells[A].textContent}y=y.replace(/[ \n\r\t\xA0]+/," ");break}}if(!y||y==" "){x++}I+="<column"+K+"><![CDATA["+y+"]]></column>"}if(x!=a._cCount){F+="\n<columns>"+I+"</columns>"}}F+="</head>\n";F+=l();return F}function c(){var x=[];if(k){for(var y=0;y<k.length;y++){x.push(q(a.getRowIndex(k[y])))}}else{for(var y=0;y<a.getRowsNum();y++){x.push(q(y))}}return x.join("\n")}function l(){var z=["<foot>"];if(!a.ftr){return""}for(var A=1;A<a.ftr.rows.length;A++){z.push("<columns>");var E=a.ftr.rows[A];for(var y=0;y<a._cCount;y++){if(a._srClmn&&!a._srClmn[y]){continue}if(a._hrrar[y]&&(!a._fake||y>=a._fake.hdrLabels.length)){continue}for(var x=0;x<E.cells.length;x++){var D="";var C="";if(E.cells[x]._cellIndexS==y){D=_isIE?E.cells[x].innerText:E.cells[x].textContent;D=D.replace(/[ \n\r\t\xA0]+/," ");if(E.cells[x].colSpan&&E.cells[x].colSpan!=1){C=" colspan='"+E.cells[x].colSpan+"' "}if(E.cells[x].rowSpan&&E.cells[x].rowSpan!=1){C=" rowspan='"+E.cells[x].rowSpan+"' "}break}}z.push("<column"+C+"><![CDATA["+D+"]]></column>")}z.push("</columns>")}z.push("</foot>");return z.join("\n")}function j(y,x){return(window.getComputedStyle?(window.getComputedStyle(y,null)[x]):(y.currentStyle?y.currentStyle[x]:null))||""}function q(A){if(!a.rowsBuffer[A]){return""}var x=a.render_row(A);if(x.style.display=="none"){return""}var y=a.isTreeGrid()?' level="'+a.getLevel(x.idd)+'"':"";var F="<row"+y+">";for(var D=0;D<a._cCount;D++){if(((!a._srClmn)||(a._srClmn[D]))&&(!a._hrrar[D]||(a._fake&&D<a._fake.hdrLabels.length))){var K=a.cells(x.idd,D);if(t){var C=j(K.cell,"color");var J=j(K.cell,"backgroundColor");var I=j(K.cell,"font-weight")||j(K.cell,"fontWeight");var E=j(K.cell,"font-style")||j(K.cell,"fontStyle");var H=j(K.cell,"text-align")||j(K.cell,"textAlign");var z=j(K.cell,"font-family")||j(K.cell,"fontFamily");if(J=="transparent"||J=="rgba(0, 0, 0, 0)"){J="rgb(255,255,255)"}F+="<cell bgColor='"+J+"' textColor='"+C+"' bold='"+I+"' italic='"+E+"' align='"+H+"' font='"+z+"'>"}else{F+="<cell>"}F+="<![CDATA["+(K.getContent?K.getContent():K.getTitle())+"]]></cell>"}}return F+"</row>"}function n(){var x="</rows>";return x}var u=document.createElement("div");u.style.display="none";document.body.appendChild(u);var h="form_"+a.uid();u.innerHTML='<form id="'+h+'" method="post" action="'+e+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>';document.getElementById(h).firstChild.value=encodeURIComponent(v(m).replace("\u2013","-")+c()+n());document.getElementById(h).submit();u.parentNode.removeChild(u);a=null;if(g&&g.row.length){for(var s=0;s<g.row.length;s++){g.row[s].parentNode.className+=" rowselected";if(g.row.length==1){g.row[s].className+=" cellselected"}}}g=null};dhtmlXGridObject.prototype._serialiseExportConfig=function(h){function g(j){if(typeof(j)!=="string"){return j}j=j.replace(/&/g,"&amp;");j=j.replace(/"/g,"&quot;");j=j.replace(/'/g,"&apos;");j=j.replace(/</g,"&lt;");j=j.replace(/>/g,"&gt;");return j}var b="<head>";for(var c=0;c<this.hdr.rows[0].cells.length;c++){if(this._srClmn&&!this._srClmn[c]){continue}if(this._hrrar[c]&&(!this._fake||c>=this._fake.hdrLabels.length)){continue}var e=this.fldSort[c];if(e=="cus"){e=this._customSorts[c].toString();e=e.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")}var m=h[1][c];var k=((m[1]&&m[1]>1)?' rowspan="'+m[1]+'" ':"")+((m[0]&&m[0]>1)?' colspan="'+m[0]+'" ':"");b+="<column "+k+" width='"+this.getColWidth(c)+"' align='"+this.cellAlign[c]+"' type='"+this.cellType[c]+"' hidden='"+((this.isColumnHidden&&this.isColumnHidden(c))?"true":"false")+"' sort='"+(e||"na")+"' color='"+(this.columnColor[c]||"")+"'"+(this.columnIds[c]?(" id='"+this.columnIds[c]+"'"):"")+">";if(this._asCDATA){b+="<![CDATA["+this.getColumnLabel(c)+"]]>"}else{b+=this.getColumnLabel(c)}var l=this.combos[c]?this.getCombo(c):null;if(l){for(var a=0;a<l.keys.length;a++){b+="<option value='"+g(l.keys[a])+"'><![CDATA["+l.values[a]+"]]></option>"}}b+="</column>"}return b+="</head>"};if(window.eXcell_sub_row_grid){window.eXcell_sub_row_grid.prototype.getContent=function(){return""}}dhtmlXGridObject.prototype.toExcel=function(a,e,j,h,b){if(!document.getElementById("ifr")){var g=document.createElement("iframe");g.style.display="none";g.setAttribute("name","dhx_export_iframe");g.setAttribute("src","");g.setAttribute("id","dhx_export_iframe");document.body.appendChild(g)}var c=' target="dhx_export_iframe"';this.toPDF(a,e,j,h,b,c)};dhtmlXGridObject.prototype.filterBy=function(c,e,b){if(this.isTreeGrid()){return this.filterTreeBy(c,e,b)}if(this._f_rowsBuffer){if(!b){this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer));if(this._fake){this._fake.rowsBuffer=this.rowsBuffer}}}else{this._f_rowsBuffer=[].concat(this.rowsBuffer)}if(!this.rowsBuffer.length){return}var g=true;this.dma(true);if(typeof(c)=="object"){for(var a=0;a<e.length;a++){this._filterA(c[a],e[a])}}else{this._filterA(c,e)}this.dma(false);if(this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<(this.currentPage-1)){this.changePage(0)}this._reset_view();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterA=function(b,c){if(c==""){return}var e=true;if(typeof(c)=="function"){e=false}else{c=(c||"").toString().toLowerCase()}if(!this.rowsBuffer.length){return}for(var a=this.rowsBuffer.length-1;a>=0;a--){if(e?(this._get_cell_value(this.rowsBuffer[a],b).toString().toLowerCase().indexOf(c)==-1):(!c.call(this,this._get_cell_value(this.rowsBuffer[a],b),this.rowsBuffer[a].idd))){this.rowsBuffer.splice(a,1)}}};dhtmlXGridObject.prototype.getFilterElement=function(a){if(!this.filters){return}for(var b=0;b<this.filters.length;b++){if(this.filters[b][1]==a){return(this.filters[b][0].combo||this.filters[b][0])}}return null};dhtmlXGridObject.prototype.collectValues=function(e){var q=this.dhxevs.data.oncollectvalues;if(q){var m=true;for(var n in q){var s=q[n].call(this,e);if(s!==true){m=s||m}}if(m!==true){return m}}if(this.isTreeGrid()){return this.collectTreeValues(e)}this.dma(true);this._build_m_order();e=this._m_order?this._m_order[e]:e;var k={};var h=[];var b=this._f_rowsBuffer||this.rowsBuffer;for(var g=0;g<b.length;g++){var a=this._get_cell_value(b[g],e);if(a&&(!b[g]._childIndexes||b[g]._childIndexes[e]!=b[g]._childIndexes[e-1])){k[a]=true}}this.dma(false);var l=(this.combos[e]||(this._col_combos&&this._col_combos[e]?this._col_combos[e]:((this._sub_trees&&this._sub_trees[e])?this._sub_trees[e][0]:false)));for(var j in k){if(k[j]===true){if(l){if(l.get&&l.get(j)){j=l.get(j)}else{if(l.getOption&&l.getOption(j)){j=l.getOption(j).text}else{if(l.getItemText){var o=l.getItemText(j);var r=this._sub_trees[e][1]=this._sub_trees[e][1]||{};r[o]=j;j=o}}}}h.push(j)}}return h.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var a=0;a<this._c_order.length;a++){this._m_order[this._c_order[a]]=a}}};dhtmlXGridObject.prototype.filterByAll=function(){var e=[];var c=[];this._build_m_order();for(var g=0;g<this.filters.length;g++){var j=this._m_order?this._m_order[this.filters[g][1]]:this.filters[g][1];if(j>=this._cCount){continue}c.push(j);var k=this.filters[g][0].old_value=this.filters[g][0].value;if(this.filters[g][0]._filter){k=this.filters[g][0]._filter()}var h;if(typeof k!="function"&&(h=(this.combos[j]||((this._col_combos&&this._col_combos[j])?this._col_combos[j]:((this._sub_trees&&this._sub_trees[j])?this._sub_trees[j][1]:false))))){if(h.values){j=h.values._dhx_find(k);k=(j==-1)?k:h.keys[j]}else{if(h.getOptionByLabel){k=(h.getOptionByLabel(k)?h.getOptionByLabel(k).value:k)}else{k=h[k]}}}e.push(k)}if(!this.callEvent("onFilterStart",[c,e])){return}this.filterBy(c,e);if(this._cssEven){this._fixAlterCss()}this.callEvent("onFilterEnd",[this.filters]);if(this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length){this._f_rowsBuffer=null}};dhtmlXGridObject.prototype.makeFilter=function(g,c,b){if(!this.filters){this.filters=[]}if(typeof(g)!="object"){g=document.getElementById(g)}if(!g){return}var a=this;if(!g.style.width){g.style.width="90%"}if(g.tagName=="SELECT"){this.filters.push([g,c]);this._loadSelectOptins(g,c);g.onchange=function(){a.filterByAll()};if(_isIE){g.style.marginTop="1px"}this.attachEvent("onEditCell",function(j,h,k){this._build_m_order();if(j==2&&this.filters&&(this._m_order?(k==this._m_order[c]):(k==c))){this._loadSelectOptins(g,c)}return true})}else{if(g.tagName=="INPUT"){this.filters.push([g,c]);g.old_value=g.value="";g.onkeydown=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(g.value!=g.old_value){a.filterByAll();g.old_value=g.value}},500)}}else{if(g.tagName=="DIV"){this.filters.push([g,c]);g.style.padding="0px";g.style.margin="0px";if(!window.dhx_globalImgPath){window.dhx_globalImgPath=this.imgURL}var e=new dhtmlXCombo(g,"_filter","90%");e.filterSelfA=e.filterSelf;e.filterSelf=function(){if(this.getSelectedIndex()==0){this.setComboText("")}this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(false)};e.enableFilteringMode(true);g.combo=e;g.value="";this._loadComboOptins(g,c);e.attachEvent("onChange",function(){g.value=e.getSelectedValue();if(g.value===null){g.value=""}a.filterByAll()})}}}if(g.parentNode){g.parentNode.className+=" filter"}this._filters_ready()};dhtmlXGridObject.prototype.findCell=function(h,k,e,g){var g=g||(function(l,j){return j.toString().toLowerCase().indexOf(l)!=-1});if(g===true){g=function(l,j){return j.toString().toLowerCase()==l}}var c=new Array();h=h.toString().toLowerCase();if(typeof e!="number"){e=e?1:0}if(!this.rowsBuffer.length){return c}for(var b=(k||0);b<this._cCount;b++){if(this._h2){this._h2.forEachChild(0,function(j){if(e&&c.length==e){return c}if(g(h,this._get_cell_value(j.buff,b))){c.push([j.id,b])}},this)}else{for(var a=0;a<this.rowsBuffer.length;a++){if(g(h,this._get_cell_value(this.rowsBuffer[a],b))){c.push([this.rowsBuffer[a].idd,b]);if(e&&c.length==e){return c}}}}if(typeof(k)!="undefined"){return c}}return c};dhtmlXGridObject.prototype.makeSearch=function(e,c,a){if(typeof(e)!="object"){e=document.getElementById(e)}if(!e){return}var b=this;if(e.tagName=="INPUT"){e.onkeypress=function(){if(this._timer){window.clearTimeout(this._timer)}this._timer=window.setTimeout(function(){if(e.value==""){return}var g=b.findCell(e.value,c,true,a);if(g.length){if(b._h2){b.openItem(g[0][0])}b.selectCell(b.getRowIndex(g[0][0]),(c||0))}},500)}}if(e.parentNode){e.parentNode.className+=" filter"}};dhtmlXGridObject.prototype._loadSelectOptins=function(g,j){var a=this.collectValues(j);var b=g.value;g.innerHTML="";g.options[0]=new Option("","");var h=this._filter_tr?this._filter_tr[j]:null;for(var e=0;e<a.length;e++){g.options[g.options.length]=new Option(h?h(a[e]):a[e],a[e])}g.value=b};dhtmlXGridObject.prototype.setSelectFilterLabel=function(b,a){if(!this._filter_tr){this._filter_tr=[]}this._filter_tr[b]=a};dhtmlXGridObject.prototype._loadComboOptins=function(e,h){if(!e.combo){return}var a=this.collectValues(h);e.combo.clearAll();var g=[["",""]];for(var b=0;b<a.length;b++){g.push([a[b],a[b]])}e.combo.addOption(g)};dhtmlXGridObject.prototype.refreshFilters=function(){if(!this.filters){return}for(var a=0;a<this.filters.length;a++){switch(this.filters[a][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[a]);break;case"div":this._loadComboOptins.apply(this,this.filters[a]);break}}};dhtmlXGridObject.prototype._filters_ready=function(b,a){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onSyncApply",this.refreshFilters);this.attachEvent("onRowCreated",function(g,e){if(this._f_rowsBuffer){for(var c=0;c<this._f_rowsBuffer.length;c++){if(this._f_rowsBuffer[c].idd==g){return this._f_rowsBuffer[c]=e}}}});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;if(!this.hdr.rows.length){this.filters=[]}});this.attachEvent("onSetSizes",this._filters_resize_combo);this.attachEvent("onResize",this._filters_resize_combo);this._filters_ready=function(){}};dhtmlXGridObject.prototype._filters_resize_combo=function(){if(!this.filters){return}for(var a=0;a<this.filters.length;a++){if(this.filters[a][0].combo!=null){this.filters[a][0].combo.setSize(Math.round(this.filters[a][0].offsetWidth*90/100))}}return true};dhtmlXGridObject.prototype._in_header_text_filter=function(b,a){b.innerHTML="<input type='text'>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(b,a){b.innerHTML="<input type='text'>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)};this.makeFilter(b.firstChild,a);b.firstChild._filter=function(){if(b.firstChild.value==""){return""}return function(c){return(c.toString().toLowerCase().indexOf(b.firstChild.value.toLowerCase())==0)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(b,a){b.innerHTML="<select></select>";b.onclick=function(c){(c||event).cancelBubble=true;return false};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(c,b){c.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";c.onclick=function(g){(g||event).cancelBubble=true;return false};this.makeFilter(c.firstChild,b);var a=this.combos;c.firstChild._filter=function(){var e=c.firstChild.value;if(!e){return""}if(a[b]){e=a[b].keys[a[b].values._dhx_find(e)]}e=e.toLowerCase();return function(g){return(g.toString().toLowerCase()==e)}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(b,a){b.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>";b.onselectstart=function(){return(event.cancelBubble=true)};b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};this.makeFilter(b.firstChild,a)};dhtmlXGridObject.prototype._search_common=function(b,a){b.innerHTML="<input type='text' style='width:90%; '>";b.onclick=b.onmousedown=function(c){(c||event).cancelBubble=true;return true};b.onselectstart=function(){return(event.cancelBubble=true)}};dhtmlXGridObject.prototype._in_header_text_search=function(c,b,a){this._search_common(c,b);this.makeSearch(c.firstChild,b)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(b,a){this._search_common(b,a);this.makeSearch(b.firstChild,a,true)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(b,a){this._in_header_text_filter.call(this,b,a);b.firstChild._filter=function(){var c=this.value;var g;var j="==";var e=parseFloat(c.replace("=",""));var h=null;if(c){if(c.indexOf("..")!=-1){c=c.split("..");e=parseFloat(c[0]);h=parseFloat(c[1]);return function(k){if(k>=e&&k<=h){return true}return false}}g=c.match(/>=|<=|>|</);if(g){j=g[0];e=parseFloat(c.replace(j,""))}return Function("v"," if (v "+j+" "+e+" ) return true; return false;")}return""}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(e,b,g){e.innerHTML=g[0]+"<input type='checkbox' />"+g[1];var a=this;e.getElementsByTagName("input")[0].onclick=function(h){a._build_m_order();var c=a._m_order?a._m_order[b]:b;var k=this.checked?1:0;a.forEachRowA(function(l){var j=this.cells(l,c);if(j.isCheckbox()&&!j.isDisabled()){j.setValue(k);j.cell.wasChanged=true}this.callEvent("onEditCell",[1,l,c,k]);this.callEvent("onCheckbox",[l,c,k]);this.callEvent("onCheck",[l,c,k])});(h||event).cancelBubble=true}};dhtmlXGridObject.prototype._in_header_stat_total=function(b,a,g){var e=function(){var l=0;this._build_m_order();var k=this._m_order?this._m_order[a]:a;for(var h=0;h<this.rowsBuffer.length;h++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[h],k));l+=isNaN(c)?0:c}return this._maskArr[k]?this._aplNF(l,k):(Math.round(l*100)/100)};this._stat_in_header(b,e,a,g,g)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(g,e,m){var l=m[1].split(":");m[1]="";for(var b=0;b<l.length;b++){l[b]=parseInt(l[b])}var h=function(){var q=0;for(var o=0;o<this.rowsBuffer.length;o++){var n=1;for(var c=0;c<l.length;c++){n*=parseFloat(this._get_cell_value(this.rowsBuffer[o],l[c]))}q+=isNaN(n)?0:n}return this._maskArr[e]?this._aplNF(q,e):(Math.round(q*100)/100)};var a=[];for(var j=0;j<l.length;j++){a[l[j]]=true}this._stat_in_header(g,h,a,m,m)};dhtmlXGridObject.prototype._in_header_stat_max=function(b,a,g){var e=function(){this._build_m_order();var h=this._m_order?this._m_order[a]:a;var k=-999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var c=0;c<this.rowsBuffer.length;c++){k=Math.max(k,parseFloat(this._get_cell_value(this.rowsBuffer[c],h)))}return this._maskArr[a]?this._aplNF(k,a):k};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_min=function(b,a,g){var e=function(){this._build_m_order();var h=this._m_order?this._m_order[a]:a;var k=999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var c=0;c<this.rowsBuffer.length;c++){k=Math.min(k,parseFloat(this._get_cell_value(this.rowsBuffer[c],h)))}return this._maskArr[a]?this._aplNF(k,a):k};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_average=function(b,a,g){var e=function(){this._build_m_order();var k=this._m_order?this._m_order[a]:a;var m=0;var l=0;if(this.getRowsNum()==0){return"&nbsp;"}for(var h=0;h<this.rowsBuffer.length;h++){var c=parseFloat(this._get_cell_value(this.rowsBuffer[h],k));if(!isNaN(c)){m+=c;l++}}return this._maskArr[a]?this._aplNF(m/l,a):(Math.round(m/l*100)/100)};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._in_header_stat_count=function(b,a,g){var e=function(){return this.getRowsNum()};this._stat_in_header(b,e,a,g)};dhtmlXGridObject.prototype._stat_in_header=function(b,e,a,j){var g=this;var h=function(){this.dma(true);b.innerHTML=(j[0]?j[0]:"")+e.call(this)+(j[1]?j[1]:"");this.dma(false);this.callEvent("onStatReady",[])};if(!this._stat_events){this._stat_events=[];this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var k=0;k<this._stat_events.length;k++){for(var c=0;c<4;c++){this.detachEvent(this._stat_events[k][c])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent("onGridReconstructed",h),this.attachEvent("onXLE",h),this.attachEvent("onFilterEnd",h),this.attachEvent("onEditCell",function(c,l,k){if(c==2&&(k==a||(a&&a[k]))){h.call(this)}return true})]);b.innerHTML=""};dhtmlXGridObject.prototype.loadCSVFile=function(b,a){this.load(b,a,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(a){this._csvAID=dhx4.s2b(a)};dhtmlXGridObject.prototype.enableCSVHeader=function(a){this._csvHdr=dhx4.s2b(a)};dhtmlXGridObject.prototype.setCSVDelimiter=function(a){this.csv.cell=a};dhtmlXGridObject.prototype._csvAID=true;dhtmlXGridObject.prototype.loadCSVString=function(a){this.parse(a,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(l){this.editStop();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText||l){this._agetm="getTitle"}else{this._agetm="getValue"}}var h=[];if(this._csvHdr){for(var g=1;g<this.hdr.rows.length;g++){var b=[];for(var k=0;k<this._cCount;k++){if((!this._srClmn)||(this._srClmn[k])){b.push(this.getColumnLabel(k,g-1))}}h.push(this.csvParser.str(b,this.csv.cell,this.csv.row))}}var k=0;var e=this.rowsBuffer.length;for(k;k<e;k++){var c=this._serializeRowToCVS(null,k);if(c!=""){h.push(c)}}return this.csvParser.block(h,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(a,l,c,j){var k=new Array();if(!a){a=this.render_row(l);if(this._fake&&!this._fake.rowsAr[a.idd]){this._fake.render_row(l)}}if(!this._csvAID){k[k.length]=a.idd}c=c||0;j=j||this._cCount;var n=false;var e=c;while(a.childNodes[c]._cellIndex>e&&c){c--}for(var m=c;e<j;m++){if(!a.childNodes[m]){break}var b=a.childNodes[m]._cellIndex;if(((!this._srClmn)||(this._srClmn[b]))&&(!this._serialize_visible||!this._hrrar[b])){var g=a.childNodes[m];var h=this.cells(a.idd,b);while(e!=b){e++;k.push("");if(e>=j){break}}if(e>=j){break}e++;if(h.cell){zxVal=h[this._agetm]()}else{zxVal=""}if((this._chAttr)&&(h.wasChanged())){n=true}k[k.length]=((zxVal===null)?"":zxVal);if(this._ecspn&&g.colSpan&&g.colSpan>1){g=g.colSpan-1;for(var o=0;o<g;o++){k[k.length]="";e++}}}else{e++}}if((this._onlChAttr)&&(!n)){return""}return this.csvParser.str(k,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(a){if(window.clipboardData){window.clipboardData.setData("Text",a)}else{(new Clipboard()).copy(a)}};dhtmlXGridObject.prototype.fromClipBoard=function(){if(window.clipboardData){return window.clipboardData.getData("Text")}else{return(new Clipboard()).paste()}};dhtmlXGridObject.prototype.cellToClipboard=function(c,b){if((!c)||(!b&&b!==0)){if(!this.selectedRows[0]){return}c=this.selectedRows[0].idd;b=this.cell._cellIndex}var a=this.cells(c,b);this.toClipBoard(((a.getLabel?a.getLabel():a.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(c,b){if((!c)||(!b)){if(!this.selectedRows[0]){return}c=this.selectedRows[0].idd;b=this.cell._cellIndex}var a=this.cells(c,b);a[a.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(e){var a="";if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=!this._fake;if(e){a=this._serializeRowToCVS(this.getRowById(e))}else{var c=[];for(var b=0;b<this.selectedRows.length;b++){c[c.length]=this._serializeRowToCVS(this.selectedRows[b]);a=this.csvParser.block(c,this.csv.row)}}this._serialize_visible=false;this.toClipBoard(a)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(g){var a=this.fromClipBoard();if(!a){return}if(g){var e=this.getRowById(g)}else{var e=this.selectedRows[0]}if(!e){return}var h=this.csvParser;a=h.unblock(a,this.csv.cell,this.csv.row)[0];if(!this._csvAID){a.splice(0,1)}for(var c=0;c<a.length;c++){var b=this.cells3(e,c);b[b.setImage?"setLabel":"setValue"](a[c])}};dhtmlXGridObject.prototype.csvParser={block:function(a,b){return a.join(b)},unblock:function(h,a,g){var e=(h||"").split(g);for(var b=0;b<e.length;b++){e[b]=(e[b]||"").split(a)}var c=e.length-1;if(e[c].length==1&&e[c][0]==""){e.splice(c,1)}return e},str:function(b,a,c){return b.join(a)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(a,b){return a.join(b)},unblock:function(k,n,q){var c=[[]];var b=0;if(!k){return c}var l=/^[ ]*"/;var j=/"[ ]*$/;var a=new RegExp(".*"+q+".*$");var g=k.split(n);for(var e=0;e<g.length;e++){if(g[e].match(l)){var o=g[e].replace(l,"");while(!g[e].match(j)){e++;o+=g[e]}c[b].push(o.replace(j,"").replace(this._quote_esc,'"'))}else{if(g[e].match(a)){var h=g[e].indexOf(q);c[b].push(g[e].substr(0,h));b++;c[b]=[];g[e]=g[e].substr(h+1);e--}else{if(g[e]||e!=g.length-1){c[b].push(g[e])}}}}var m=c.length-1;if(m>0&&!c[m].length){c.splice(m,1)}return c},str:function(c,a,e){for(var b=0;b<c.length;b++){c[b]='"'+c[b].replace(this._quote,'""')+'"'}return c.join(a)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}var c=this.csvParser.unblock(a,this.csv.cell,this.csv.row);for(var b=0;b<c.length;b++){if(c[b]){a=c[b];if(!a.length){continue}if(this._csvAID){this.addRow(this.getRowsNum()+2,a)}else{if(this.rowsAr[a[0]]){a[0]=this.uid()}this.addRow(a[0],a.slice(1))}}}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var a=this.fromClipBoard();if(!a){return}this.loadCSVString(a)};dhtmlXGridObject.prototype.getXLS=function(h){if(!this.xslform){this.xslform=document.createElement("FORM");this.xslform.action=(h||"")+"xls.php";this.xslform.method="post";this.xslform.target=(_isIE?"_blank":"");document.body.appendChild(this.xslform);var g=document.createElement("INPUT");g.type="hidden";g.name="csv";this.xslform.appendChild(g);var e=document.createElement("INPUT");e.type="hidden";e.name="csv_header";this.xslform.appendChild(e)}var j=this.serializeToCSV();this.xslform.childNodes[0].value=j;var c=[];var a=this._cCount;for(var b=0;b<a;b++){c.push(this.getHeaderCol(b))}c=c.join(",");this.xslform.childNodes[1].value=c;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(r,b){var n="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  </style>";var y=null;if(this._fake){y=[].concat(this._hrrar);for(var x=0;x<this._fake._cCount;x++){this._hrrar[x]=null}}var m=document.location.port;var o=document.location.hostname;n+="<base  href='"+(document.location.protocol+"//"+o+(m?(":"+m):"")+document.location.pathname)+"'></base>";if(!this.parentGrid){n+=(r||"")}n+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var q=Math.max(this.rowsBuffer.length,this.rowsCol.length);var l=this._cCount;var s=this._printWidth();n+='<tr class="header_row_1">';for(var x=0;x<l;x++){if(this._hrrar&&this._hrrar[x]){continue}var g=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(x)]:x];var a=(g.colSpan||1);var D=(g.rowSpan||1);for(var w=1;w<a;w++){s[x]+=s[w]}n+='<td rowspan="'+D+'" width="'+s[x]+'%" style="background-color:lightgrey;" colspan="'+a+'">'+this.getHeaderCol(x)+"</td>";x+=a-1}n+="</tr>";for(var x=2;x<this.hdr.rows.length;x++){if(_isIE){n+="<tr style='background-color:lightgrey' class='header_row_"+x+"'>";var e=this.hdr.rows[x].childNodes;for(var w=0;w<e.length;w++){if(!this._hrrar||!this._hrrar[e[w]._cellIndex]){n+=e[w].outerHTML}}n+="</tr>"}else{n+="<tr class='header_row_"+x+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[x].innerHTML:"")+this.hdr.rows[x].innerHTML+"</tr>"}}for(var x=0;x<q;x++){n+="<tr>";if(this.rowsCol[x]&&this.rowsCol[x]._cntr){n+=this.rowsCol[x].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";continue}if(this.rowsCol[x]&&this.rowsCol[x].style.display=="none"){continue}var k;if(this.rowsCol[x]){k=this.rowsCol[x].idd}else{if(this.rowsBuffer[x]){k=this.rowsBuffer[x].idd}else{continue}}for(var w=0;w<l;w++){if(this._hrrar&&this._hrrar[w]){continue}if(this.rowsAr[k]&&this.rowsAr[k].tagName=="TR"){var C=this.cells(k,w);if(C._setState){var t=""}else{if(C.getContent){t=C.getContent()}else{if(C.getImage||C.combo){var t=C.cell.innerHTML}else{var t=C.getValue()}}}}else{var t=this._get_cell_value(this.rowsBuffer[x],w)}var u=this.columnColor[w]?"background-color:"+this.columnColor[w]+";":"";var v=this.cellAlign[w]?"text-align:"+this.cellAlign[w]+";":"";var z=C.getAttribute("colspan");n+='<td style="'+u+v+'" '+(z?'colSpan="'+z+'"':"")+">"+(t===""?"&nbsp;":t)+"</td>";if(z){w+=z-1}}n+="</tr>";if(this.rowsCol[x]&&this.rowsCol[x]._expanded){var h=this.cells4(this.rowsCol[x]._expanded.ctrl);if(h.getSubGrid){n+='<tr><td colspan="'+l+'">'+h.getSubGrid().printView()+"</td></tr>"}else{n+='<tr><td colspan="'+l+'">'+this.rowsCol[x]._expanded.innerHTML+"</td></tr>"}}}if(this.ftr){for(var x=1;x<this.ftr.childNodes[0].rows.length;x++){n+="<tr style='background-color:lightgrey'>"+((this._fake)?this._fake.ftr.childNodes[0].rows[x].innerHTML:"")+this.ftr.childNodes[0].rows[x].innerHTML+"</tr>"}}n+="</table>";if(this.parentGrid){return n}n+=(b||"");var A=window.open("","_blank");A.document.write(n);A.document.write("<script>window.onerror=function(){return true;}<\/script>");A.document.close();if(this._fake){this._hrrar=y}};dhtmlXGridObject.prototype._printWidth=function(){var g=[];var e=0;for(var c=0;c<this._cCount;c++){var a=this.getColWidth(c);g.push(a);e+=a}var j=[];var b=0;for(var c=0;c<g.length;c++){var h=Math.floor((g[c]/e)*100);b+=h;j.push(h)}j[j.length-1]+=100-b;return j};dhtmlXGridObject.prototype.enableBlockSelection=function(c){if(typeof this._bs_mode=="undefined"){var a=this;this.obj.onmousedown=function(g){if(a._bs_mode){a._OnSelectionStart((g||event),this)}return true};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){a._HideSelection();return true});this.attachEvent("onGridReconstructed",function(){a._HideSelection();return true});this.attachEvent("onFilterEnd",this._HideSelection)}if(c===false){this._bs_mode=false;return this._HideSelection()}else{this._bs_mode=true}if(!window.dhx4.isIPad){var b=this._clip_area=document.createElement("textarea");b.className="dhx_tab_ignore";b.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;";b.onkeydown=function(g){g=g||event;if(g.keyCode==86&&(g.ctrlKey||g.metaKey)){a.pasteBlockFromClipboard()}};document.body.insertBefore(this._clip_area,document.body.firstChild);dhtmlxEvent(this.entBox,"click",function(){if(!a.editor&&a._clip_area){a._clip_area.select()}})}};dhtmlXGridObject.prototype.forceLabelSelection=function(a){this._strictText=dhx4.s2b(a)};dhtmlXGridObject.prototype.selectBlock=function(e,c,b,a){c=this.getRowIndex(c);a=this.getRowIndex(a);this._CreateSelection(c,e);this._selectionArea=this._RedrawSelectionPos(this.cells2(c,e).cell,this.cells2(a,b).cell);this._ShowSelection()};dhtmlXGridObject.prototype._OnSelectionStart=function(c,e){var b=this;if(c.button==2){return}var g=c.srcElement||c.target;if(this.editor){if(g.tagName&&(g.tagName=="INPUT"||g.tagName=="TEXTAREA")){return}this.editStop()}b.setActive(true);var j=this.getPosition(this.obj);var a=c.clientX-j[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var h=c.clientY-j[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(a-4,h-4);if(g==this._selectionObj){this._HideSelection();this._startSelectionCell=null}else{while(g&&(!g.tagName||g.tagName.toLowerCase()!="td")){g=g.parentNode}this._startSelectionCell=g}if(this._startSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex])){return this._startSelectionCell=null}}this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(k){if(b._blsTimer){window.clearTimeout(b._blsTimer)}};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[a,h];this._selectionObj.onmousemove=this.obj.onmousemove=function(k){k=k||c;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}b._OnSelectionMove(k)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(k){k=k||c;b._OnSelectionStop(k,this);return true};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return false}};dhtmlXGridObject.prototype._getCellByPos=function(a,e){a=a;if(this._fake){a+=this._fake.objBox.scrollWidth}e=e;var b=0;for(var c=0;c<this.obj.rows.length;c++){e-=this.obj.rows[c].offsetHeight;if(e<=0){b=this.obj.rows[c];break}}if(!b||!b.idd){return null}for(var c=0;c<this._cCount;c++){a-=this.getColWidth(c);if(a<=0){while(true){if(b._childIndexes&&b._childIndexes[c+1]==b._childIndexes[c]){b=b.previousSibling}else{return this.cells(b.idd,c).cell}}}}return null};dhtmlXGridObject.prototype._OnSelectionMove=function(g){var u=this;this._ShowSelection();var o=this.getPosition(this.obj);var k=g.clientX-o[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0));var j=g.clientY-o[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if((Math.abs(this._init_pos[0]-k)<5)&&(Math.abs(this._init_pos[1]-j)<5)){return this._HideSelection()}var r=this._endSelectionCell;if(this._startSelectionCell==null){this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(g.srcElement||g.target,"TD")}else{if(g.srcElement||g.target){if((g.srcElement||g.target).className=="dhtmlxGrid_selection"){this._endSelectionCell=(this._getCellByPos(k,j)||this._endSelectionCell)}else{var s=this.getFirstParentOfType(g.srcElement||g.target,"TD");if(s.parentNode.idd){this._endSelectionCell=s}}}}if(this._endSelectionCell){if(!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])){this._endSelectionCell=r}}var h=this.objBox.scrollLeft+this.objBox.clientWidth;var c=this.objBox.scrollTop+this.objBox.clientHeight;var m=this.objBox.scrollLeft;var l=this.objBox.scrollTop;var e=false;if(this._blsTimer){window.clearTimeout(this._blsTimer)}if(k+20>=h){this.objBox.scrollLeft=this.objBox.scrollLeft+20;e=true}else{if(k-20<m){this.objBox.scrollLeft=this.objBox.scrollLeft-20;e=true}}if(j+20>=c&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop+20;e=true}else{if(j-20<l&&!this._realfake){this.objBox.scrollTop=this.objBox.scrollTop-20;e=true}}this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(e){var q=g.clientX;var n=g.clientY;this._blsTimer=window.setTimeout(function(){u._OnSelectionMove({clientX:q,clientY:n})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(b){var a=this;if(this._blsTimer){window.clearTimeout(this._blsTimer)}this.obj.onmousedown=function(g){if(a._bs_mode){a._OnSelectionStart((g||b),this)}return true};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2){this._HideSelection()}else{var c=this.getFirstParentOfType(b.srcElement||b.target,"TD");if((!c)||(!c.parentNode.idd)){c=this._endSelectionCell}while(c&&(!c.tagName||c.tagName.toLowerCase()!="td")){c=c.parentNode}if(!c){return this._HideSelection()}this._stopSelectionCell=c;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(o,j){if(o.parentNode.grid!=j.parentNode.grid){return this._selectionArea}var m={};m.LeftTopCol=o._cellIndex;m.LeftTopRow=this.getRowIndex(o.parentNode.idd);m.RightBottomCol=j._cellIndex;m.RightBottomRow=this.getRowIndex(j.parentNode.idd);var e=o.offsetWidth;var c=o.offsetHeight;o=this.getPosition(o,this.obj);var q=j.offsetWidth;var k=j.offsetHeight;j=this.getPosition(j,this.obj);if(o[0]<j[0]){var g=o[0];var h=j[0]+q}else{var l=m.RightBottomCol;m.RightBottomCol=m.LeftTopCol;m.LeftTopCol=l;var g=j[0];var h=o[0]+e}if(o[1]<j[1]){var n=o[1];var a=j[1]+k}else{var l=m.RightBottomRow;m.RightBottomRow=m.LeftTopRow;m.LeftTopRow=l;var n=j[1];var a=o[1]+c}var r=h-g;var b=a-n;this._selectionObj.style.left=g+"px";this._selectionObj.style.top=n+"px";this._selectionObj.style.width=r+"px";this._selectionObj.style.height=b+"px";return m};dhtmlXGridObject.prototype._CreateSelection=function(a,c){if(this._selectionObj==null){var b=document.createElement("div");b.style.position="absolute";b.style.display="none";b.className="dhtmlxGrid_selection";this._selectionObj=b;this._selectionObj.onmousedown=function(g){g=g||event;if(g.button==2||(_isMacOS&&g.ctrlKey)){return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",g])}};this._selectionObj.oncontextmenu=function(g){(g||event).cancelBubble=true;return false};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=a+"px";this._selectionObj.style.top=c+"px";this._selectionObj.startX=a;this._selectionObj.startY=c};dhtmlXGridObject.prototype._ShowSelection=function(){if(this._selectionObj){this._selectionObj.style.display=""}};dhtmlXGridObject.prototype._HideSelection=function(){if(this._selectionObj){this._selectionObj.style.display="none"}this._selectionArea=null;if(this._clip_area){this._clip_area.value="";this._clip_area.blur()}};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(!this._clip_area){return}if(this._selectionArea!=null){var c=new Array();if(this._mathSerialization){this._agetm="getMathValue"}else{if(this._strictText){this._agetm="getTitle"}else{this._agetm="getValue"}}this._serialize_visible=true;for(var a=this._selectionArea.LeftTopRow;a<=this._selectionArea.RightBottomRow;a++){var b=this._serializeRowToCVS(this.rowsBuffer[a],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);if(!this._csvAID){c[c.length]=b.substr(b.indexOf(this.csv.cell)+1)}else{c[c.length]=b}}c=c.join(this._CSVRowDelimiter);this._clip_area.value=c;this._clip_area.select();this._serialize_visible=false}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(!this._clip_area){return}this._clip_area.select();var a=this;window.setTimeout(function(){a._pasteBlockFromClipboard();a=null},1)};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var h=this._clip_area.value;if(!h){return}if(this._selectionArea!=null){var t=this._selectionArea.LeftTopRow;var a=this._selectionArea.LeftTopCol}else{if(this.cell!=null&&!this.editor){var t=this.getRowIndex(this.cell.parentNode.idd);var a=this.cell._cellIndex}else{return false}}h=this.csvParser.unblock(h,this.csv.cell,this.csv.row);var m=t+h.length;var r=a+h[0].length;if(r>this._cCount){r=this._cCount}var e=0;for(var o=t;o<m;o++){var u=this.render_row(o);if(u==-1){continue}var c=0;for(var g=a;g<r;g++){if(this._hrrar[g]&&!this._fake){r=Math.min(r+1,this._cCount);continue}var q=this.cells3(u,g);if(q.isDisabled()){c++;continue}if(this._onEditUndoRedo){this._onEditUndoRedo(2,u.idd,g,h[e][c],q.getValue())}if(q.combo){var s=q.combo.values;for(var b=0;b<s.length;b++){if(h[e][c]==s[b]){q.setValue(q.combo.keys[b]);s=null;break}}if(s!=null&&q.editable){q.setValue(h[e][c++])}else{c++}}else{q[q.setImage?"setLabel":"setValue"](h[e][c++])}q.cell.wasChanged=true}this.callEvent("onRowPaste",[u.idd]);e++}};dhtmlXGridObject.prototype.getSelectedBlock=function(){if(this._selectionArea){return this._selectionArea}else{if(this.getSelectedRowId()!==null){return{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}}else{return null}}};dhtmlXGridObject.prototype.enableSmartRendering=function(c,b,a){if(arguments.length>2){if(b&&!this.rowsBuffer[b-1]){this.rowsBuffer[b-1]=0}b=a}this._srnd=dhx4.s2b(c);this._srdh=this._srdh||20;this._dpref=b||0};dhtmlXGridObject.prototype.enablePreRendering=function(a){this._srnd_pr=parseInt(a||50)};dhtmlXGridObject.prototype.forceFullLoading=function(a,g){for(var c=0;c<this.rowsBuffer.length;c++){if(!this.rowsBuffer[c]){var e=a||(this.rowsBuffer.length-c);if(this.callEvent("onDynXLS",[c,e])){var b=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+c+"&count="+e,function(){window.setTimeout(function(){b.forceFullLoading(a,g)},100)},this._data_type)}return}}if(g){g.call(this)}};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(a){this._srdh=parseInt(a)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(j,a,b,e){if(!a){return null}var h="__filler__";var g=this._prepareRow(h);g.firstChild.style.width="1px";g.firstChild.style.borderWidth=g.firstChild.style.padding=g.firstChild.style.margin="0px";for(var c=1;c<g.childNodes.length;c++){g.childNodes[c].style.display="none"}g.firstChild.style.height=a*this._srdh+"px";b=b||this.rowsCol[j];if(b&&b.nextSibling){b.parentNode.insertBefore(g,b.nextSibling)}else{if(_isKHTML){this.obj.appendChild(g)}else{this.obj.rows[0].parentNode.appendChild(g)}}this.callEvent("onAddFiller",[j,a,g,b,e]);return[j,a,g]};dhtmlXGridObject.prototype._update_srnd_view=function(){var h=Math.floor(this.objBox.scrollTop/this._srdh);var b=h+this._get_view_size();if(this.multiLine){var k=this.objBox.scrollTop;h=0;while(k>0){k-=this.rowsCol[h]?this.rowsCol[h].offsetHeight:this._srdh;h++}b=h+this._get_view_size();if(h>0){h--}}b+=(this._srnd_pr||0);if(b>this.rowsBuffer.length){b=this.rowsBuffer.length}for(var e=h;e<b;e++){if(!this.rowsCol[e]){var g=this._add_from_buffer(e);if(g==-1){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[b-1]){var c=this._dpref?this._dpref:(b-e);var a=Math.max(0,Math.min(e,b-this._dpref));this._current_load=[a,b-a]}else{this._current_load=[e,(this._dpref?this._dpref:(b-e))]}if(this.callEvent("onDynXLS",this._current_load)){this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}}return}else{if(this._tgle){this._updateLine(this._h2.get[this.rowsBuffer[e].idd],this.rowsBuffer[e]);this._updateParentLine(this._h2.get[this.rowsBuffer[e].idd],this.rowsBuffer[e])}if(e&&e==(this._realfake?this._fake:this)["_r_select"]){this.selectCell(e,this.cell?this.cell._cellIndex:0,true)}}}}if(this._fake&&!this._realfake&&this.multiLine){this._fake.objBox.scrollTop=this.objBox.scrollTop}};dhtmlXGridObject.prototype._add_from_buffer=function(e){var g=this.render_row(e);if(g==-1){return -1}if(g._attrs.selected||g._attrs.select){this.selectRow(g,false,true);g._attrs.selected=g._attrs.select=null}if(!this._cssSP){if(this._cssEven&&e%2==0){g.className=this._cssEven+((g.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(g._css||"")}else{if(this._cssUnEven&&e%2==1){g.className=this._cssUnEven+((g.className.indexOf("rowselected")!=-1)?" rowselected ":" ")+(g._css||"")}}}else{if(this._h2){var a=this._h2.get[g.idd];g.className+=" "+((a.level%2)?(this._cssUnEven+" "+this._cssUnEven):(this._cssEven+" "+this._cssEven))+"_"+a.level+(this.rowsAr[a.id]._css||"")}}for(var b=0;b<this._fillers.length;b++){var c=this._fillers[b];if(c&&c[0]<=e&&(c[0]+c[1])>e){var h=e-c[0];if(h==0){this._insert_before(e,g,c[2]);this._update_fillers(b,-1,1)}else{if(h==c[1]-1){this._insert_after(e,g,c[2]);this._update_fillers(b,-1,0)}else{this._fillers.push(this._add_filler(e+1,c[1]-h-1,c[2],1));this._insert_after(e,g,c[2]);this._update_fillers(b,-c[1]+h,0)}}return}}};dhtmlXGridObject.prototype._update_fillers=function(c,a,e){var b=this._fillers[c];b[1]=b[1]+a;b[0]=b[0]+e;if(!b[1]){this.callEvent("onRemoveFiller",[b[2]]);b[2].parentNode.removeChild(b[2]);this._fillers.splice(c,1)}else{b[2].firstChild.style.height=parseFloat(b[2].firstChild.style.height)+a*this._srdh+"px";this.callEvent("onUpdateFiller",[b[2]])}};dhtmlXGridObject.prototype._insert_before=function(b,c,a){a.parentNode.insertBefore(c,a);this.rowsCol[b]=c;this.callEvent("onRowInserted",[c,null,a,"before"])};dhtmlXGridObject.prototype._insert_after=function(b,c,a){if(a.nextSibling){a.parentNode.insertBefore(c,a.nextSibling)}else{a.parentNode.appendChild(c)}this.rowsCol[b]=c;this.callEvent("onRowInserted",[c,null,a,"after"])};if(typeof(window.dhtmlxValidation)!="undefined"){dhtmlxValidation.trackInput=function(c,e,b,a){dhtmlxEvent(c,"keyup",function(g){if(dhtmlxValidation._timer){window.clearTimeout(dhtmlxValidation._timer);dhtmlxValidation._timer=null}dhtmlxValidation._timer=window.setTimeout(function(){if(!dhtmlxValidation.checkInput(c,e)){if(!b||b(c,c.value,e)){c.className+=" dhtmlx_live_validation_error"}}else{c.className=c.className.replace(/[ ]*dhtmlx_live_validation_error/g,"");if(a){a(c,c.value,e)}}},250)})};dhtmlxValidation.checkInput=function(a,b){return dhtmlxValidation.checkValue(a.value,b)};dhtmlxValidation.checkValue=function(c,e){if(typeof e=="string"){e=e.split(",")}var a=true;for(var b=0;b<e.length;b++){if(!this["is"+e[b]]){alert("Incorrect validation rule: "+e[b])}else{a=a&&this["is"+e[b]](c)}}return a}}dhtmlXGridObject.prototype.enableValidation=function(b,a){b=dhx4.s2b(b);if(b){this._validators={data:[]}}else{this._validators=false}if(arguments.length>1){this._validators._live=a}if(!this._validators._event){this._validators._event=this.attachEvent("onEditCell",this.validationEvent)}};dhtmlXGridObject.prototype.setColValidators=function(a){if(!this._validators){this.enableValidation(true)}if(typeof a=="string"){a=a.split(this.delim)}this._validators.data=a};dhtmlXGridObject.prototype.validationEvent=function(h,b,e,c,k){var l=this._validators;if(!l){return true}var j=(l.data[e]||this.cells(b,e).getAttribute("validate"))||"";if(h==1&&j){var g=this.editor||(this._fake||{}).editor;if(!g){return true}g.cell.className=g.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(l._live){var a=this;dhtmlxValidation.trackInput(g.getInput(),j,function(m,n,o){return a.callEvent("onLiveValidationError",[b,e,n,m,o])},function(m,n,o){return a.callEvent("onLiveValidationCorrect",[b,e,n,m,o])})}}if(h==2){this.validateCell(b,e,j,c)}return true};dhtmlXGridObject.prototype.validateCell=function(j,g,h,e){h=h||(this._validators.data[g]||this.cells(j,g).getAttribute("validate"));e=e||this.cells(j,g).getValue();if(!h){return}var b=this.cells(j,g).cell;var a=true;if(typeof h=="string"){h=h.split(this.delim)}for(var c=0;c<h.length;c++){if(!dhtmlxValidation.checkValue(e,h[c])){if(this.callEvent("onValidationError",[j,g,e,h[c]])){b.className+=" dhtmlx_validation_error"}a=false}}if(a){this.callEvent("onValidationCorrect",[j,g,e,h]);b.className=b.className.replace(/[ ]*dhtmlx_validation_error/g,"")}return a};function eXcell_stree(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees){return}this._sub=this.grid._sub_trees[a._cellIndex];if(!this._sub){return}this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(b){this.cell._val=b;b=this._sub.getItemText(this.cell._val);this.setCValue((b||"&nbsp;"),b)};this.edit=function(){this._sub.parentObject.style.display="block";var c=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=c[1]+"px";this._sub.parentObject.style.left=c[0]+"px";this._sub.parentObject.style.position="absolute";var b=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=b};this.detach=function(){this._sub.parentObject.style.display="none";if(this.grid._sub_id!=null){var b=this.cell._val;this.setValue(this._sub.getSelectedItemId());this.grid._sub_id=null;return this.cell._val!=b}}}eXcell_stree.prototype=new eXcell;dhtmlXGridObject.prototype.setSubTree=function(a,b){if(!this._sub_trees){this._sub_trees=[]}this._sub_trees[b]=[a];a.parentObject.style.display="none";var c=this;a.parentObject.onclick=function(e){(e||window.event).cancelBubble=true;return false};a.ev_onDblClick=null;a.attachEvent("onDblClick",function(e){c._sub_id=e;c.editStop();return true});a._chRRS=true};function eXcell_link(a){this.cell=a;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return true};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var b=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(b?("^"+b):"")}else{return""}};this.setValue=function(c){if((typeof(c)!="number")&&(!c||c.toString()._dhx_trim()=="")){this.setCValue("&nbsp;",b);return(this.cell._clearCell=true)}var b=c.split("^");if(b.length==1){b[1]=""}else{if(b.length>1){b[1]="href='"+b[1]+"'";if(b.length==3){b[1]+=" target='"+b[2]+"'"}else{b[1]+=" target='_blank'"}}}this.setCValue("<a "+b[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+b[0]+"</a>",b)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var a=this.cell.firstChild;return((a&&a.tagName)?a.getAttribute("href"):"")};eXcell_link.prototype.getContent=function(){var a=this.cell.firstChild;return((a&&a.tagName)?a.innerHTML:"")};function eXcell_grid(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_grids){return}this._sub=this.grid._sub_grids[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(b){this.cell.val=b;if(this._sub.getRowById(b)){b=this._sub.cells(b,this._sindex);if(b){b=b.getValue()}else{b=""}}this.setCValue((b||"&nbsp;"),b)};this.edit=function(){this.val=this.cell.val;this._sub.entBox.style.display="block";var c=this.grid.getPosition(this.cell);this._sub.entBox.style.top=c[1]+"px";this._sub.entBox.style.left=c[0]+"px";this._sub.entBox.style.position="absolute";this._sub.setSizes();var b=this.grid.editStop;this.grid.editStop=function(){};if(this._sub.getRowById(this.cell.val)){this._sub.setSelectedRow(this.cell.val)}this._sub.setActive(true);this.grid.editStop=b};this.detach=function(){var b=this.cell.val;this._sub.entBox.style.display="none";if(this._sub.getSelectedId()===null){return false}this.setValue(this._sub.getSelectedId());this.grid.setActive(true);return this.cell.val!=b}}eXcell_grid.prototype=new eXcell;dhtmlXGridObject.prototype.setSubGrid=function(b,a,e){if(!this._sub_grids){this._sub_grids=[]}this._sub_grids[a]=[b,e];b.entBox.style.display="none";var c=this;b.entBox.onclick=function(g){(g||window.event).cancelBubble=true;return false};b.attachEvent("onRowSelect",function(g){c.editStop();return true});b._chRRS=false};function eXcell_dhxCalendar(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var c=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[c]);var b=this.grid;c.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){b.editStop()},1);return true});var e=function(g){(g||event).cancelBubble=true};dhtmlxEvent(c.base,"click",e);c=null}}}eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var b=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);var c=0;if(!window.innerHeight||(b[1]+this.grid._grid_calendarA.base.offsetHeight+this.cell.offsetHeight<window.innerHeight)){c=b[1]+this.cell.offsetHeight}else{c=b[1]-(this.grid._grid_calendarA.base.offsetHeight)}var e=b[0];if(window.innerWidth&&(e+this.grid._grid_calendarA.base.clientWidth+this.cell.offsetWidth>window.innerWidth)){e=window.innerWidth-this.grid._grid_calendarA.base.clientWidth}this.grid._grid_calendarA.setPosition(e,c);this.grid._grid_calendarA._last_operation_calendar=false;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val||(new Date()));this.grid._grid_calendarA.draw=a};eXcell_dhxCalendar.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendar.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){var c=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"));var b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(c,b);this.cell._clearCell=!c;var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())}return false};eXcell_dhxCalendar.prototype.setValue=function(a){if(a&&typeof a=="object"){this.cell.val=a;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),a).toString(),this.cell.val);return}if(!a||a.toString()._dhx_trim()==""){a="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell._clearCell=true;this.cell.val=new Date();this.setCValue("&nbsp;",0)}else{this.setCValue((a||"").toString(),this.cell.val)}};function eXcell_dhxCalendarA(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._grid_calendarA){var c=this.grid._grid_calendarA=new dhtmlxCalendarObject();this.grid.callEvent("onDhxCalendarCreated",[c]);var b=this.grid;c.attachEvent("onClick",function(){this._last_operation_calendar=true;window.setTimeout(function(){b.editStop()},1);return true});var e=function(g){(g||event).cancelBubble=true};dhtmlxEvent(c.base,"click",e)}}}eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var b=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(false,false);this.grid._grid_calendarA.setPosition(b[0]*1+this.cell.offsetWidth,b[1]*1);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=false;this.cell._cediton=true;this.val=this.cell.val;this._val=this.cell.innerHTML;var a=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat((this.grid._dtmask||"%d/%m/%Y"));this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=a;this.cell.atag=((!this.grid.multiLine)&&(_isKHTML||_isMacOS||_isFF))?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=(this.cell.offsetHeight-4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(c){(c||event).cancelBubble=true};this.obj.onmousedown=function(c){(c||event).cancelBubble=true};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);if(window.dhx4.isIE){this.obj.style.overflow="visible";if((this.grid.multiLine)&&(this.obj.offsetHeight>=18)&&(this.obj.offsetHeight<40)){this.obj.style.height="36px";this.obj.style.overflow="scroll"}}this.obj.onselectstart=function(c){if(!c){c=event}c.cancelBubble=true;return true};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){if(this.cell.val){return this.cell.val}return null};eXcell_dhxCalendarA.prototype.getValue=function(){if(this.cell._clearCell){return""}if(this.grid._dtmask_inc&&this.cell.val){return this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString()}return this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){if(!this.grid._grid_calendarA){return}this.grid._grid_calendarA.hide();if(this.cell._cediton){this.cell._cediton=false}else{return}if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=false;var c=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y");var b=this.grid._grid_calendarA.getDate();this.cell.val=new Date(b);this.setCValue(c,b);this.cell._clearCell=!c;var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())}this.setValue(this.obj.value);var a=this.val;this.val=this._val;return(this.cell.val.valueOf()!=(a||"").valueOf())};eXcell_dhxCalendarA.prototype.setValue=function(a){if(a&&typeof a=="object"){this.cell.val=a;this.cell._clearCell=false;this.setCValue(this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),a).toString(),this.cell.val);return}if(!a||a.toString()._dhx_trim()==""){a="&nbsp";this.cell._clearCell=true;this.cell.val=""}else{this.cell._clearCell=false;this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate((this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y"),a.toString(),null,true));if(this.grid._dtmask_inc){a=this.grid._grid_calendarA.getFormatedDate((this.grid._dtmask||"%d/%m/%Y"),this.cell.val)}}if((this.cell.val=="NaN")||(this.cell.val=="Invalid Date")){this.cell.val=new Date();this.cell._clearCell=true;this.setCValue("&nbsp;",0)}else{this.setCValue((a||"").toString(),this.cell.val)}};function eXcell_cntr(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=true;if(this.grid._h2){this.grid.attachEvent("onOpenEn",function(c){this.resetCounter(a._cellIndex)})}var b=function(){var c=this;window.setTimeout(function(){if(!c.resetCounter){return}if(c._fake&&!c._realfake&&a._cellIndex<c._fake._cCount){c._fake.resetCounter(a._cellIndex)}else{c.resetCounter(a._cellIndex)}},1);return true};this.grid.attachEvent("onBeforeSorting",b);this.grid.attachEvent("onFilterEnd",b)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(e){this.cell.style.paddingRight="2px";var c=this.cell;window.setTimeout(function(){if(!c.parentNode){return}var g=c.parentNode.rowIndex;if(c.parentNode.grid.currentPage||g<0||c.parentNode.grid._srnd){g=c.parentNode.grid.rowsBuffer._dhx_find(c.parentNode)+1}if(g<=0){return}c.innerHTML=g;if(c.parentNode.grid._fake&&c._cellIndex<c.parentNode.grid._fake._cCount&&c.parentNode.grid._fake.rowsAr[c.parentNode.idd]){c.parentNode.grid._fake.cells(c.parentNode.idd,c._cellIndex).setCValue(g)}c=null},100)}}dhtmlXGridObject.prototype.resetCounter=function(b){if(this._fake&&!this._realfake&&b<this._fake._cCount){this._fake.resetCounter(b,this.currentPage)}var a=arguments[0]||0;if(this.currentPage){a=(this.currentPage-1)*this.rowsBufferOutSize}for(a=0;a<this.rowsBuffer.length;a++){if(this.rowsBuffer[a]&&this.rowsBuffer[a].tagName=="TR"&&this.rowsAr[this.rowsBuffer[a].idd]){this.rowsAr[this.rowsBuffer[a].idd].childNodes[b].innerHTML=a+1}}};eXcell_cntr.prototype=new eXcell;function eXcell_acheck(a){try{this.cell=a;this.grid=this.cell.parentNode.grid;this.cell.obj=this}catch(b){}this.changeState=function(){if((!this.grid.isEditable)||(this.cell.parentNode._locked)||(this.isDisabled())){return}if(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=false){this.val=this.getValue();if(this.val=="1"){this.setValue("<checkbox state='false'>")}else{this.setValue("<checkbox state='true'>")}this.cell.wasChanged=true;this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")]);this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,(this.val!="1")])}else{this.editor=null}};this.getValue=function(){try{return this.cell.chstate.toString()}catch(c){return null}};this.isCheckbox=function(){return true};this.isChecked=function(){if(this.getValue()=="1"){return true}else{return false}};this.setChecked=function(c){this.setValue(c.toString())};this.detach=function(){return this.val!=this.getValue()};this.drawCurrentState=function(){if(this.cell.chstate==1){return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>"}else{return"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}}eXcell_acheck.prototype=new eXcell;eXcell_acheck.prototype.setValue=function(b){b=(b||"").toString();if(b.indexOf("1")!=-1||b.indexOf("true")!=-1){b="1";this.cell.chstate="1"}else{b="0";this.cell.chstate="0"}var a=this;this.setCValue(this.drawCurrentState(),this.cell.chstate)};function eXcell_context(a){if(a){this.cell=a;this.grid=this.cell.parentNode.grid;if(!this.grid._sub_context){return}this._sub=this.grid._sub_context[a._cellIndex];if(!this._sub){return}this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(c){this.cell._val=c;var b=this._sub.itemPull[this._sub.idPrefix+this.cell._val];c=b?b.title:c;this.setCValue((c||"&nbsp;"),c)};this.edit=function(){var c=this.grid.getPosition(this.cell);this._sub.showContextMenu(c[0]+this.cell.offsetWidth,c[1]);var b=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=b};this.detach=function(){if(this.grid._sub_id!=null){var b=this.cell._val;this.setValue(this.grid._sub_id);this.grid._sub_id=null;return this.cell._val!=b}this._sub.hideContextMenu()}}eXcell_context.prototype=new eXcell;dhtmlXGridObject.prototype.setSubContext=function(a,b,e){var c=this;a.attachEvent("onClick",function(h,g){c._sub_id=h;c.editStop();a.hideContextMenu();return true});if(!this._sub_context){this._sub_context=[]}this._sub_context[b]=[a,e];a.hideContextMenu()};dhtmlXGridObject.prototype._process_json_row=function(g,h){g._attrs=h;for(var c=0;c<g.childNodes.length;c++){g.childNodes[c]._attrs={}}if(h.userdata){for(var b in h.userdata){this.setUserData(g.idd,b,h.userdata[b])}}h=this._c_order?this._swapColumns(h.data):h.data;for(var e=0;e<h.length;e++){if(typeof h[e]=="object"&&h[e]!=null){g.childNodes[e]._attrs=h[e];if(h[e].type){g.childNodes[e]._cellType=h[e].type}h[e]=h[e].value}}this._fillRow(g,h);return g};dhtmlXGridObject.prototype._process_js_row=function(h,k){h._attrs=k;for(var e=0;e<h.childNodes.length;e++){h.childNodes[e]._attrs={}}if(k.userdata){for(var c in k.userdata){this.setUserData(h.idd,c,k.userdata[c])}}var b=[];for(var g=0;g<this.columnIds.length;g++){b[g]=k[this.columnIds[g]];if(typeof b[g]=="object"&&b[g]!=null){h.childNodes[g]._attrs=b[g];if(b[g].type){h.childNodes[g]._cellType=b[g].type}b[g]=b[g].value}if(!b[g]&&b[g]!==0){b[g]=""}}this._fillRow(h,b);return h};dhtmlXGridObject.prototype.updateFromJSON=function(a,e,b,c){if(typeof e=="undefined"){e=true}this._refresh_mode=[true,e,b];this.load(a,c,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(c){if(this._f_rowsBuffer){this.filterBy(0,"")}reset=false;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue;eXcell_tree.prototype.setValue=function(o){var n=this.grid._h2.get[this.cell.parentNode.idd];if(n&&this.cell.parentNode.valTag){this.setLabel(o)}else{this.setValueX(o)}}}var m=this.cellType._dhx_find("tree");var g=c.parent||0;var j={};if(this._refresh_mode[2]){if(m!=-1){this._h2.forEachChild(g,function(n){j[n.id]=true},this)}else{this.forEachRow(function(n){j[n]=true})}}var l=c.rows;for(var e=0;e<l.length;e++){var k=l[e];var a=k.id;j[a]=false;if(this.rowsAr[a]&&this.rowsAr[a].tagName!="TR"){if(this._h2){this._h2.get[a].buff.data=k}else{this.rowsBuffer[this.getRowIndex(a)].data=k}this.rowsAr[a]=k}else{if(this.rowsAr[a]){this._process_json_row(this.rowsAr[a],k,-1);this._postRowProcessing(this.rowsAr[a],true)}else{if(this._refresh_mode[1]){var h={idd:a,data:k,_parser:this._process_json_row,_locator:this._get_json_data};var b=this.rowsBuffer.length;if(this._refresh_mode[1]=="top"){this.rowsBuffer.unshift(h);b=0}else{this.rowsBuffer.push(h)}if(this._h2){reset=true;(this._h2.add(a,g)).buff=this.rowsBuffer[this.rowsBuffer.length-1]}this.rowsAr[a]=k;k=this.render_row(b);this._insertRowAt(k,b?-1:0)}}}}if(this._refresh_mode[2]){for(a in j){if(j[a]&&this.rowsAr[a]){this.deleteRow(a)}}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}if(reset){this._renderSort()}if(this._f_rowsBuffer){this._f_rowsBuffer=null;this.filterByAll()}},dhtmlXGridObject.prototype._process_js=function(a){return this._process_json(a,"js")};dhtmlXGridObject.prototype._parseOptionsJson=function(c){if(c.coll_options){for(var b in c.coll_options){var g=c.coll_options[b];var e=this.getColIndexById(b);var h;if(this.cellType[e]=="combo"){var h=this.getColumnCombo(e);h.addOption(g)}else{if(this.cellType[e].indexOf("co")==0){var h=this.getCombo(e);for(var a=0;a<g.length;a++){h.put(g[a].value,g[a].label)}}}}this._colls_loaded=true}};dhtmlXGridObject.prototype._parseHeadJson=function(o){if(!o.head||!o.head.length){return}var a=o.head;var e=o.settings;var k="setInitWidths";var m=false;if(e&&e.colwidth=="%"){k="setInitWidthsP"}if(e&&e.splitat=="%"){m=e.splitat}if(this.hdr.rows.length>0){this.clearAll(true)}var l=[[],[],[],[],[],[],[]];var n=["value","width","type","align","sort","hidden","id"];var r=["",k,"setColTypes","setColAlign","setColSorting","","setColumnIds"];for(var h=0;h<a.length;h++){for(var g=0;g<n.length;g++){l[g].push(a[h][n[g]])}}this.setHeader(l[0]);for(var h=0;h<r.length;h++){if(r[h]){this[r[h]](l[h].join(this.delim))}}for(var h=0;h<a.length;h++){var q=a[h].options;if(a[h].options){if(this.cellType[h]=="clist"){this.registerCList(h,q)}else{var b=this.getCombo(h);for(var g=0;g<q.length;g++){b.put(q[g].id,q[g].value)}}}}this.init();var c=l[5].join(this.delim);if(this.setColHidden&&c.replace(/,/g,"")!=""){this.setColHidden(c)}if((m)&&(this.splitAt)){this.splitAt(m)}};dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=true;try{var data=data.responseText||data;if(typeof data=="string"){eval("dhtmlx.temp="+data+";");data=dhtmlx.temp}}catch(e){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",(data.xmlDoc||data),this]);data={rows:[]}}if(this._refresh_mode){return this._refreshFromJSON(data)}if(data.head){this._parseHeadJson(data)}this._parseOptionsJson(data);var cr=parseInt(data.pos||0);var total=parseInt(data.total_count||0);var reset=false;if(total){if(!this.rowsBuffer[total-1]){if(this.rowsBuffer.length){reset=true}this.rowsBuffer[total-1]=null}if(total<this.rowsBuffer.length){this.rowsBuffer.splice(total,this.rowsBuffer.length-total);reset=true}}var userdata=mode==="js"?data.userdata:data;for(var key in userdata){if(mode==="js"||key!="rows"){this.setUserData("",key,userdata[key])}}if(mode=="js"&&data.collections){for(var colkey in data.collections){var index=this.getColIndexById(colkey);var colrecs=data.collections[colkey];if(index!==window.undefined){if(this.cellType[index]=="clist"){colplaindata=[];for(var j=0;j<colrecs.length;j++){colplaindata.push(colrecs[j].label)}this.registerCList(index,colplaindata)}else{var combo=this.getCombo(index);for(var j=0;j<colrecs.length;j++){combo.put(colrecs[j].value,colrecs[j].label)}}}}}if(this.isTreeGrid()){return this._process_tree_json(data,null,null,mode)}if(mode=="js"){if(data.data){data=data.data}for(var i=0;i<data.length;i++){if(this.rowsBuffer[i+cr]){continue}var row=data[i];var id=row.id||(i+1);this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data};this.rowsAr[id]=data[i]}}else{for(var i=0;i<data.rows.length;i++){if(this.rowsBuffer[i+cr]){continue}var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data};this.rowsAr[id]=data.rows[i]}}this.callEvent("onDataReady",[]);if(reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=h}else{this.render_dataset()}this._parsing=false};dhtmlXGridObject.prototype._get_json_data=function(b,a){var c=b.data[a];if(typeof c=="object"){return c?c.value:""}else{return c}};dhtmlXGridObject.prototype._process_tree_json=function(e,g,b,j){this._parsing=true;var a=false;if(!g){this.render_row=this.render_row_tree;a=true;g=e;b=g.parent||0;if(b=="0"){b=0}if(!this._h2){this._h2=this._createHierarchy()}if(this._fake){this._fake._h2=this._h2}}if(j=="js"){if(g.data&&!b){e=g.data}if(g.rows){g=g.rows}for(var c=0;c<g.length;c++){var k=g[c].id;var h=this._h2.add(k,b);h.buff={idd:k,data:g[c],_parser:this._process_js_row,_locator:this._get_js_data};if(g[c].open){h.state="minus"}this.rowsAr[k]=h.buff;this._process_tree_json(g[c],g[c],k,j)}}else{if(g.rows){for(var c=0;c<g.rows.length;c++){var k=g.rows[c].id;var h=this._h2.add(k,b);h.buff={idd:k,data:g.rows[c],_parser:this._process_json_row,_locator:this._get_json_data};if(g.rows[c].open){h.state="minus"}this.rowsAr[k]=h.buff;this._process_tree_json(g.rows[c],g.rows[c],k,j)}}}if(a){if(b!=0){this._h2.change(b,"state","minus")}this._updateTGRState(this._h2.get[b]);this._h2_to_buff();this.callEvent("onDataReady",[]);if(b!=0&&(this._srnd||this.pagingOn)){this._renderSort()}else{this.render_dataset()}if(this._slowParse===false){this.forEachRow(function(l){this.render_row_tree(0,l)})}this._parsing=false;if(b!=0&&!this._srnd){this.callEvent("onOpenEnd",[b,1])}}};function dhtmlXGridFromTable(obj,init){if(typeof(obj)!="object"){obj=document.getElementById(obj)}var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?(obj.offsetWidth+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["width"]:(obj.currentStyle?obj.currentStyle.width:0)));w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?(obj.offsetHeight+"px"):0)||(window.getComputedStyle?window.getComputedStyle(obj,null)["height"]:(obj.currentStyle?obj.currentStyle.height:0)));w.className=obj.className;obj.className="";if(obj.id){w.id=obj.id}var mr=obj;var drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||("name_"+(new Date()).valueOf());var windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit");var acs2=mr.getAttribute("oninit");if(acs){eval(acs)}windowf.setImagePath(windowf.imgURL||(mr.getAttribute("imgpath")||mr.getAttribute("image_path")||""));var skin=mr.getAttribute("skin");if(skin){windowf.setSkin(skin)}if(init){init(windowf)}var hrow=mr.rows[0];var za=[];var zb="";var zc="";var zd="";var ze="";for(var i=0;i<hrow.cells.length;i++){za.push(hrow.cells[i].innerHTML);var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null)["width"]:(hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0));zb+=(zb?",":"")+(width=="*"?width:parseInt(width));zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left");zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed");ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");if(f_a){if(hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")!=-1){windowf._dtmask=f_a}else{windowf.setNumberFormat(f_a,i)}}}windowf.setHeader(za);windowf.setInitWidths(zb);windowf.setColAlign(zc);windowf.setColTypes(zd);windowf.setColSorting(ze);if(obj.getAttribute("gridHeight")=="auto"){windowf.enableAutoHeigth(true)}if(obj.getAttribute("multiline")){windowf.enableMultiline(true)}var lmn=mr.getAttribute("lightnavigation");if(lmn){windowf.enableLightMouseNavigation(lmn)}var evr=mr.getAttribute("evenrow");var uevr=mr.getAttribute("unevenrow");if(evr||uevr){windowf.enableAlterCss(evr,uevr)}if(drag){windowf.enableDragAndDrop(true)}windowf.init();if(obj.getAttribute("split")){windowf.splitAt(obj.getAttribute("split"))}windowf.callEvent("onXLS",[]);windowf._process_inner_html(mr,1);if(acs2){eval(acs2)}if(obj.parentNode&&obj.parentNode.removeChild){obj.parentNode.removeChild(obj)}windowf.callEvent("onXLE",[]);return windowf}dhtmlXGridObject.prototype._process_html=function(b){if(b.tagName&&b.tagName=="TABLE"){return this._process_inner_html(b,0)}var a=document.createElement("DIV");a.innerHTML=b.xmlDoc.responseText;var c=a.getElementsByTagName("TABLE")[0];this._process_inner_html(c,0)};dhtmlXGridObject.prototype._process_inner_html=function(c,g){var b=c.rows.length;for(var a=g;a<b;a++){var e=c.rows[a].getAttribute("id")||a;this.rowsBuffer.push({idd:e,data:c.rows[a],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(m,g){var l=g.getElementsByTagName("TD");var b=[];m._attrs=this._xml_attrs(g);for(var e=0;e<l.length;e++){var h=l[e];var a=h.getAttribute("type");if(m.childNodes[e]){if(a){m.childNodes[e]._cellType=a}m.childNodes[e]._attrs=this._xml_attrs(l[e])}if(h.firstChild){b.push(h.innerHTML)}else{b.push("")}if(h.colSpan>1){m.childNodes[e]._attrs.colspan=h.colSpan;for(var c=1;c<h.colSpan;c++){b.push("")}}}for(e<l.length;e<m.childNodes.length;e++){m.childNodes[e]._attrs={}}this._fillRow(m,(this._c_order?this._swapColumns(b):b));return m};dhtmlXGridObject.prototype._get_html_data=function(b,a){b=b.firstChild;while(true){if(!b){return""}if(b.tagName=="TD"){a--}if(a<0){break}b=b.nextSibling}return(b.firstChild?b.firstChild.data:"")};dhtmlxEvent(window,"load",function(){var c=document.getElementsByTagName("table");for(var b=0;b<c.length;b++){if(c[b].className=="dhtmlxGrid"){dhtmlXGridFromTable(c[b])}}});function dhtmlXLayoutObject(c,l,s){var o=null;if(c!=null&&typeof(c)=="object"&&typeof(c.tagName)=="undefined"&&c._isCell!=true){o={};if(c.autosize!=null){o.autosize=c.autosize}if(c.cells!=null){o.cells=c.cells}if(c.pattern!=null){l=c.pattern}if(c.skin!=null){s=c.skin}if(c.offsets!=null){o.offsets=c.offsets}c=c.parent}this.cdata={};this.conf={skin:(s||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"material"),css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:false,b_size:{w:-1,h:-1}};if(this.conf.skin=="material"){this.conf.hh=window.dhx4.readFromCss("dhxlayout_base_material dhxlayout_collapsed_height")}if(typeof(c)=="object"&&c._isCell==true){var k=(typeof(o)!="undefined"&&o!=null?o:{});if(k.pattern==null&&l!=null){k.pattern=l}if(k.skin==null&&s!=null){k.skin=s}var h=c.attachLayout(k);return h}window.dhtmlXCellTop.apply(this,[c,(o==null?null:o.offsets)]);this.conf.sw=this._detectSW();var j=this;this._getLayout=function(){return this};this.mainInst=(c._layoutMainInst!=null?c._layoutMainInst:null);this._getMainInst=function(){if(this.mainInst!=null){return this.mainInst._getMainInst()}return this};this._init=function(w){var v=(typeof(w)=="string"?this.tplData[w]:w);this.conf.mode=v.mode;if(this.conf.mode=="c"){this.cdata.a=new dhtmlXLayoutCell("a",this)}else{this.cdata.a=new dhtmlXLayoutCell("a",this);this.cdata.b=new dhtmlXLayoutCell("b",this)}for(var u in this.cdata){this.cont.appendChild(this.cdata[u].cell);this.cdata[u].conf.init={w:0.5,h:0.5}}if(this.conf.mode!="c"){var q=this._getMainInst();if(q.conf.sep_idx==null){q.conf.sep_idx=1}else{q.conf.sep_idx++}this.sep=new dhtmlXLayoutSepObject(this.conf.mode,q.conf.sep_idx);this.cont.appendChild(this.sep.sep);this.sep._getLayout=function(){return j._getLayout()};q=null}if(v.cells!=null){for(var u in v.cells){if(v.cells[u].width!=null){this.cdata[u].conf.init.w=v.cells[u].width}if(v.cells[u].height!=null){this.cdata[u].conf.init.h=v.cells[u].height}if(v.cells[u].name!=null){this.cdata[u].conf.name=v.cells[u].name;this.cdata[u].setText(v.cells[u].name)}if(v.cells[u].fsize!=null){this.cdata[u].conf.fsize=v.cells[u].fsize}}}this.setSizes();for(var u in this.cdata){this.cdata[u].conf.init={}}if(v.cells!=null){for(var u in v.cells){if(v.cells[u].layout!=null){this.cdata[u].dataNested=true;this.cdata[u]._layoutMainInst=this;this.cdata[u].cell.className+=" dhx_cell_nested_layout";this.cdata[u].attachLayout({pattern:v.cells[u].layout});this.cdata[u]._layoutMainInst=null}}}};this.setSizes=function(z,I,D,t){var A=(this.conf.inited==true&&this._getMainInst()==this&&this.checkEvent("onResizeFinish")==true?{}:false);this._adjustCont();var H=this.cont.offsetWidth;var x=this.cont.offsetHeight;if(this.conf.mode=="c"){var a=0;var J=0;var q=H;var F=x;this.cdata.a._setSize(a,J,q,F,z,D,t);this.callEvent("_onSetSizes",[]);if(A&&(!(this.conf.b_size.w==H&&this.conf.b_size.h==x))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:H,h:x};return}if(typeof(I)=="undefined"){var u=(this.conf.mode=="v"?"w":"h");I=this.conf.autosize;if(this.cdata.a.conf.collapsed){I="b"}else{if(this.cdata.b.conf.collapsed){I="a"}else{if(z=="a"||z=="b"){I=this.conf.nextCell[z]}}}}else{}if(this.conf.mode=="v"){if(I=="a"){if(this.cdata.b.conf.init.w!=null){var E=Math.round(H*this.cdata.b.conf.init.w-this.conf.sw/2)}else{var E=this.cdata.b.conf.size.w}var C=H-E;var y=0;var v=x;var a=0;var J=y;var q=C-a-this.conf.sw;var F=v}else{var a=0;var J=0;if(this.cdata.a.conf.init.w!=null){var q=Math.round(H*this.cdata.a.conf.init.w-this.conf.sw/2)-a}else{var q=this.cdata.a.conf.size.w}var F=x-J;var C=a+q+this.conf.sw;var y=J;var E=H-C;var v=F}this.cdata.a._setSize(a,J,q,F,z,D,t);this.cdata.b._setSize(C,y,E,v,z,D,t);this.sep._setSize(a+q,J,this.conf.sw,F)}else{if(I=="a"){if(this.cdata.b.conf.init.h!=null){var v=Math.round(x*this.cdata.b.conf.init.h-this.conf.sw/2)}else{var v=this.cdata.b.conf.size.h}var C=0;var y=x-v;var E=H-C;var a=C;var J=0;var q=E;var F=y-J-this.conf.sw}else{var a=0;var J=0;var q=H-a;if(this.cdata.a.conf.init.h!=null){var F=Math.round(x*this.cdata.a.conf.init.h-this.conf.sw/2)}else{var F=this.cdata.a.conf.size.h}var C=a;var y=J+F+this.conf.sw;var E=q;var v=x-y}this.cdata.a._setSize(a,J,q,F,z,D,t);this.cdata.b._setSize(C,y,E,v,z,D,t);this.sep._setSize(a,J+F,q,this.conf.sw)}this.callEvent("_onSetSizes",[]);if(A&&(!(this.conf.b_size.w==H&&this.conf.b_size.h==x))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:H,h:x}};this._getAvailWidth=function(){var v=[];for(var z=0;z<this.conf.as_cells.h.length;z++){var t=this.cells(this.conf.as_cells.h[z]);var x=t.layout;var u=x.conf.autosize;if(t.conf.collapsed){t=x.cdata[x.conf.nextCell[t._idd]];u=x.conf.nextCell[u]}v.push(Math.max(0,t.getWidth()-t._getMinWidth(u)));x=t=null}var y=(v.length>0?Math.min.apply(window,v):0);return this.cont.offsetWidth-y};this._getAvailHeight=function(){var w=[];for(var y=0;y<this.conf.as_cells.v.length;y++){var t=this.cells(this.conf.as_cells.v[y]);var v=t.layout;var u=v.conf.autosize;if(t.conf.collapsed){t=v.cdata[v.conf.nextCell[t._idd]];u=v.conf.nextCell[u]}w.push(Math.max(0,t.getHeight()-t._getHdrHeight()-t._getMinHeight(u)));v=t=null}var x=Math.min.apply(window,w);return this.cont.offsetHeight-x};this.setSkin=function(a){this._setBaseSkin(a);this.conf.skin=a};this.unload=function(){this.conf.unloading=true;this.mainInst=null;this.parentLayout=null;if(this.items!=null){for(var u=0;u<this.items.length;u++){this.items[u]=null}this.items=null}if(this.dhxWins!=null){this.dhxWins.unload();this.dhxWins=null}if(this.sep!=null){this.sep._unload();this.sep=null}for(var t in this.cdata){this.cdata[t]._unload();this.cdata[t]=null}this._unloadTop();window.dhx4._eventable(this,"clear");for(var t in this){this[t]=null}j=null};this._getWindowMinDimension=function(v){var a=j._getAvailWidth()+7+7;var u=j._getAvailHeight()+7+31;var q={w:Math.max(a,200),h:Math.max(u,140)};v=null;return q};window.dhx4._eventable(this);this._callMainEvent=function(q,a){return this.callEvent(q,a)};this._init(l||"3E");var m=this._availAutoSize[l];if(m!=null){this.conf.pattern=l;this.setAutoSize(m.h[m.h.length-1],m.v[m.v.length-1])}if(typeof(window.dhtmlXWindows)=="function"&&this.mainInst==null){var e={vp_overflow:(this.conf.fs_mode==true?false:"auto")};this.dhxWins=new dhtmlXWindows(e);this.dhxWins.setSkin(this.conf.skin)}this.conf.inited=true;if(this==this._getMainInst()){var n=0;this.items=[];this.forEachItem(function(a){j.items.push(a);a.conf.index=n++})}if(this==this._getMainInst()&&o!=null){if(o.autosize!=null){this.setAutoSize.apply(this,o.autosize)}if(o.cells!=null){for(var b=0;b<o.cells.length;b++){var g=o.cells[b];var r=this.cells(g.id);if(g.width){r.setWidth(g.width)}if(g.height){r.setHeight(g.height)}if(g.text){r.setText(g.text)}if(g.collapsed_text){r.setCollapsedText(g.collapsed_text)}if(g.collapse){r.collapse()}if(g.fix_size){r.fixSize(g.fix_size[0],g.fix_size[1])}if(typeof(g.header)!="undefined"&&window.dhx4.s2b(g.header)==false){r.hideHeader()}}}}o=null;return this}dhtmlXLayoutObject.prototype=new dhtmlXCellTop();dhtmlXLayoutObject.prototype.cells=function(e){for(var b in this.cdata){if(this.cdata[b].conf.name==e){return this.cdata[b]}if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){var c=this.cdata[b].dataObj.cells(e);if(c!=null){return c}}}return null};dhtmlXLayoutObject.prototype.forEachItem=function(e,c){if(typeof(e)!="function"){return}if(typeof(c)=="undefined"){c=this}for(var b in this.cdata){if(typeof(this.cdata[b].conf.name)!="undefined"){e.apply(c,[this.cdata[b]])}if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){this.cdata[b].dataObj.forEachItem(e,c)}}c=null};dhtmlXLayoutObject.prototype._forEachSep=function(e,c){if(typeof(e)!="function"){return}if(typeof(c)=="undefined"){c=this}if(this.sep!=null){e.apply(c,[this.sep])}for(var b in this.cdata){if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){this.cdata[b].dataObj._forEachSep(e,c)}}c=null};dhtmlXLayoutObject.prototype._detectSW=function(){if(this._confGlob.sw==null){this._confGlob.sw={}}if(this._confGlob.sw[this.conf.skin]==null){this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)}return this._confGlob.sw[this.conf.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.listPatterns=function(){var c=[];for(var b in this.tplData){c.push(b)}return c};dhtmlXLayoutObject.prototype.listAutoSizes=function(){var e=(this.conf.as_cells!=null?(this.conf.as_cells.h).join(";"):"");var c=(this.conf.as_cells!=null?(this.conf.as_cells.v).join(";"):"");var b=this._availAutoSize[this.conf.pattern].h;var a=this._availAutoSize[this.conf.pattern].v;return[e,c,b,a]};dhtmlXLayoutObject.prototype._getCellsNames=function(e){var g={};if(this.cdata[e].conf.name!=null){g[this.cdata[e].conf.name]=true}if(this.cdata[e].dataType=="layout"&&this.cdata[e].dataObj!=null&&this.cdata[e].dataObj.mainInst==this){var b=this.cdata[e].dataObj._getCellsNames("a");var h=this.cdata[e].dataObj._getCellsNames("b");for(var c in b){g[c]=b[c]}for(var c in h){g[c]=h[c]}}return g};dhtmlXLayoutObject.prototype.setAutoSize=function(b,l,n){if(n!==true){var r=this.listAutoSizes();if(r[0]==b&&r[1]==l){return}var j=false;var h=false;for(var c=0;c<r[2].length;c++){j=j||r[2][c]==b}for(var c=0;c<r[3].length;c++){h=h||r[3][c]==l}if(!j||!h){return}}this.conf.as_cells={h:b.split(";"),v:l.split(";")};var e=(this.conf.mode=="v"?"h":"v");for(var o in this.cdata){var g=this._getCellsNames(o);var u=false;for(var c=0;c<this.conf.as_cells[e].length;c++){u=u||g[this.conf.as_cells[e][c]]}if(u){this.conf.autosize=o}if(this.cdata[o].dataType=="layout"&&this.cdata[o].dataObj!=null){this.cdata[o].dataObj.setAutoSize(b,l,true)}}};dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:1/5,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}};dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}};function dhtmlXLayoutSepObject(c,a){var b=this;this.conf={mode:c,idx:a,blocked:false,locked:false,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};if(window.dhx4.isIE&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")>=0){this.conf.btn_left=1}this.sep=document.createElement("DIV");this.sep.className="dhxlayout_sep";if(window.dhx4.isIE==true){this.sep.onselectstart=function(){return false}}this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode;this._setSize=function(e,k,g,j){this.sep.style.left=e+"px";this.sep.style.top=k+"px";this.sep.style.width=Math.max(g,0)+"px";this.sep.style.height=Math.max(j,0)+"px"};this._lockSep=function(e){this.conf.locked=(e==true);this._blockSep()};this._setWH=function(e){var g=this._getLayout();g.conf.sw=(e==null?g._detectSW():Math.max(parseInt(e)||-1,-1));g._getMainInst().setSizes();g=null};this._blockSep=function(){var e=this._getLayout();var g=e.cdata.a.conf.collapsed||e.cdata.b.conf.collapsed||this.conf.locked;e=null;if(this.conf.blocked==g){return}this.sep.className="dhxlayout_sep"+(g?"":" dhxlayout_sep_resize_"+this.conf.mode);this.conf.blocked=g};this._beforeResize=function(h){if(this.conf.blocked){return}if(this.conf.resize!=null&&this.conf.resize.active==true){return}if(h.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var l=(h.pageX||h.touches[0].pageX);var j=(h.pageY||h.touches[0].pageY)}else{if(h.button!==this.conf.btn_left){return}var l=h.clientX;var j=h.clientY}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff()}var g=this._getLayout();this.conf.resize={sx:l,sy:j,tx:h.layerX,ty:h.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:g.cdata.a._getAvailWidth("a"),min_wb:g.cdata.b._getAvailWidth("b"),min_ha:g.cdata.a._getAvailHeight("a"),min_hb:g.cdata.b._getAvailHeight("b")};this.conf.resize.nx=this.conf.resize.sep_x;this.conf.resize.ny=this.conf.resize.sep_y;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._doOnMouseMove,false);window.addEventListener("mouseup",this._doOnMouseUp,false);window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.attachEvent("onmousemove",this._doOnMouseMove);document.body.attachEvent("onmouseup",this._doOnMouseUp)}g=null};this._onResize=function(j){if(!this.conf.resize.active){this._initResizeArea();this.conf.resize.active=true}if(this.conf.mode=="v"){var g=(j.type=="mousemove"?j.clientX:(j.pageX||j.touches[0].pageX));var h=this.conf.resize.sx-g;this.conf.resize.nx=this.conf.resize.sep_x-h;if(this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb){this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb}else{if(this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa){this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa}}this.r_sep.style.left=this.conf.resize.nx+"px"}else{var k=(j.type=="mousemove"?j.clientY:(j.pageY||j.touches[0].pageY));var h=this.conf.resize.sy-k;this.conf.resize.ny=this.conf.resize.sep_y-h;if(this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb){this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb}else{if(this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha){this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha}}this.r_sep.style.top=this.conf.resize.ny+"px"}};this._afterResize=function(o){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._doOnMouseMove,false);window.removeEventListener("mouseup",this._doOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.detachEvent("onmousemove",this._doOnMouseMove);document.body.detachEvent("onmouseup",this._doOnMouseUp)}if(!this.conf.resize.active){this.conf.resize=null;return}if(o.type==window.dhx4.dnd.evs.end){this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"")}else{if(o.button!==this.conf.btn_left){return}}var l=this._getLayout();var h=l._getMainInst();var m=(h.checkEvent("onPanelResizeFinish")==true?{}:false);if(m!==false){h.forEachItem(function(e){m[e.conf.name]={w:e.conf.size.w,h:e.conf.size.h};e=null})}var j=this.conf.resize.nx-this.conf.resize.sep_x;var g=this.conf.resize.ny-this.conf.resize.sep_y;l.cdata.a._setSize(l.cdata.a.conf.size.x,l.cdata.a.conf.size.y,l.cdata.a.conf.size.w+j,l.cdata.a.conf.size.h+g,"a");l.cdata.b._setSize(l.cdata.b.conf.size.x+j,l.cdata.b.conf.size.y+g,l.cdata.b.conf.size.w-j,l.cdata.b.conf.size.h-g,"b");this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height));if(window.dhx4.isIE){var q=this;window.setTimeout(function(){q._removeResizeArea();q=null},1)}else{this._removeResizeArea()}if(m!==false){var n=[];h.forEachItem(function(e){var k=m[e.conf.name];if(!(k.w==e.conf.size.w&&k.h==e.conf.size.h)){n.push(e.conf.name)}e=null});h._callMainEvent("onPanelResizeFinish",[n])}h=l=null;this.conf.resize.active=false;this.conf.resize=null;if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOn()}};this._initResizeArea=function(){if(this.r_sep==null){this.r_sep=document.createElement("DIV");this.r_sep.className="dhxlayout_resize_sep";this.r_sep.style.left=this.sep.style.left;this.r_sep.style.top=this.sep.style.top;this.r_sep.style.width=this.sep.style.width;this.r_sep.style.height=this.sep.style.height;this.sep.parentNode.appendChild(this.r_sep);if(window.dhx4.isIE){this.r_sep.onselectstart=function(){return false}}}if(this.r_area==null){this.r_area=document.createElement("DIV");this.r_area.className="dhxlayout_resize_area";this.sep.parentNode.appendChild(this.r_area);if(window.dhx4.isIE){this.r_area.onselectstart=function(){return false}}if(this.conf.mode=="v"){var e=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa;var k=parseInt(this.r_sep.style.top);var g=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width);var j=parseInt(this.r_sep.style.height)}else{var e=parseInt(this.r_sep.style.left);var k=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha;var g=parseInt(this.r_sep.style.width);var j=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height)}this.r_area.style.left=e+"px";this.r_area.style.top=k+"px";if(!dhtmlXLayoutObject.prototype._confGlob.reszieCover){dhtmlXLayoutObject.prototype._confGlob.reszieCover={};this.r_area.style.width=g+"px";this.r_area.style.height=j+"px";dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth;dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight}this.r_area.style.width=g+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px";this.r_area.style.height=j+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode};this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")};this._doOnMouseDown=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.cancelBubble=true}b._beforeResize(g)};this._doOnBodyMouseDown=function(g){g=g||event;if(b.conf.resize==null){return}if(b.conf.resize.active==true&&g.button!==b.conf.btn_left){if(g.preventDefault){g.preventDefault()}g.returnValue=false;g.cancelBubble=true;return false}};this._doOnMouseMove=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.cancelBubble=true}b._onResize(g)};this._doOnMouseUp=function(g){g=g||event;if(g.type=="mouseup"&&g.button!==b.conf.btn_left){return}b._afterResize(g)};if(typeof(window.addEventListener)=="function"){this.sep.addEventListener("mousedown",this._doOnMouseDown,false);this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.addEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.attachEvent("onmousedown",this._doOnMouseDown);document.body.attachEvent("onmousedown",this._doOnBodyMouseDown);document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)}this._unload=function(){if(typeof(window.addEventListener)=="function"){this.sep.removeEventListener("mousedown",this._doOnMouseDown,false);this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.detachEvent("onmousedown",this._doOnMouseDown);document.body.detachEvent("onmousedown",this._doOnBodyMouseDown);document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown)}if(window.dhx4.isIE==true){this.sep.onselectstart=null}this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var e in this){this[e]=null}b=null};return this}dhtmlXLayoutObject.prototype.setSeparatorSize=function(c,e){if(typeof(c)=="number"){var g=this.setSeparatorSize({index:c,current:-1},e);if(g.sep!=null){g.sep._setWH(e)}return}for(var b in this.cdata){if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){c=this.cdata[b].dataObj.setSeparatorSize(c,e);if(c.sep!=null){return c}}if(b=="a"&&this.sep!=null){c.current++;if(c.index==c.current){return{sep:this.sep}}}}return c};window.dhtmlXLayoutCell=function(e,c){dhtmlXCellObject.apply(this,[e,"_layout"]);var b=this;this.layout=c;this.conf.skin=this.layout.conf.skin;this.conf.mode=this.layout.conf.mode;this.conf.collapsed=false;this.conf.fixed={w:false,h:false};this.conf.docked=true;if(this.conf.skin=="material"){this.conf.min_width=42;this.conf.min_height=26}else{this.conf.min_width=26;this.conf.min_height=26}this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null;if(this.conf.mode!="c"){this.cell.childNodes[this.conf.idx.hdr].lastChild.onclick=null}this._unloadDocking();this.layout=null;b=null});this._hdrInit();this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var g=b.layout._getMainInst();g._callMainEvent("onDblClick",[b.conf.name]);g=null};this.attachEvent("_onContentLoaded",function(){var g=this.layout._getMainInst();g._callMainEvent("onContentLoaded",[this.conf.name]);g=null});if(this.conf.mode!="c"){var a=document.createElement("DIV");a.title=this.i18n.expand;a.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd;this.cell.childNodes[this.conf.idx.hdr].appendChild(a);a.onclick=function(g){if(b.conf.collapsed){b.expand()}else{b.collapse()}};a=null}this.attachEvent("_onBeforeContentAttach",function(g){if(g=="tabbar"||g=="layout"||g=="acc"){this._hideBorders()}if(g=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this.conf.skin!="dhx_terrace"){this._hideBorders();this.showHeader()}});this._initDocking();return this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject();dhtmlXLayoutCell.prototype.i18n={expand:"Expand / Collapse"};dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name};dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var c=this.layout._getMainInst();if(c.dhxWins==null||this.conf.docked){c=null;return}var b=c.dhxWins.window(this.conf.name);b.close();this._attachFromCell(b);this.conf.docked=true;if(!this.conf.dock_collapsed){this.expand()}c._callMainEvent("onDock",[this.conf.name]);c=b=null};this.undock=function(b,k,g,j){var e=this.layout._getMainInst();if(e.dhxWins==null||this.conf.docked==false){e=null;return}this.conf.dock_collapsed=this.conf.collapsed;if(!this.conf.collapsed){this.collapse()}if(e.dhxWins.window(this.conf.name)!=null){var c=e.dhxWins.window(this.conf.name);c.show()}else{if(b==null){b=20}if(k==null){k=20}if(g==null){g=320}if(j==null){j=200}var c=e.dhxWins.createWindow(this.conf.name,b,k,g,j);c.button("close").hide();c.addUserButton("dock",99,"Dock");c.button("dock").show();c.button("dock").attachEvent("onClick",this._doOnDockClick);c.setText(this.getText());c.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=false;c._attachFromCell(this);e._callMainEvent("onUnDock",[this.conf.name]);e=c=null};this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=function(b){b.hide();return false};this._unloadDocking=function(){a=null}};dhtmlXLayoutCell.prototype._hdrInit=function(){var b="";if(window.dhx4.isIE){if(navigator.userAgent.indexOf("MSIE 9.0")!=-1){b=" dhx_cell_hdr_text_ie9"}else{if(window.dhx4.isIE8){b=" dhx_cell_hdr_text_ie8"}else{if(window.dhx4.isIE7){b=" dhx_cell_hdr_text_ie7"}else{if(window.dhx4.isIE6){b=" dhx_cell_hdr_text_ie6"}}}}}else{if(window.dhx4.isChrome||window.dhx4.isKHTML){b=" dhx_cell_hdr_text_chrome"}}var a=document.createElement("DIV");a.className="dhx_cell_hdr";a.innerHTML="<div class='dhx_cell_hdr_text"+b+"'></div>";this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);a=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:true};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx();this.attachEvent("_onSetSize",this._hdrOnSetSize);this.attachEvent("_onBorderChange",this._hdrOnBorderChange);this.attachEvent("_onViewSave",this._hdrOnViewSave);this.attachEvent("_onViewRestore",this._hdrOnViewRestore)};dhtmlXLayoutCell.prototype.showHeader=function(a){if(this.conf.hdr.visible||this.conf.collapsed){return}if(this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()){return}this.conf.hdr.w_saved=this.conf.hdr.h_saved=null;this.conf.hdr.visible=true;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr";if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.hideHeader=function(a){if(!this.conf.hdr.visible||this.conf.collapsed){return}this.conf.hdr.w_saved=this._getMinWidth(this._idd);this.conf.hdr.h_saved=this._getMinHeight(this._idd);this.conf.hdr.visible=false;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._hdrUpdBorder();this._mtbUpdBorder();if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return(this.conf.hdr.visible==true)};dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return(this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=="")};dhtmlXLayoutCell.prototype.setText=function(a){this.conf.hdr.text=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text};dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.conf.hdr.text_collapsed=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return(this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text)};dhtmlXLayoutCell.prototype._hdrUpdText=function(){var a=(this.conf.collapsed==true&&this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text);this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+a+"</span>"};dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){if(this.conf.borders==true){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden")}else{if(!this.conf.hdr.visible){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders"}}};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){if(this.conf.collapsed&&this.conf.mode=="v"){this._fitHdr()}};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(true);this._hdrUpdBorder()};dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.conf.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){if(this.conf.hdr.visible!=this.views[a].hdr_vis){this[this.views[a].hdr_vis?"showHeader":"hideHeader"](true)}this.views[a].hdr_vis=null;delete this.views[a].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(a){if(this.conf.collapsed&&this.conf.mode=="v"&&a!==true){return 27}return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXLayoutCell.prototype._fitHdr=function(){var b=this.cell.childNodes[this.conf.idx.hdr];if(this.conf.collapsed==true){if(typeof(dhtmlXLayoutObject.prototype._confGlob.hdrColH)=="undefined"){b.style.height=this.cell.offsetHeight+"px";dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(b.style.height)-this._getHdrHeight(true)}var a=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH;b.style.height=a+"px";b.firstChild.style.width=a-39+"px"}else{b.firstChild.style.width=b.style.height=null}b=null};dhtmlXLayoutCell.prototype.expand=function(j){if(!this.conf.collapsed){return true}var c=this.layout;if(this.conf.mode=="v"){var h=(j?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinWidth(this._idd));var e=c.cont.offsetWidth-c.conf.sw;if(h+this.conf.size.w_avl>e){c=null;return false}}else{var g=(j?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinHeight(this._idd)+c.cdata[c.conf.nextCell[this._idd]]._getHdrHeight());var b=c.cont.offsetHeight-c.conf.sw;if(g+this.conf.size.h_avl>b){c=null;return false}}if(this.conf.docked==false){this.dock();return}if(this.conf.hdr.visible==false){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._hdrUpdBorder()}this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,"");this.conf.collapsed=false;if(this.conf.mode=="v"){this.conf.size.w=Math.min(e-h,this.conf.size.w_saved);this.conf.size.w_saved=this.conf.size.w_avl=null}else{this.conf.size.h=Math.min(b-g,this.conf.size.h_saved);this.conf.size.h_saved=this.conf.size.h_avl=null}if(this.conf.mode=="v"){this._fitHdr()}c.setSizes(c.conf.nextCell[this._idd],c.conf.nextCell[this._idd],j==true,"expand");c.sep._blockSep();c=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent("onExpand",[this.conf.name]);a=null;return true};dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed){return false}var b=this.layout;if(b.cdata[b.conf.nextCell[this._idd]].expand(true)==false){return false}if(this.conf.mode=="v"){this.conf.size.w_saved=this.conf.size.w;this.conf.size.w_avl=this._getMinWidth(this._idd)}else{this.conf.size.h_saved=this.conf.size.h;this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()}if(this.conf.hdr.visible==false){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"}this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode;this.conf.collapsed=true;if(this.conf.mode=="v"){this.conf.size.w=b.conf.hh}else{this.conf.size.h=this._getHdrHeight()}b.setSizes(b.conf.nextCell[this._idd],b.conf.nextCell[this._idd],false,"collapse");b.sep._blockSep();b=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent("onCollapse",[this.conf.name]);a=null;return true};dhtmlXLayoutCell.prototype.isCollapsed=function(){return(this.conf.collapsed==true)};dhtmlXLayoutCell.prototype.setMinWidth=function(a){this.conf.min_width=parseInt(a)||0};dhtmlXLayoutCell.prototype.setMinHeight=function(a){this.conf.min_height=parseInt(a)||0};dhtmlXLayoutCell.prototype._getMinWidth=function(b){if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailWidth()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(b))}else{if(this.dataObj.conf.mode=="v"){var a=b||this._idd;if(this.dataObj.cdata[a].conf.collapsed){a=this.dataObj.conf.nextCell[a]}return Math.max(this.conf.min_width,this.dataObj.cdata[a]._getMinWidth(b)+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getWidth()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(b),this.dataObj.cdata.b._getMinWidth(b))}}}return Math.max(this.conf.min_width,1)};dhtmlXLayoutCell.prototype._getMinHeight=function(c){var b=0;if(this.conf.idx.menu!=null){b+=this.cell.childNodes[this.conf.idx.menu].offsetHeight}if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailHeight()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(c))}else{if(this.dataObj.conf.mode=="h"){var a=c;if(this.dataObj.cdata[a].conf.collapsed){a=this.dataObj.conf.nextCell[a]}return Math.max(this.conf.min_height,this.dataObj.cdata[a]._getMinHeight(c)+this.dataObj.cdata[a]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getHeight()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(c)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(c)+this.dataObj.cdata.b._getHdrHeight())}}}return Math.max(this.conf.min_height,b)};dhtmlXLayoutCell.prototype._getAvailWidth=function(c){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailWidth(c)}else{if(this.dataObj.conf.mode=="v"){var a=(this.dataObj.cdata.a.conf.collapsed==true);var b=(this.dataObj.cdata.b.conf.collapsed==true);if(c=="a"){return this.dataObj.cdata[b?"a":"b"]._getAvailWidth(c)}else{return this.dataObj.cdata[a?"b":"a"]._getAvailWidth(c)}}else{return Math.min(this.dataObj.cdata.a._getAvailWidth(c),this.dataObj.cdata.b._getAvailWidth(c))}}}return this.cell.offsetWidth-this._getMinWidth()};dhtmlXLayoutCell.prototype._getAvailHeight=function(e){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailHeight(e)}else{if(this.dataObj.conf.mode=="h"){var b=(this.dataObj.cdata.a.conf.collapsed==true);var c=(this.dataObj.cdata.b.conf.collapsed==true);if(e=="a"){return this.dataObj.cdata[c?"a":"b"]._getAvailHeight(e)}else{return this.dataObj.cdata[b?"b":"a"]._getAvailHeight(e)}}else{return Math.min(this.dataObj.cdata.a._getAvailHeight(e),this.dataObj.cdata.b._getAvailHeight(e))}}}var a=this._getHdrHeight();if(this.conf.mode=="v"&&this.conf.collapsed){a=this.conf.hh}return this.cell.offsetHeight-a-this._getMinHeight()};dhtmlXLayoutCell.prototype.setWidth=function(e){if(this.conf.mode=="v"){if(this.conf.collapsed){return}var g=this.layout;var h=g.cdata[g.conf.nextCell[this._idd]];if(h.conf.collapsed){e=e+g.conf.sw+h._getWidth();j=g=h=null;return}var c=this._getMinWidth(this._idd);var l=g.cont.offsetWidth-h._getMinWidth(this._idd)-g.conf.sw;e=Math.max(c,Math.min(e,l));this.conf.size.w=e;g.setSizes(h._idd,h._idd);g=h=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var j=this.layout.parentLayout;var g=this.layout;var h=g.cdata[g.conf.nextCell[this._idd]];for(var b in j.cdata){if(j.cdata[b].dataObj==g){j.cdata[b].setWidth(e)}}j=g=null}};dhtmlXLayoutCell.prototype.setHeight=function(l){if(this.conf.mode=="h"){if(this.conf.collapsed){return}var e=this.layout;var j=e.cdata[e.conf.nextCell[this._idd]];if(j.conf.collapsed){l=l+e.conf.sw+j._getHeight();var m=(this.layout!=null&&this.layout.parentLayout!=null?this.layout.parentLayout:null);if(m!=null){for(var b in m.cdata){if(m.cdata[b].dataObj==e){m.cdata[b].setHeight(l)}}}m=e=j=null;return}var g=this._getMinHeight(this._idd)+this._getHdrHeight();var c=e.cont.offsetHeight-j._getMinHeight(this._idd)-j._getHdrHeight()-e.conf.sw;l=Math.max(g,Math.min(l,c));this.conf.size.h=l;e.setSizes(j._idd,j._idd);e=j=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var m=this.layout.parentLayout;var e=this.layout;var j=e.cdata[e.conf.nextCell[this._idd]];for(var b in m.cdata){if(m.cdata[b].dataObj==e){m.cdata[b].setHeight(l)}}m=e=null}};dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h};dhtmlXLayoutCell.prototype.fixSize=function(b,e){this.conf.fixed.w=window.dhx4.s2b(b);this.conf.fixed.h=window.dhx4.s2b(e);var a=this.layout._getMainInst();var c={};a.forEachItem(function(g){if(g.conf.fsize!=null){var l=g.getId();var k={h:(g.conf.fixed.w==true),v:(g.conf.fixed.h==true)};for(var h in k){if(k[h]==true&&g.conf.fsize[h]!=null){if(!(g.conf.fsize[h] instanceof Array)){g.conf.fsize[h]=[g.conf.fsize[h]]}for(var j=0;j<g.conf.fsize[h].length;j++){c[g.conf.fsize[h][j]]=true}}}}g=null});a._forEachSep(function(g){g._lockSep(c[g.conf.idx]==true);g=null});a=null};dhtmlXCellObject.prototype.attachLayout=function(a){this.callEvent("_onBeforeContentAttach",["layout"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(typeof(this._layoutMainInst)!="undefined"){b._layoutMainInst=this._layoutMainInst}if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell){b._isParentCell=true;if(this.conf.skin=="material"&&String(this.cell.className).match(/dhx_cell_nested_layout/)==null){this.cell.className+=" dhx_cell_nested_layout"}}if(typeof(window.dhtmlXAccordionCell)=="function"&&this instanceof window.dhtmlXAccordionCell){if(this.conf.skin=="material"){b._ofs={t:14,r:14,b:14,l:14}}else{b._ofs={t:-1,r:-1,l:-1,b:-1}}}if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell){if(this.conf.skin=="dhx_skyblue"){b._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="material"){b._ofs={t:8,r:8,b:8,l:8}}}if(typeof(window.dhtmlXSideBarCell)=="function"&&this instanceof window.dhtmlXSideBarCell){if(this.conf.skin=="dhx_web"){b._ofs={l:8};if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=9}}else{if(this.conf.skin=="dhx_terrace"){b._ofs={l:11};if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=10}}else{b._ofs={l:-1}}}}if(typeof(window.dhtmlXCarouselCell)=="function"&&this instanceof window.dhtmlXCarouselCell){this._hideBorders()}if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){if(this.conf.skin=="material"){b._ofs={t:14,r:14,b:14,l:14}}}if(typeof(a)=="string"){a={pattern:a}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=b;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(a);if(this instanceof window.dhtmlXLayoutCell){this.dataObj.parentLayout=this.layout}b._layoutMainInst=null;a.parent=null;b=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBar(e,j){var g=this;this.conf={skin:(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material"),css:"dhxtabbar",lastActive:null,closeButton:false,align:"left",tabsMode:(j=="bottom"?"bottom":"top"),tabsContCss:"",contZone:true,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:false,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}};if(this.conf.skin=="material"){this.conf.arwMode="auto"}var b=navigator.userAgent;if(b.indexOf("Safari")>=0&&(b.indexOf("5.1.7")>=0||(b.match(/7[\.\d]* mobile/gi)!=null&&b.match(/AppleWebKit/gi)!=null))){this.conf.tabsContCss=" safari_517_fix"}var h;if(e!=null&&typeof(e)=="object"&&typeof(e.tagName)=="undefined"){h=e.parent;if(typeof(e.skin)!="undefined"){this.conf.skin=e.skin}if(typeof(e.mode)!="undefined"){this.conf.tabsMode=(e.mode=="bottom"?"bottom":"top")}if(typeof(e.align)!="undefined"){this.conf.align=(e.align=="right"?"right":"left")}if(typeof(e.close_button)!="undefined"){this.conf.closeButton=window.dhx4.s2b(e.close_button)}if(typeof(e.content_zone)!="undefined"){this.conf.contZone=window.dhx4.s2b(e.content_zone)}if(typeof(e.xml)!="undefined"){this.conf.autoload.xml=e.xml}if(typeof(e.json)!="undefined"){this.conf.autoload.xml=e.json}if(typeof(e.tabs)!="undefined"){this.conf.autoload.tabs=e.tabs}if(typeof(e.onload)!="undefined"){this.conf.autoload.onload=e.onload}if(typeof(e.arrows_mode)!="undefined"){this.conf.autoload.arrows_mode=e.arrows_mode}}else{h=e}window.dhtmlXCellTop.apply(this,[h,e.offsets]);if(this.base._ofs!=null&&this.base._ofs.t!=null){this.conf.tabsTop=this.base._ofs.t}this.tabsMode=document.createElement("DIV");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.cont.appendChild(this.tabsMode);this.tabsArea=document.createElement("DIV");this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>";this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.tabsArea.childNodes[0].onclick=function(){if(g.conf.align=="left"){g._moveTabs(1)}else{g._moveTabs(-1)}};this.tabsArea.childNodes[2].onclick=function(){if(g.conf.align=="left"){g._moveTabs(-1)}else{g._moveTabs(1)}};this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])};this.tabsArea.onclick=function(k){k=k||event;var a=(k.target||k.srcElement);while(a!=null){if(typeof(a._tabCloseId)!="undefined"){if(g._onTabsAreaClick(a._tabCloseId)!==true){return}g.t[a._tabCloseId].conf.remove=true;g._hideTab(a._tabCloseId);a=null}else{if(typeof(a._tabId)!="undefined"){g._doOnClick(a._tabId);a=null}}if(a!=null){a=a.parentNode;if(a==this){a=null}}}};this.tabsArea.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]);if(this.t[a].conf.enabled){this._setTabActive(a)}};this.t={};this.addTab=function(a,r,l,o,n,s){s=(typeof(s)=="undefined"?(this.conf.closeButton==true):window.dhx4.s2b(s));n=window.dhx4.s2b(n);var m=document.createElement("DIV");m.className="dhxtabbar_tab";m.innerHTML="<div class='dhxtabbar_tab_text"+(s?" dhxtabbar_tab_text_close":"")+"'>"+r+"</div>"+(s?"<div class='dhxtabbar_tab_close'></div>":"");m._tabId=a;if(s){m.childNodes[1]._tabCloseId=a}var k=this.tabsArea.childNodes[1].firstChild;if(o!=null&&o+1>0&&o+1<k.childNodes.length){k.insertBefore(m,k.childNodes[o+1])}else{k.appendChild(m)}var t=false;if(typeof(l)=="undefined"||l==null||l=="*"){l=this._getLabelWidth(r,s);t=true}else{l=parseInt(l)}m.style.width=l+"px";var q=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(q.cell);this.t[a]={tab:m,cell:q,conf:{text:r,visible:true,active:false,enabled:true,close:s,width:l,autowidth:t}};k=q=null;if(n){this._setTabActive(a)}else{this._adjustCell(a)}if(this.conf.initSeq!=true&&this.conf.arwMode=="auto"){this.setSizes()}};this.setSizes=function(){this._adjustCont();if(this.conf.tabsAreaOfs==null){this.tabsArea.style.width=this.cont.offsetWidth+"px";this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth}this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(true);this.callEvent("_onSetSizes",[])};this._adjustCell=function(m){if(!this.conf.contZone||m==null){return}var l=(this.conf.tabsMode=="top"?this.tabsArea.offsetHeight:0)+this.conf.tabsTop;var k=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop;var a=this.t[m].cell.dataType;if(this.conf.skin=="dhx_skyblue"&&(a=="layout"||a=="tabbar"||a=="acc")){if(this.conf.tabsMode=="top"){l=l-1}k=k+1}if(m!=this.conf.lastActive){l=-5000;this.t[m].cell.cell.style.visibility="hidden";this.t[m].cell.cell.style.zIndex=0}this.t[m].cell._setSize(0,l,this.cont.offsetWidth,k)};this.setTabsMode=function(a){this.conf.tabsMode=(a=="bottom"?"bottom":"top");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.setSizes()};this._tabCss=function(o,m){var k=this.t[o].conf.active;var n=!this.t[o].conf.enabled;var l=!this.t[o].conf.visible;return"dhxtabbar_tab"+(l?" dhxtabbar_tab_hidden":(k||n?" dhxtabbar_tab"+(k?"_actv":"")+(n?"_dis":""):""))};this._getLabelWidth=function(l,k){if(this.tabsTextTest==null){this.tabsTextTest=document.createElement("SPAN");this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=l;var a=this.tabsTextTest.offsetWidth;if(window.dhx4.isIE&&a==0){a=this.tabsTextTest.offsetWidth}a+=this.conf.tabsWidth[this.conf.skin][0];if(k==true){a+=this.conf.tabsWidth[this.conf.skin][1]}document.body.removeChild(this.tabsTextTest);return a};this._adjustTabs=function(n){if(this._checkArrows()==true||n==true){this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px";this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+this.conf.tabsOfs*2+"px"}var r=this.tabsArea.childNodes[1];if(r.offsetWidth<5){r=null;return}var a=parseInt(r.childNodes[0].style[this.conf.align]);var m=null;for(var o=0;o<r.childNodes[0].childNodes.length;o++){var s=r.childNodes[0].childNodes[o]._tabId;if(s!=null&&this.t[s].conf.visible){var l=this.t[s].tab.offsetWidth-this.conf.tabsOfs;if(this.t[s].conf.active){if(a<0||r.offsetWidth<l){m={d:1,id:s}}else{if(a+l>r.offsetWidth){m={d:-1,id:s}}}}a+=l}}if(m!=null){this._moveTabs(m.d,m.id)}else{if(r.offsetWidth>a+1){r.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(r.childNodes[0].style[this.conf.align])+(r.offsetWidth-a))+"px"}}r=m=null};this._moveTabs=function(v,n){var m=this.tabsArea.childNodes[1].childNodes[0];var s=0;var w=[];var z=null;for(var a=0;a<m.childNodes.length;a++){var k=m.childNodes[a]._tabId;if(k!=null&&this.t[k].conf.visible){w.push({id:k,w:this.t[k].tab.offsetWidth-this.conf.tabsOfs,ind:s});if(k==n){z=s}s++}}var y=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]);var r=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs;var u=null;var o=null;for(var a=0;a<w.length;a++){w[a].x=y;if(u==null&&y>=0&&y+w[a].w>0){u=w[a]}if(y<r&&y+w[a].w<=r){o=w[a]}y+=w[a].w}if(z!=null){var A=w[z]}else{var A=null;if(v>0){if(u==null){if(w.length>0){A=w[w.length-1]}}else{if(u.ind>0&&w.length>=u.ind){A=w[u.ind-1]}}}else{if(o==null){if(w.length>0){A=w[0]}}else{if(w.length>o.ind){A=w[o.ind+1]}}}}if(A!=null){if(v>0){if(y<r){m.style[this.conf.align]=Math.min(0,parseInt(m.style[this.conf.align])+(r-y))+"px"}else{m.style[this.conf.align]=parseInt(m.style[this.conf.align])-A.x+"px"}}else{m.style[this.conf.align]=parseInt(m.style[this.conf.align])-A.x+r-A.w+"px"}}m=A=w=null};this._getNextVisible=function(k,a){return this._getNearVisible(k,a,"next")};this._getPrevVisible=function(k,a){return this._getNearVisible(k,a,"previous")};this._getFirstVisible=function(){return this._getNearVisible(null,false,"first")};this._getNearVisible=function(q,m,o){if(o=="first"){var n=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];o="next"}else{if(q==null||this.t[q]==null){return(m?this._getFirstVisible():null)}var n=this.t[q].tab[o+"Sibling"]}var l=null;while(n!=null&&l==null){var a=n._tabId;if(a!=null&&l==null&&this.t[a].conf.visible){l=a}else{n=n[o+"Sibling"]}}n=null;return l};this._showTab=function(k,a){if(this.t[k]==null){return}if(this.t[k].conf.transActv==true){if(this.t[k].conf.transMode=="show"){return}}else{if(this.t[k].conf.visible==true){return}}if(this.conf.transProp!==false){this.t[k].conf.transActv=true;this.t[k].conf.transMode="show";this.t[k].conf.transProp=this.conf.transProp;this.t[k].conf.transActvId=(a?k:null);if(!this.t[k].conf.transEv){this.t[k].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[k].conf.transEv=true}this.t[k].conf.visible=true;this.t[k].tab.className=this._tabCss(k);this.t[k].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[k].tab.style.width=this.t[k].conf.width+"px";if(this.t[k].tab.clientWidth>=this.t[k].conf.width){this.t[k].tab.style.visibility="visible"}}else{this.t[k].conf.visible=true;this.t[k].tab.style.display="";if(a||this.t[k].conf.active){this.t[k].conf.active=false;this._setTabActive(k)}else{this._adjustTabs()}}};this._hideTab=function(o,a){if(this.t[o]==null){return}if(this.t[o].conf.transActv==true){if(this.t[o].conf.transMode=="hide"){return}}else{if(this.t[o].conf.visible!=true){return}}var k=false;if(this.conf.lastActive==o){this.conf.lastActive=null;this.t[o].conf.active=false;this.t[o].tab.className=this._tabCss(o);k=true}var m=this._getPrevVisible(o);var l=this._getNextVisible(o);var n=(k==true&&a!==false?(a==true?null:a)||l||m:null);if(this.conf.transProp!==false){this.t[o].conf.transActv=true;this.t[o].conf.transMode="hide";this.t[o].conf.transProp=this.conf.transProp;this.t[o].conf.transActvId=n;this.t[o].conf.visible=false;if(!this.t[o].conf.transEv){this.t[o].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[o].conf.transEv=true}this.t[o].tab.style.visibility="hidden";this.t[o].tab.className=g._tabCss(o);this.t[o].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[o].tab.style.width="0px"}else{this.t[o].tab.style.display="none";this.t[o].conf.visible=false;if(this.conf.contZone){this.t[o].cell.cell.style.visibility="hidden";this.t[o].cell.cell.style.top="-5000px"}if(n!=null){this._setTabActive(n)}this._adjustTabs();if(this.t[o].conf.remove){this._removeTab(o)}}};this._isTabVisible=function(a){return(this.t[a].conf.visible==true)};this._doOnTrEnd=function(){var l=this._tabId;if(g.t[l]==null){return}var a=g.t[l];var k=a.conf.transActvId;if(a.conf.transMode=="hide"){if(a.conf.remove){g._removeTab(l)}else{a.tab.style[a.conf.transProp]="";if(g.conf.contZone){a.cell.cell.style.visibility="hidden";a.cell.cell.style.top="-5000px"}a.conf.transActv=false}}else{if(a.conf.transMode=="show"){a.tab.style[a.conf.transProp]="";a.tab.style.visibility="visible";a.conf.transMode=null;a.conf.transActv=false}}if(k!=null){g._setTabActive(k)}else{g._adjustTabs()}a=null};this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)};this.unload=function(){this.conf.unloading=true;this.clearAll();this.t=null;if(this.tabsTextTest!=null){if(this.tabsTextTest.parentNode){this.tabsTextTest.parentNode.removeChild(this.tabsTextTest)}this.tabsTextTest=null}window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var k in this){this[k]=null}g=null};this.enableContentZone=function(a){this.conf.contZone=(a==true)};this.setSkin=function(l){this._setBaseSkin(l);this.conf.skin=l;if(this.tabsTextTest!=null){this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}for(var k in this.t){this.t[k].cell._resetSizeState();if(this.t[k].conf.autowidth==true){this.t[k].conf.width=this._getLabelWidth(this.t[k].conf.text,this.t[k].conf.close);if(this.t[k].conf.visible){this.t[k].tab.style.width=this.t[k].conf.width+"px"}}}this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(a){a=(a=="left"?"left":"right");if(a==this.conf.align){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";return}if(this.conf.transProp!==false){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="";this.conf.align=a;this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}};this._initObj=function(m){this.conf.initSeq=true;this.clearAll();var a=false;if(m.settings!=null){if(m.settings.skin!=null){this.setSkin(m.settings.skin)}if(m.settings.close_button!=null){this.enableTabCloseButton(window.dhx4.s2b(m.settings.close_button))}else{if(m.settings.closeButton!=null){this.enableTabCloseButton(window.dhx4.s2b(m.settings.closeButton))}}if(m.settings.align!=null){this.setAlign(m.settings.align)}if(m.settings.hrefmode=="ajax"){a=true}if(m.settings.hrefmode=="ajax-html"){a=true;this.conf.url_demand=true}}if(m.tabs!=null){for(var l=0;l<m.tabs.length;l++){var k=m.tabs[l];if(typeof(k.id)=="undefined"){k.id=window.dhx4.newId()}if(!isNaN(parseInt(k.width))){k.width=parseInt(k.width)}else{k.width=null}this.addTab(k.id,k.text||k.label||"",k.width,k.index,window.dhx4.s2b(k.selected)||window.dhx4.s2b(k.active),k.close);if(k.content!=null){this.cells(k.id).attachHTMLString(k.content)}else{if(k.href!=null){if(this.conf.url_demand==true){this.conf.urls[k.id]={href:k.href,ajax:a}}else{this.cells(k.id).attachURL(k.href,a)}}}if(typeof(k.enabled)!="undefined"&&window.dhx4.s2b(k.enabled)==false){this.tabs(k.id).disable()}else{if(typeof(k.disabled)!="undefined"&&window.dhx4.s2b(k.disabled)==true){this.tabs(k.id).disable()}}}}this.conf.initSeq=false;if(this.conf.arwMode=="auto"){this.setSizes()}if(this.conf.url_demand==true){this._loadURLOnDemand(this.conf.lastActive)}};this._xmlToObj=function(o){var n={settings:{},tabs:[]};var k=o.getElementsByTagName("tabbar")[0];if(k!=null){for(var s in {skin:1,align:1,closeButton:1,hrefmode:1}){if(k.getAttribute(s)!=null){n.settings[s]=k.getAttribute(s)}}var v=k.getElementsByTagName("tab");for(var l=0;l<v.length;l++){var m={text:(v[l].firstChild.nodeValue||"")};for(var s in {id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1}){if(v[l].getAttribute(s)!=null){m[s]=v[l].getAttribute(s)}}var x=v[l].getElementsByTagName("content")[0];if(x!=null){m.content="";for(var u=0;u<x.childNodes.length;u++){m.content+=(x.childNodes[u].nodeValue||"")}}n.tabs.push(m)}}return n};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:true});var c=window.dhx4.transDetect();this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.transValueWidth="width "+this.conf.transSpeed;c=null;if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}this._callMainEvent=function(k,a){return this.callEvent(k,a)};window.dhx4._eventable(this);if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}else{if(this.conf.autoload.tabs!=null){this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload)}}}if(this.conf.autoload.arrows_mode!=null){this.setArrowsMode(this.conf.autoload.arrows_mode)}this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype=new dhtmlXCellTop();dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs=({dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin])};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){if(this.t[a]){return this.t[a].cell}return null};dhtmlXTabBar.prototype.getAllTabs=function(){var c=[];for(var b in this.t){c.push(b)}return c};dhtmlXTabBar.prototype._setTabActive=function(b,a){if(!this.t[b]||this.t[b].conf.active){return}if(typeof(a)=="undefined"){a=true}if(a==true&&this.callEvent("onSelect",[b,this.conf.lastActive])!==true){return}this.setTabInActive();this.t[b].conf.active=true;if(this.conf.contZone){this.t[b].cell.cell.style.visibility="visible";this.t[b].cell.cell.style.top="0px";this.t[b].cell.cell.style.zIndex=1}this.t[b].tab.className=this._tabCss(b);this.conf.lastActive=b;this.setSizes();if(this.conf.url_demand==true){this._loadURLOnDemand(b)}};dhtmlXTabBar.prototype.setTabInActive=function(){if(this.conf.lastActive!=null&&this.t[this.conf.lastActive]){this.t[this.conf.lastActive].conf.active=false;if(this.conf.contZone){this.t[this.conf.lastActive].cell.cell.style.visibility="hidden";this.t[this.conf.lastActive].cell.cell.style.top="-5000px";this.t[this.conf.lastActive].cell.cell.style.zIndex=0}this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive);this.conf.lastActive=null}};dhtmlXTabBar.prototype._isTabActive=function(a){return(a==this.conf.lastActive&&this.conf.lastActive!=null)};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype._enableTab=function(b,a){if(!this.t[b]||this.t[b].conf.enabled){return}this.t[b].conf.enabled=true;this.t[b].tab.className=this._tabCss(b);if(a==true){this._setTabActive(b)}};dhtmlXTabBar.prototype._disableTab=function(b,a){if(!this.t[b]||!this.t[b].conf.enabled){return}this.t[b].conf.enabled=false;this.t[b].tab.className=this._tabCss(b);if(a!==false&&this.conf.lastActive==b){if(a==true){a=this._getNextVisible(b)||this._getPrevVisible(b)}this._setTabActive(a)}};dhtmlXTabBar.prototype._isTabEnabled=function(a){return(this.t[a]!=null&&this.t[a].conf.enabled==true)};dhtmlXTabBar.prototype._setTabText=function(e,c,b){if(!this.t[e]){return}var a=false;if(typeof(b)=="undefined"||b==null){b=this._getLabelWidth(c,this.t[e].conf.close);a=true}this.t[e].tab.style.width=b+"px";this.t[e].tab.childNodes[0].innerHTML=c;this.t[e].conf.text=c;this.t[e].conf.width=b;this.t[e].conf.autowidth=a};dhtmlXTabBar.prototype._getTabText=function(a){if(!this.t[a]){return null}return this.t[a].conf.text};dhtmlXTabBar.prototype._removeTab=function(k,c,h){if(!this.t[k]){return}if(h!=true&&this.t[k].conf.remove!=true){this.t[k].conf.remove=true;this._hideTab(k,c);return}if(typeof(c)=="undefined"){c=true}var e=this._getNextVisible(k);var g=this._getPrevVisible(k);if(this.t[k].conf.transEv==true){this.t[k].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[k].conf.transEv=false}for(var b in this.t[k].conf){this.t[k].conf[b]=null}this.t[k].conf=null;delete this.t[k].conf;this.t[k].cell._unload();this.t[k].cell=null;this.t[k].tab.parentNode.removeChild(this.t[k].tab);this.t[k].tab=null;this.t[k]=null;delete this.t[k];this.conf.urls[k]=null;delete this.conf.urls[k];if(this.conf.lastActive==k){this.conf.lastActive=null;if(c!=false){var j=(c==true?(e||g||this._getFirstVisible()):c);if(j!=null){this._setTabActive(j)}}}else{if(h!=true){this._adjustTabs()}}};dhtmlXTabBar.prototype.clearAll=function(){for(var b in this.t){this._removeTab(b,false,true)}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};dhtmlXTabBar.prototype.moveTab=function(c,a){if(!this.t[c]||a<0){return}a+=1;var b=this.tabsArea.childNodes[1].firstChild;if(b.childNodes[a]!=this.t[c].tab){b.removeChild(this.t[c].tab);if(a>=b.childNodes.length){b.appendChild(this.t[c].tab)}else{b.insertBefore(this.t[c].tab,b.childNodes[a])}}b=null};dhtmlXTabBar.prototype._getIndex=function(e){var a=-1;var c=this.tabsArea.childNodes[1].firstChild;for(var b=1;b<c.childNodes.length;b++){if(c.childNodes[b]._tabId==e){a=b-1}}c=null;return a};dhtmlXTabBar.prototype.getNumberOfTabs=function(e){var c=0;for(var b in this.t){c+=(e!=true?1:(this.t[b].conf.visible==true?1:0))}return c};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(c){for(var b in this.t){c.apply(window,[this.t[b].cell])}};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};dhtmlXTabBar.prototype.setArrowsMode=function(a){a={auto:"auto",always:"always"}[String(a)];if(a==null||a==this.conf.mode){return}this.conf.arwMode=a;if(a=="always"){this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left";this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"}this.setSizes()};dhtmlXTabBar.prototype._checkArrows=function(){var g=false;if(this.conf.arwMode=="auto"){var e=0;for(var c in this.t){e+=this.t[c].tab.offsetWidth}var b=this.tabsArea.childNodes[0];var h=this.tabsArea.childNodes[2];if(e>this.cont.offsetWidth){if(b.className.search(/dhxtabbar_tabs_ar_hidden/)>=0){b.className=b.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");h.className=h.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");g=true}}else{if(b.className.search(/dhxtabbar_tabs_ar_hidden/)<1){b.className+=" dhxtabbar_tabs_ar_hidden";h.className+=" dhxtabbar_tabs_ar_hidden";g=true}}b=h=null}return g};dhtmlXTabBar.prototype._loadURLOnDemand=function(a){if(a!=null&&this.conf.urls[a]!=null){this.cells(a).attachURL(this.conf.urls[a].href,this.conf.urls[a].ajax);this.conf.urls[a]=null}};window.dhtmlXTabBarCell=function(e,c){dhtmlXCellObject.apply(this,[e,"_tabbar"]);this.tabbar=c;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(a){return function(){var g=[this._idd];for(var h=0;h<arguments.length;h++){g.push(arguments[h])}return this.tabbar[a].apply(this.tabbar,g)}};for(var b in this.conf.tabbar_funcs){if(typeof(this[b])!="function"){this[b]=this._tabbarCall(this.conf.tabbar_funcs[b])}}this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var g in this.conf.tabbar_funcs){this[g]=null;this.conf.tabbar_funcs[g]=null}this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(a){if(a=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject();dhtmlXCellObject.prototype.attachTabbar=function(a){this.callEvent("_onBeforeContentAttach",["tabbar"]);if(typeof(a)=="string"){a={mode:a}}else{if(typeof(a)!="object"||a==null){a={}}}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)=="function"&&this instanceof window.dhtmlXAccordionCell){if(this.conf.skin=="material"){b._ofs={t:-1,r:-1,b:-1,l:-1}}else{b._ofs={t:-1}}}if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell){if(this.conf.skin=="dhx_skyblue"){b._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="material"){b._ofs={t:8,r:8,b:8,l:8}}}if(typeof(window.dhtmlXSideBarCell)=="function"&&this instanceof window.dhtmlXSideBarCell){b._ofs={l:-1};if(this.conf.skin=="dhx_web"&&this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.conf.skin=="dhx_terrace"){if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=-1}}}if(typeof(window.dhtmlXCarouselCell)=="function"&&this instanceof window.dhtmlXCarouselCell){this._hideBorders()}this._attachObject(b);a.skin=this.conf.skin;a.parent=b;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=b=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBarInitFromHTML(){var z=document.getElementsByTagName("div");for(var i=0;i<z.length;i++){if(z[i].className.indexOf("dhtmlxTabBar")!=-1){var conf={settings:{},tabs:[]};var n=z[i];var id=n.id;n.className="";var k=new Array();for(var j=0;j<n.childNodes.length;j++){if(n.childNodes[j].tagName&&n.childNodes[j].tagName!="!"){k[k.length]=n.childNodes[j]}}var skin=n.getAttribute("skin");if(skin!=null){conf.settings.skin=skin}var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w;acs=n.getAttribute("onbeforeinit");if(acs){eval(acs)}align=n.getAttribute("align");if(align){conf.settings.align=align}var cont={};for(var j=0;j<k.length;j++){var m=k[j];var tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")};var href=m.getAttribute("href");if(href){cont[m.id]={href:href}}else{cont[m.id]={cont:m}}conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont){if(cont[a].href){w.cells(a).attachURL(cont[a].href);cont[a].href=null}else{w.cells(a).attachObject(cont[a].cont);if(cont[a].cont.style.display=="none"){cont[a].cont.style.display=""}cont[a].cont=null}cont[a]=null}var selId=n.getAttribute("select");if(selId!=null){w.tabs(selId).setActive()}else{if(w.getActiveTab()==null){var v=w._getFirstVisible();if(v!=null){w.cells(v).setActive()}}}acs=n.getAttribute("oninit");if(acs){eval(acs)}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}}if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.attachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXWindows(k){var h=this;var e={};if(typeof(k)!="undefined"){for(var c in k){e[c]=k[c]}}k=null;this.conf={skin:window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:false,vp_of_auto:(e.vp_overflow=="auto"),vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:false,dblclick_ev:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8),fr_cover:(navigator.userAgent.indexOf("MSIE 6.0")>=0)};var b=window.dhx4.transDetect();this.conf.tr={prop:b.transProp,ev:b.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};if(!e.viewport){this.attachViewportTo(document.body)}else{if(e.viewport.object!=null){this.attachViewportTo(e.viewport.object)}else{if(e.viewport.left!=null&&e.viewport.top!=null&&e.viewport.width!=null&&e.viewport.height!=null){this.setViewport(e.viewport.left,e.viewport.top,e.viewport.width,e.viewport.height,e.viewport.parent)}else{this.attachViewportTo(document.body)}}}this.w={};this.createWindow=function(m,A,w,n,D){var l={};if(arguments.length==1&&typeof(m)=="object"){l=m}else{l.id=m;l.left=A;l.top=w;l.width=n;l.height=D;if(typeof(l.id)=="undefined"||l.id==null){l.id=window.dhx4.newId()}while(this.w[l.id]!=null){l.id=window.dhx4.newId()}}if(l.left==null){l.left=0}if(l.top==null){l.top=0}l.move=(l.move!=null&&window.dhx4.s2b(l.move)==false?false:(l.deny_move!=null&&window.dhx4.s2b(l.deny_move)==true?false:true));l.park=(l.park!=null&&window.dhx4.s2b(l.park)==false?false:(l.deny_park!=null&&window.dhx4.s2b(l.deny_park)==true?false:true));l.resize=(l.resize!=null&&window.dhx4.s2b(l.resize)==false?false:(l.deny_resize!=null&&window.dhx4.s2b(l.deny_resize)==true?false:true));l.keep_in_viewport=(l.keep_in_viewport!=null&&window.dhx4.s2b(l.keep_in_viewport));l.modal=(l.modal!=null&&window.dhx4.s2b(l.modal));l.center=(l.center!=null&&window.dhx4.s2b(l.center));l.text=(l.text!=null?l.text:(l.caption!=null?l.caption:"dhtmlxWindow"));l.header=(!(l.header!=null&&window.dhx4.s2b(l.header)==false));var E=document.createElement("DIV");E.className="dhxwin_active";this.vp.appendChild(E);E._isWindow=true;E._idd=l.id;var s=document.createElement("DIV");s.className="dhxwin_hdr";s.style.zIndex=0;s.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+l.text+"</div></div><div class='dhxwin_btns'></div>";E.appendChild(s);s.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};s.oncontextmenu=function(a){a=a||event;a.cancelBubble=true;return false};s._isWinHdr=true;s.firstChild._isWinIcon=true;var o=document.createElement("DIV");o.className="dhxwin_brd";E.appendChild(o);var v=document.createElement("DIV");v.className="dhxwin_fr_cover";v.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>";E.appendChild(v);this.w[l.id]={win:E,hdr:s,brd:o,fr_cover:v,b:{},conf:{z_id:window.dhx4.newId(),actv:false,modal:false,maxed:false,parked:false,sticked:false,visible:true,header:true,text:l.text,keep_in_vp:l.keep_in_viewport,allow_move:l.move,allow_park:l.park,allow_resize:l.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var q={help:{title:"Help",visible:false},stick:{title:"Stick",visible:false},park:{title:"Park",visible:true},minmax:{title:"Min/Max",visible:true},close:{title:"Close",visible:true}};for(var z in q){var u=new dhtmlXWindowsButton(this,l.id,z,q[z].title,false);if(q[z].visible==false){u.hide()}s.lastChild.appendChild(u.button);this.w[l.id].b[z]=u;u=null}this._winAdjustTitle(l.id);this.w[l.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[l.id].conf.z_id);var C=new dhtmlXWindowsCell(l.id,this);this.w[l.id].win.insertBefore(C.cell,v);this.w[l.id].cell=C;if(typeof(window.addEventListener)=="function"){this.w[l.id].win.addEventListener("mousedown",this._winOnMouseDown,false);this.w[l.id].win.addEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){this.w[l.id].win.addEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){this.w[l.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){this.w[l.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);this.w[l.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{this.w[l.id].win.attachEvent("onmousedown",this._winOnMouseDown);this.w[l.id].win.attachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){this.w[l.id].win.attachEvent("ondblclick",this._winOnMouseDown)}}this._winInitFRM(l.id);this._winSetPosition(l.id,l.left,l.top);this._winSetSize(l.id,l.width,l.height);this._winMakeActive(l.id);if(l.center==true){this.w[l.id].cell.center()}if(l.modal==true){this.w[l.id].cell.setModal(true)}if(l.header==false){this.w[l.id].cell.hideHeader()}f=E=s=o=v=C=null;return this.w[l.id].cell};this._winOnMouseDown=function(m){m=m||event;var a=m.target||m.srcElement;var l={press_type:m.type};if(m.type=="MSPointerDown"||m.type=="pointerdown"){return}else{if(h.conf.ev_skip==true){h.conf.ev_skip=false;a=null;return}}while(a!=null&&a._isWindow!=true){if(typeof(a.className)!="undefined"&&l.mode==null){if(typeof(a._buttonName)!="undefined"){l.mode="button";l.button_name=a._buttonName}else{if(a._isWinHdr==true){l.mode="hdr"}else{if(a._isWinIcon==true){l.mode="icon"}}}}a=a.parentNode}if(l.mode==null){l.mode="win"}l.id=(a!=null&&a._isWindow==true?a._idd:null);a=null;if(l.id!=null&&h.w[l.id]!=null){h.callEvent("_winMouseDown",[m,l])}};this._winOnParkTrans=function(l){if(l.stopPropagation){l.stopPropagation()}var a=h.w[this._idd];if(l.propertyName=="opacity"){h._winCellClearOpacity(this._idd)}if(l.propertyName=="height"&&a.conf.tr_mode=="park"){if(a.conf.tr_mode=="park"){a.win.style[h.conf.tr.prop]="";if(!a.conf.parked){h._winAdjustCell(this._idd);h._callMainEvent("onParkDown",this._idd);if(a.conf.keep_in_vp){h._winAdjustPosition(this._idd,a.conf.x,a.conf.y)}}else{a.hdr.style.zIndex=3;h._callMainEvent("onParkUp",this._idd)}}}a=null};this.unload=function(){this.conf.unloading=true;if(this._dndInitModule){this._dndUnloadModule()}for(var l in this.w){this._winClose(l)}this.w=null;if(this.cm!=null&&typeof(this._unloadContextMenu)=="function"){this._unloadContextMenu()}window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(var l in this.conf){this.conf[l]=null;delete this.conf[l]}for(var l in this){this[l]=null}h=l=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);if(this._dndInitModule){this._dndInitModule()}if(e.wins!=null){for(var j=0;j<e.wins.length;j++){var g=e.wins[j];this.createWindow(g)}}e=null;return this}dhtmlXWindows.prototype.forEachWindow=function(c){for(var b in this.w){c.apply(window,[this.w[b].cell])}};dhtmlXWindows.prototype.window=function(a){if(this.w[a]!=null){return this.w[a].cell}return null};dhtmlXWindows.prototype.isWindow=function(a){return(this.w[a]!=null)};dhtmlXWindows.prototype.findByText=function(e){var c=[];for(var b in this.w){if((this.w[b].cell.getText()).indexOf(String(e))>=0){c.push(this.w[b])}}return c};dhtmlXWindows.prototype.setSkin=function(c){if(c==this.conf.skin){return}if(this.vp!=null){this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+c)}for(var b in this.w){this.w[b].cell._resetSizeState();this._winAdjustCell(b);this._winAdjustTitle(b)}this.conf.skin=c};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(false)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(true)};dhtmlXWindows.prototype._getTopBottomWin=function(g){var e=null;for(var b in this.w){if(this.w[b].conf.visible){var c=false;if(e!=null){c=e.z>this.w[b].win.style.zIndex;if(g){c=!c}}if(e==null||c){e={win:this.w[b].cell,z:this.w[b].win.style.zIndex}}}}return(e?e.win:null)};dhtmlXWindows.prototype._winMakeActive=function(e,h){if(e!=null&&h!==true&&this.w[e].conf.actv==true){return}var s=[];var m={};for(var c=0;c<this._zOrder.length;c++){var l=this._zOrder[c].name;var g=this._zOrder[c].value;var t=[];for(var o in this.w){var r=this.w[o];if(m[o]==null&&r.conf[l]===g&&r.conf.visible==true){if(e!=o){window.dhx4.zim.clear(r.conf.z_id);t.push([o,Number(r.win.style.zIndex)]);m[o]=true}}r=null}t.sort(function(q,k){return(q[1]<k[1]?1:-1)});if(e!=null&&this.w[e].conf[l]===g&&m[e]==null){window.dhx4.zim.clear(this.w[e].conf.z_id);var j=[[e,Number(this.w[e].win.style.zIndex)]];t=j.concat(t);m[e]=true}s=s.concat(t)}for(var c=s.length-1;c>=0;c--){var o=s[c][0];var r=this.w[o];r.win.style.zIndex=window.dhx4.zim.reserve(r.conf.z_id);if(r.conf.modal&&this.mcover!=null){for(var n in this.mcover){this.mcover[n].style.zIndex=r.win.style.zIndex}}this._winAdjustFRMZIndex(o);if(e==null&&c==0){e=o}r.conf.actv=(e==o);r.win.className=(r.conf.actv?"dhxwin_active":"dhxwin_inactive");r=null}if(e!=null&&this.conf.last_active!=e){this._callMainEvent("onFocus",e)}this.conf.last_active=e};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:true},{name:"sticked",value:true},{name:"sticked",value:false}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){if(this.vp==null){return}var c=null;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){this._vpPull[b].count++;c=b}}if(c==null){this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}}if(this.vp==document.body&&this.conf.vp_of_auto==true){this._vpOfInit()}this._vpOfUpd()};dhtmlXWindows.prototype._vpPullRemove=function(){if(this.vp==null){return 0}var c=0;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){c=--this._vpPull[b].count;if(c==0){this._vpPull[b].vp=null;this._vpPull[b].count=null;delete this._vpPull[b]}}}this._vpOfClear();return c};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=true};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=false;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};dhtmlXWindows.prototype._vpOfUpd=function(){var c=false;for(var b in this._vpOf){c=c||this._vpOf[b]}if(c==true){if(document.body.className.match(/dhxwins_vp_auto/)==null){document.body.className+=" dhxwins_vp_auto"}}else{if(document.body.className.match(/dhxwins_vp_auto/)!=null){document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,"")}}};dhtmlXWindows.prototype.attachViewportTo=function(g){var c=this._vpPullRemove();if(this.conf.vp_custom){while(this.vp.childNodes.length>0){this.vp.removeChild(this.vp.lastChild)}this.vp.parentNode.removeChild(this.vp);this.vp=null}else{if(this.vp!=null&&c==0){this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),"")}}if(g==null){this.vp=null}else{this.vp=(typeof(g)=="string"?document.getElementById(g):g);var e="dhxwins_vp_"+this.conf.skin;if(this.vp.className.indexOf(e)<0){this.vp.className+=" "+e}g=null;for(var b in this.w){this.vp.appendChild(this.w[b].win)}this.conf.vp_custom=false}if(this.vp==document.body){document.body.style.position="static"}this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(b,h,e,a,g){var c=document.createElement("DIV");c.style.position="absolute";c.style.left=b+"px";c.style.top=h+"px";c.style.width=e+"px";c.style.height=a+"px";if(typeof(g)=="undefined"||g==null){g=document.body}else{if(typeof(g)=="string"){g=document.getElementById(g)}}g.appendChild(c);this.attachViewportTo(c);this.conf.vp_custom=true;g=c=null};dhtmlXWindows.prototype._winSetPosition=function(e,a,c){var b=this.w[e];if(b.conf.maxed){b.conf.lastMX+=(a-b.conf.x);b.conf.lastMY+=(c-b.conf.y)}b.conf.x=a;b.conf.y=c;b.win.style.left=b.conf.x+"px";b.win.style.top=b.conf.y+"px";this._winAdjustFRMPosition(e);b=null};dhtmlXWindows.prototype._winAdjustPosition=function(j,b,h){var c=this.w[j];if(typeof(b)=="undefined"){b=c.conf.x}if(typeof(h)=="undefined"){h=c.conf.y}var a=(c.conf.keep_in_vp?0:-c.conf.w+this.conf.vp_pos_ofs);var g=(c.conf.keep_in_vp?this.vp.clientWidth-c.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs);if(b<a){b=a}else{if(b>g){b=g}}var e=(c.conf.keep_in_vp?this.vp.clientHeight-c.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs);if(h<0){h=0}else{if(h>e){h=e}}if(b!=c.conf.x||h!=c.conf.y){this._winSetPosition(j,b,h)}c=null};dhtmlXWindows.prototype._winSetSize=function(k,h,c,j,b){var e=this.w[k];var a=(h!=null?h:e.conf.w);var g=(c!=null?c:e.conf.h);if(this.conf.ofs_w==null){e.win.style.width=a+"px";e.win.style.height=g+"px";this.conf.ofs_w=e.win.offsetWidth-a;this.conf.ofs_h=e.win.offsetHeight-g}if(e.conf.min_w!=null&&a<e.conf.min_w){a=e.conf.min_w}if(e.conf.max_w!=null&&a>e.conf.max_w){a=e.conf.max_w}if(!e.conf.parked&&e.conf.min_h!=null&&g<e.conf.min_h){g=e.conf.min_h}if(e.conf.max_h!=null&&g>e.conf.max_h){g=e.conf.max_h}if(e.conf.keep_in_vp){if(a>this.vp.clientWidth){a=this.vp.clientWidth}if(g>this.vp.clientHeight){g=this.vp.clientHeight}}e.win.style.width=a-this.conf.ofs_w+"px";e.win.style.height=g-this.conf.ofs_h+"px";e.conf.w=a;e.conf.h=g;this._winAdjustFRMSize(k);if(b){this._winAdjustPosition(k,e.conf.x,e.conf.y)}if(!e.conf.parked&&j!=true){this._winAdjustCell(k)}e=null};dhtmlXWindows.prototype._winMinmax=function(g,c){if(typeof(c)!="undefined"&&this.w[g].conf.maxed==c){return}if(this.w[g].conf.allow_resize==false){return}var b=this.w[g];if(b.conf.parked){this._winPark(g,false)}if(b.conf.maxed){this._winSetSize(g,b.conf.lastMW,b.conf.lastMH);this._winAdjustPosition(g,b.conf.lastMX,b.conf.lastMY);b.conf.maxed=false}else{var a=0;var e=0;if(b.conf.max_w!=null){a=b.conf.x+Math.round(b.conf.w-b.conf.max_w)/2}if(b.conf.max_h!=null){e=Math.max(b.conf.y+Math.round(b.conf.h-b.conf.max_h)/2,0)}b.conf.lastMX=b.conf.x;b.conf.lastMY=b.conf.y;b.conf.lastMW=b.conf.w;b.conf.lastMH=b.conf.h;this._winSetSize(g,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(g,a,e);b.conf.maxed=true}b.b.minmax.setCss(b.conf.maxed?"minmaxed":"minmax");if(b.conf.maxed){this._callMainEvent("onMaximize",g)}else{this._callMainEvent("onMinimize",g)}this._callMainEvent("onResizeFinish",g);b=null};dhtmlXWindows.prototype._winShow=function(b,a){if(this.w[b].conf.visible==true){return}this.w[b].win.style.display="";this.w[b].conf.visible=true;if(a==true||this.conf.last_active==null){this._winMakeActive(b,true)}this._callMainEvent("onShow",b)};dhtmlXWindows.prototype._winHide=function(b,a){if(this.w[b].conf.visible==false){return}this.w[b].win.style.display="none";this.w[b].conf.visible=false;if(this.w[b].conf.actv){this.w[b].conf.actv=false;this.w[b].win.className="dhxwin_inactive";this._winMakeActive(null,true)}this._callMainEvent("onHide",b)};dhtmlXWindows.prototype._winPark=function(c,a){if(this.w[c].conf.allow_park==false){return}if(this.w[c].conf.header==false){return}var b=this.w[c];if(a==true&&this.conf.tr.prop!==false){b.win.style[this.conf.tr.prop]=this.conf.tr[b.conf.parked?"height_open":"height_close"];if(!b.conf.tr_ev){b.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,false);b.conf.tr_ev=true}}if(b.conf.parked){b.hdr.className=String(b.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");b.hdr.style.zIndex=0;b.conf.parked=false;b.conf.tr_mode="park";this._winCellSetOpacity(c,"open",a);this._winSetSize(c,b.conf.w,b.conf.lastPH,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkDown",c);if(b.conf.keep_in_vp){this._winAdjustPosition(c,b.conf.x,b.conf.y)}}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)!=null){b.cell.cell.className=b.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,"")}}else{b.conf.lastPH=b.conf.h;b.hdr.className+=" dhxwin_hdr_parked";if(a==false||this.conf.tr.prop==false){b.hdr.style.zIndex=3}b.conf.parked=true;b.conf.tr_mode="park";this._winCellSetOpacity(c,"close",a);this._winSetSize(c,b.conf.w,b.hdr.offsetHeight+this.conf.ofs_h,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkUp",c)}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)==null){b.cell.cell.className+=" dhxwin_parked"}}b=null};dhtmlXWindows.prototype._winCellSetOpacity=function(j,h,c,g){var b=this.w[j].cell;for(var e in b.conf.idx){if({pr1:true,pr2:true}[e]!=true){if(c==true&&this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[e]].style[this.conf.tr.prop]=this.conf.tr["op_"+h]}b.cell.childNodes[b.conf.idx[e]].style.opacity=this.conf.tr["op_v_"+h]}}b=null};dhtmlXWindows.prototype._winCellClearOpacity=function(e){var b=this.w[e].cell;for(var c in b.conf.idx){if({pr1:true,pr2:true}[c]!=true){if(this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[c]].style[this.conf.tr.prop]=""}}}b=null};dhtmlXWindows.prototype._winStick=function(b,a){if(typeof(a)!="undefined"&&this.w[b].conf.sticked==a){return}this.w[b].conf.sticked=!this.w[b].conf.sticked;this.w[b].b.stick.setCss(this.w[b].conf.sticked?"sticked":"stick");this._winMakeActive(this.conf.last_active,true);if(this.w[b].conf.sticked){this._callMainEvent("onStick",b)}else{this._callMainEvent("onUnStick",b)}};dhtmlXWindows.prototype._winClose=function(e){if(this._callMainEvent("onClose",e)!==true&&this.conf.unloading!=true){return}var c=this.w[e];if(c.conf.fs_mode){c.cell.setToFullScreen(false)}if(c.conf.modal){this._winSetModal(e,false)}window.dhx4.zim.clear(c.conf.z_id);if(this.cm!=null&&this.cm.icon[e]!=null){this._detachContextMenu("icon",e,null)}if(typeof(window.addEventListener)=="function"){c.win.removeEventListener("mousedown",this._winOnMouseDown,false);c.win.removeEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){c.win.removeEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_enabled==true&&window.dhx4.dnd.evs.start!=null){c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);if(window.dhx4.dnd.p_en!=true){c.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,false);c.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,false)}}}else{c.win.detachEvent("onmousedown",this._winOnMouseDown);c.win.detachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){c.win.attachEvent("ondblclick",this._winOnMouseDown)}}for(var b in c.b){this._winRemoveButton(e,b,true)}c.b=null;c.cell._unload();c.cell=null;c.brd.parentNode.removeChild(c.brd);c.brd=null;if(c.fr_cover!=null){c.fr_cover.parentNode.removeChild(c.fr_cover);c.fr_cover=null}if(c.fr_m_cover!=null){c.fr_m_cover.parentNode.removeChild(c.fr_m_cover);c.fr_m_cover=null}c.hdr._isWinHdr=true;c.hdr.firstChild._isWinIcon=true;c.hdr.onselectstart=null;c.hdr.parentNode.removeChild(c.hdr);c.hdr=null;for(var b in c.conf){c.conf[b]=null;delete c.conf[b]}c.conf=null;c.win._idd=null;c.win._isWindow=null;c.win.parentNode.removeChild(c.win);c.win=null;c=null;this.w[e]=null;delete this.w[e];if(!this.conf.unloading){this._winMakeActive(null,true)}};dhtmlXWindows.prototype._winSetModal=function(j,e,h){if(this.w[j].conf.modal==e){return}if(typeof(h)=="undefined"){h=true}var c=this.w[j];if(e==true&&c.conf.modal==false){if(this.conf.last_modal!=null){this._winSetModal(this.conf.last_modal,false,false)}if(this.mcover==null){var g=document.createElement("DIV");g.className="dhxwins_mcover";this.vp.insertBefore(g,c.fr_m_cover||c.win);this.mcover={d:g};if(this.conf.fr_cover){this.mcover.f=document.createElement("IFRAME");this.mcover.f.className="dhxwins_mcover";this.mcover.f.border=0;this.mcover.f.frameBorder=0;this.vp.insertBefore(this.mcover.f,g)}g=null}else{if(this.mcover.d.nextSibling!=(c.fr_m_cover||c.win)){this.vp.insertBefore(this.mcover.d,c.fr_m_cover||c.win);if(this.mcover.f!=null){this.vp.insertBefore(this.mcover.f,this.mcover.d)}}}c.conf.modal=true;this.conf.last_modal=j;this._winMakeActive(j,true)}else{if(e==false&&c.conf.modal==true){c.conf.modal=false;this.conf.last_modal=null;if(h&&this.mcover!=null){for(var b in this.mcover){this.vp.removeChild(this.mcover[b]);this.mcover[b]=null}this.mcover=null}}}c=null};dhtmlXWindows.prototype._winMouseDownHandler=function(c,b){var a=c.target||c.srcElement;if(c.button>=2){return}if(b.mode=="button"){if(b.press_type=="mousedown"){this.conf.button_last=b.button_name}else{if((b.press_type=="mouseup"&&b.button_name==this.conf.button_last)||b.press_type=="MSPointerDown"||b.press_type=="pointerdown"){this.conf.button_last=null;if(this._winButtonClick(b.id,b.button_name,c)!==true){return}}}}if((b.press_type=="pointerdown"||b.press_type=="mousedown"||b.press_type=="dblclick")&&b.mode=="hdr"){this.conf.dblclick_active=false;if(this.conf.dblclick_ev==true){if(b.press_type=="dblclick"){this.conf.dblclick_active=true}}else{if(this.conf.dblclick_last==null){this.conf.dblclick_last=new Date().getTime();this.dblclick_id=b.id}else{var a=new Date().getTime();if(this.conf.dblclick_last+this.conf.dblclick_tm>a&&this.dblclick_id==b.id){this.conf.dblclick_active=true;this.conf.dblclick_last=null;this.dblclick_id=null}else{this.conf.dblclick_last=a;this.dblclick_id=b.id}}}if(this.conf.dblclick_active){this._winDoHeaderDblClick(b.id);return}}if(b.press_type=="mousedown"||(b.press_type==window.dhx4.dnd.evs.start)){this._winMakeActive(b.id)}if(b.press_type=="touchend"){}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){if(this.conf.dblclick_mode=="minmax"){this._winMinmax(a);return}if(this.conf.dblclick_mode=="park"){this._winPark(a,true);return}if(typeof(this.conf.dblclick_mode)=="function"){this.conf.dblclick_mode.apply(window,[a]);return}if(typeof(window[this.conf.dblclick_mode])=="function"){window[this.conf.dblclick_mode].apply(window,[a]);return}};dhtmlXWindows.prototype._winAdjustCell=function(b){var m=this.w[b];if(this.conf.skin=="material"){var l=0;var k=(m.conf.header?m.hdr.offsetHeight:1);var e=m.win.clientWidth;var n=m.win.clientHeight-k}else{var l=1;var k=(m.conf.header?m.hdr.offsetHeight:1);var e=m.win.clientWidth-2;var n=m.win.clientHeight-k-1}m.brd.style.left=l+"px";m.brd.style.top=k+"px";if(m.conf.brd==null){m.brd.style.width=e+"px";m.brd.style.height=n+"px";m.conf.brd={w:e-m.brd.offsetWidth,h:n-m.brd.offsetHeight}}m.brd.style.width=e+m.conf.brd.w+"px";m.brd.style.height=n+m.conf.brd.h+"px";var c=5;if(this.conf.skin=="material"){c=1}var a=1+c;var j=(m.conf.header?k:k+c);var g=m.brd.clientWidth;var h=m.brd.clientHeight;m.cell._setSize(a,j,g,h);m.fr_cover.style.left=a+"px";m.fr_cover.style.top=j+"px";m.fr_cover.style.width=g+"px";m.fr_cover.style.height=h+"px";m=null};dhtmlXWindows.prototype._winAdjustTitle=function(g){var b=this.w[g].hdr.childNodes[0];var e=this.w[g].hdr.childNodes[1];var c=this.w[g].hdr.childNodes[2];var a=(this.conf.skin=="material"?7:0);e.style.paddingLeft=b.offsetWidth+12+a+"px";e.style.paddingRight=c.offsetWidth+10+a+"px";e=c=b=null};dhtmlXWindows.prototype._callMainEvent=function(b,e){var a=this.w[e];if(a.cell.checkEvent(b)){var c=a.cell._callMainEvent(b,[a.cell])}else{var c=this.callEvent(b,[a.cell])}a=null;return c};dhtmlXWindows.prototype._winInitFRM=function(c){if(this.conf.fr_cover!=true){return}var a=this.w[c];var b=document.createElement("IFRAME");b.className="dhxwin_main_fr_cover";b.border=0;b.frameBorder=0;b.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(b,a.win);a.fr_m_cover=b;b=null};dhtmlXWindows.prototype._winAdjustFRMSize=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.width=a.conf.w+"px";a.fr_m_cover.style.height=a.conf.h+"px"}a=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.left=a.win.style.left;a.fr_m_cover.style.top=a.win.style.top}a=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.zIndex=a.win.style.zIndex}a=null};function dhtmlXWindowsCell(g,e){dhtmlXCellObject.apply(this,[g,"_wins"]);this.wins=e;this.cell._winId=g;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){if(this._unloadResize){this._unloadResize()}window.dhx4._eventable(this.cell,"clear");this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.setPosition=null;this.getPosition=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;c=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(h,a){this.wins.callEvent("_winMouseDown",[a,{id:h,mode:"win"}])});this._callMainEvent=function(h,a){return this.callEvent(h,a)};this.conf.tr={};for(var b in this.wins.conf.tr){this.conf.tr[b]=this.wins.conf.tr[b]}if(this.conf.tr.prop!=false){}if(this._initResize){this._initResize()}window.dhx4._eventable(this.cell);var c=this;this.cell.attachEvent("_setCellSize",function(a,l){var j=c.wins.w[this._winId].conf.w-c.conf.size.w;var k=c.wins.w[this._winId].conf.h-c.conf.size.h;c.setDimension(a+j,l+k)});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject();dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=true};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=false};dhtmlXWindowsCell.prototype.isMovable=function(){return(this.wins.w[this._idd].conf.allow_move==true)};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=true;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=false;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return(this.wins.w[this._idd].conf.allow_resize==true)};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,true)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,false)};dhtmlXWindowsCell.prototype.isMaximized=function(){return(this.wins.w[this._idd].conf.maxed==true)};dhtmlXWindowsCell.prototype.setPosition=function(a,b){this.wins._winSetPosition(this._idd,a,b)};dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd];var b=[a.conf.x,a.conf.y];a=null;return b};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,true)};dhtmlXWindowsCell.prototype.isParked=function(){return(this.wins.w[this._idd].conf.parked==true)};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=true;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=false;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return(this.wins.w[this._idd].conf.allow_park==true)};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return(this.wins.w[this._idd].conf.visible!=true)};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,true)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,false)};dhtmlXWindowsCell.prototype.isSticked=function(){return(this.wins.w[this._idd].conf.sticked==true)};dhtmlXWindowsCell.prototype.setDimension=function(c,a){var b=this.wins.w[this._idd];if(b.conf.parked){this.wins._winPark(this._idd,false)}if(b.conf.maxed){if(c!=null){b.conf.lastMW=c}if(a!=null){b.conf.lastMH=a}this.wins._winMinmax(this._idd)}else{this.wins._winSetSize(this._idd,c,a,false,true)}b=null};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.w,a.conf.h];a=null;return b};dhtmlXWindowsCell.prototype.setMinDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.min_w=c;b.conf.min_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.min_w,a.conf.min_h];a=null;return b};dhtmlXWindowsCell.prototype.setMaxDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.max_w=c;b.conf.max_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.max_w,a.conf.max_h];a=null;return b};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var c=this.wins.vp;var b=this.wins.w[this._idd];var a=Math.round((c.clientWidth-b.conf.w)/2);var e=Math.round((c.clientHeight-b.conf.h)/2);this.wins._winSetPosition(this._idd,a,e);c=b=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){var b=this.wins.w[this._idd];var h=window.dhx4.screenDim();var g=window.dhx4.absLeft(this.wins.vp);var e=window.dhx4.absTop(this.wins.vp);var c=this.wins.vp.parentNode;while(c!=null){if(c.scrollLeft){g=g-c.scrollLeft}if(c.scrollTop){e=e-c.scrollTop}c=c.parentNode}var a=Math.round((h.right-h.left-b.conf.w)/2);var j=Math.round((h.bottom-h.top-b.conf.h)/2);this.wins._winAdjustPosition(this._idd,a-g,j-e);d=b=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,true)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=(this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active);window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,true)};dhtmlXWindowsCell.prototype.isOnTop=function(){return(this.wins.w[this._idd].conf.actv==true)};dhtmlXWindowsCell.prototype.isOnBottom=function(){var c={id:null,z:+Infinity};for(var b in this.wins.w){if(this.wins.w[b].conf.visible&&this.wins.w[b].win.style.zIndex<c.z){c.id=b;c.z=this.wins.w[b].win.style.zIndex}}return(c.id==this._idd)};dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==false){a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=true;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==true){if(a.conf.parked){this.wins._winPark(this._idd,false)}a.hdr.className+=" dhxwin_hdr_hidden";a.brd.className+=" dhxwin_hdr_hidden";this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=false;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return(this.wins.w[this._idd].conf.modal==true)};dhtmlXWindowsCell.prototype._adjustByCont=function(a,b){a+=this.wins.w[this._idd].conf.w-this.conf.size.w;b+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,a,b)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(b){b=window.dhx4.s2b(b);var a=this.wins.w[this._idd];if(a.conf.fs_mode==b){a=null;return}if(this.wins.fsn==null){this.wins.fsn=document.createElement("DIV");this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs";document.body.appendChild(this.wins.fsn)}if(b){this.wins.fsn.appendChild(a.win);this.maximize();this.hideHeader()}else{this.wins.vp.appendChild(a.win);this.minimize();this.showHeader();if(this.wins.fsn.childNodes.length==0){this.wins.fsn.parentNode.removeChild(this.wins.fsn);this.wins.fsn=null}}a.conf.fs_mode=b;a=null};dhtmlXWindowsCell.prototype.button=function(a){if(a=="minmax1"||a=="minmax2"){a="minmax"}return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(k,j,e){var a=new dhtmlXWindowsButton(this.wins,this._idd,k,e,true);var g=null;var c=this.wins.w[this._idd].hdr.lastChild;if(isNaN(j)){j=0}else{if(j<0){j=0}}if(c.childNodes[j]!=null){g=c.childNodes[j]}if(g!=null){c.insertBefore(a.button,g)}else{c.appendChild(a.button)}this.wins.w[this._idd].b[k]=a;a=g=c=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(a){if(this.wins.w[this._idd].b[a]==null||this.wins.w[this._idd].b[a].conf.custom!=true){return}this.wins._winRemoveButton(this._idd,a)};window.dhtmlXWindowsButton=function(g,b,a,e,c){this.conf={wins:g,winId:b,name:a,enabled:true,visible:true,custom:true};this.button=document.createElement("DIV");this.button._buttonName=a;this.button.title=e;this.enable=function(){this.conf.enabled=true;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=false;this.setCss(this.conf.css)};this.isEnabled=function(){return(this.conf.enabled==true)};this.show=function(){this.button.style.display="";this.conf.visible=true;this.conf.wins._winAdjustTitle(this.conf.winId)};this.hide=function(){this.button.style.display="none";this.conf.visible=false;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return(this.conf.visible==false)};this.setCss=function(j){this.conf.css=j;var h=(this.conf.enabled?"":"_dis");this.button.className="dhxwin_button"+h+" dhxwin_button_"+this.conf.css+h};this._doOnClick=function(h){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(h){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);if(this.conf.wins.cm!=null&&this.conf.wins.cm.button[this.conf.winId]!=null&&this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)}this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;if(h!=true){this.conf.wins._winAdjustTitle(this.conf.winId)}this.conf.wins=null;this.conf.winId=null;this.conf=null};this.setCss(a);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(c,a,b){if(!this.w[c].b[a].isEnabled()){return true}if(this.w[c].b[a]._doOnClick()!==true){return}if(a=="help"){this._callMainEvent("onHelp",c)}if(a=="park"){this._winPark(c,true)}if(a=="minmax"){this._winMinmax(c)}if(a=="stick"){this._winStick(c);return false}if(a=="close"){this._winClose(c);return false}return true};dhtmlXWindows.prototype._winRemoveButton=function(c,a,b){this.w[c].b[a].unload(b);this.w[c].b[a]=null;delete this.w[c].b[a]};dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_enabled=true;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(g,h){if(a.conf.dblclick_active){return}if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}if(a._callMainEvent("onBeforeMoveStart",h)!==true){return}a.conf.dnd={id:h,x:a._dndPos(g,"X"),y:a._dndPos(g,"Y"),ready:true,css:false,css_touch:false,css_vp:false,tr:null,mode:"def",moved:false,prevent:false};if(a.w[h].conf.keep_in_vp){a.conf.dnd.minX=0;a.conf.dnd.maxX=a.vp.clientWidth-a.w[h].conf.w;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.w[h].conf.h}else{a.conf.dnd.minX=-a.w[h].conf.w+a.conf.vp_pos_ofs;a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs}var b=["MozTransform","WebkitTransform","OTransform","msTransform","transform"];for(var c=0;c<b.length;c++){if(document.documentElement.style[b[c]]!=null&&a.conf.dnd.tr==null){a.conf.dnd.tr=b[c];a.conf.dnd.mode="tr"}}if(a.conf.dnd.mode=="tr"){a.w[h].win.style[a.conf.dnd.tr]="translate(0px,0px)";if(a.w[h].fr_m_cover!=null){a.w[h].fr_m_cover.style[a.conf.dnd.tr]=a.w[h].win.style[a.conf.dnd.tr]}}if(window.dhx4.dnd._mTouch(g)==false&&g.type==window.dhx4.dnd.evs.start){if(a.conf.dnd.css_touch==false){a.w[h].win.className+=" dhxwin_dnd_touch";a.conf.dnd.css_touch=true}if(a.conf.dnd.css_vp==false){a.vp.className+=" dhxwins_vp_dnd";a.conf.dnd.css_vp=true}}else{a._dndInitEvents()}};this._dndOnMouseMove=function(h){h=h||event;var g=a.conf.dnd;var b=a._dndPos(h,"X")-g.x;var j=a._dndPos(h,"Y")-g.y;if(h.type==window.dhx4.dnd.evs.move){if(g.moved!=true&&(Math.abs(b)>20||Math.abs(j)>20)){if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm);a.conf.dnd_tm=null}window.removeEventListener(window.dhx4.dnd.evs.start,a._dndOnMouseMove,false);return}}if(g.ready!=true){return}var c=a.w[g.id];if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(g.css!=true){if(g.css_touch==false){c.win.className+=" dhxwin_dnd"}c.fr_cover.className+=" dhxwin_fr_cover_dnd";g.css=true}if(g.css_vp!=true){a.vp.className+=" dhxwins_vp_dnd";g.css_vp=true}g.newX=c.conf.x+b;g.newY=c.conf.y+j;if(g.mode=="tr"){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX);b=g.newX-c.conf.x;g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY);j=g.newY-c.conf.y;c.win.style[g.tr]="translate("+b+"px,"+j+"px)";if(c.fr_m_cover!=null){c.fr_m_cover.style[g.tr]=c.win.style[g.tr]}}else{if(g.newX<g.minX||g.newX>g.maxX){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX)}else{g.x=a._dndPos(h,"X")}if(g.newY<g.minY||g.newY>g.maxY){g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY)}else{g.y=a._dndPos(h,"Y")}a._winSetPosition(g.id,g.newX,g.newY)}g.moved=true;c=g=null};this._dndOnMouseUp=function(g){g=g||event;a._dndUnloadEvents();if(a.conf.dnd!=null&&a.conf.dnd.id!=null){var c=a.conf.dnd;var b=a.w[c.id];if(c.newX!=null){if(c.mode=="tr"){a._winSetPosition(c.id,c.newX,c.newY);b.win.style[c.tr]="translate(0px,0px)";if(b.fr_m_cover!=null){b.fr_m_cover.style[c.tr]=b.win.style[c.tr]}}}if(c.css==true){if(c.css_touch==false){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")}b.fr_cover.className=String(b.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")}if(c.css_touch==true){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")}if(c.css_vp==true){a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")}if(c.moved==true){a._callMainEvent("onMoveFinish",c.id)}else{a._callMainEvent("onMoveCancel",c.id)}b=c=a.conf.dnd=null}if(window.dhx4.dnd.p_en==true&&g.type==window.dhx4.dnd.evs.end){window.dhx4.dnd._touchOn();window.removeEventListener(window.dhx4.dnd.evs.end,a._dndOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,a._dndOnMouseMove,false);if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm)}a.conf.dnd_tm=null}};this._dndOnSelectStart=function(b){b=b||event;if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}return false};this._dndInitEvents=function(){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._dndOnMouseMove,false);window.addEventListener("mouseup",this._dndOnMouseUp,false);window.addEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove);document.body.attachEvent("onmouseup",this._dndOnMouseUp);document.body.attachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._dndOnMouseMove,false);window.removeEventListener("mouseup",this._dndOnMouseUp,false);window.removeEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove);document.body.detachEvent("onmouseup",this._dndOnMouseUp);document.body.detachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);this.conf.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;a=null};this._dndPos=function(c,b){var e=c[this.conf.dnd_ev_prefix+b];if((e==null||e==0)&&c.touches!=null){e=c.touches[0][this.conf.dnd_ev_prefix+b]}return e};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(c,b){if(this.w[b.id]==null||this.w[b.id].conf.allow_move!=true){return}if(typeof(c.button)!="undefined"&&c.button>=2){return}if(c.type==window.dhx4.dnd.evs.start){if(b.mode=="hdr"){if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(c,"X"),y:this._dndPos(c,"Y")};if(this.conf.dnd_time<1){this._dndOnMouseDown(c,b.id)}else{if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm)}this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(c,b.id)},this.conf.dnd_time)}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff();window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,false)}window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false)}return false}if(c.type==window.dhx4.dnd.evs.end){if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm);this.conf.dnd_tm=null}this._dndOnMouseUp(c);window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,false);return false}this.conf.dnd_ev_prefix="client";if(!(b.mode=="hdr"&&c.type=="mousedown")){return}if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}this._dndOnMouseDown(c,b.id);return false})};dhtmlXWindowsCell.prototype._initResize=function(){var a=this;var b=navigator.userAgent;this.conf.resize={b_width:6,c_type:(b.indexOf("MSIE 10.0")>0||b.indexOf("MSIE 9.0")>0||b.indexOf("MSIE 8.0")>0||b.indexOf("MSIE 7.0")>0||b.indexOf("MSIE 6.0")>0),btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};this._rOnCellMouseMove=function(l){if(a.wins.conf.resize_actv==true||a.wins.w[a._idd].conf.allow_resize==false||a.conf.progress==true||a.wins.w[a._idd].conf.maxed==true||a.wins.w[a._idd].conf.fs_mode==true){var h=a.wins.w[a._idd].brd;if(h.style.cursor!="default"){h.style.cursor="default"}h=null;return}l=l||event;var s=a.wins.w[a._idd].brd;var c=a.conf.resize;var n=(a.wins.w[a._idd].conf.header==false);var o=l.clientX;var m=l.clientY;o+=(document.documentElement.scrollLeft||document.body.scrollLeft||0);m+=(document.documentElement.scrollTop||document.body.scrollTop||0);var g=window.dhx4.absLeft(s);var q=window.dhx4.absTop(s);var j="";if(o<=g+c.b_width){j="w"}else{if(o>=g+s.offsetWidth-c.b_width){j="e"}}if(m>=q+s.offsetHeight-c.b_width){j="s"+j}else{if(n&&m<=q+c.b_width){j="n"+j}}if(j==""){j=false}if(c.mode!=j){c.mode=j;if(j==false){s.style.cursor="default"}else{s.style.cursor=j+"-resize"}}s=c=null};this._rOnCellMouseDown=function(j){j=j||event;if(typeof(j.button)!="undefined"&&j.button!=a.conf.resize.btn_left){return}if(a.conf.resize.mode==false){return}if(a.conf.progress==true){return}if(a.wins.w[a._idd].conf.allow_resize==false){return}if(a.wins.w[a._idd].conf.fs_mode==true){return}if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}if(a.wins._callMainEvent("onBeforeResizeStart",a._idd)!==true){return}var c=a.wins.w[a._idd];var h=a.conf.resize;a.wins.conf.resize_actv=true;h.min_w=c.conf.min_w;h.min_h=c.conf.min_h;h.max_w=c.conf.max_w||+Infinity;h.max_h=c.conf.max_h||+Infinity;if(c.cell.dataType=="layout"&&c.cell.dataObj!=null&&typeof(c.cell.dataObj._getWindowMinDimension)=="function"){var g=c.cell.dataObj._getWindowMinDimension(c.cell);h.min_w=Math.max(g.w,h.min_w);h.min_h=Math.max(g.h,h.min_h)}h.vp_l=a.wins.conf.vp_pos_ofs;h.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs;h.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs;h.x=j.clientX;h.y=j.clientY;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",a._rOnWinMouseMove,false);window.addEventListener("mouseup",a._rOnWinMouseUp,false);window.addEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.attachEvent("onmousemove",a._rOnWinMouseMove);document.body.attachEvent("onmouseup",a._rOnWinMouseUp);document.body.attachEvent("onselectstart",a._rOnSelectStart)}h.resized=false;h.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=h.mode+"-resize";c=h=null};this._rOnCellContextMenu=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._rOnWinMouseMove=function(j){j=j||event;var g=a.wins.w[a._idd];var h=a.conf.resize;if(!h.resized){g.fr_cover.className+=" dhxwin_fr_cover_resize";h.resized=true}var c=j.clientX-h.x;var k=j.clientY-h.y;if(h.mode.indexOf("e")>=0){h.rw=Math.min(Math.max(g.conf.w+c,h.min_w),h.max_w);h.rx=null;if(g.conf.x+h.rw<h.vp_l){h.rw=h.vp_l-g.conf.x}else{if(g.conf.x+h.rw>a.wins.vp.clientWidth){h.rw=a.wins.vp.clientWidth-g.conf.x}}}else{if(h.mode.indexOf("w")>=0){h.rw=Math.min(Math.max(g.conf.w-c,h.min_w),h.max_w);h.rx=g.conf.x+g.conf.w-h.rw;if(h.rx<0){h.rw=h.rw+h.rx;h.rx=0}else{if(h.rx>h.vp_r){h.rw=h.rw-h.vp_r;h.rx=h.vp_r}}}}if(h.mode.indexOf("s")>=0){h.rh=Math.min(Math.max(g.conf.h+k,h.min_h),h.max_h);h.ry=null;if(g.conf.y+h.rh>a.wins.vp.clientHeight){h.rh=a.wins.vp.clientHeight-g.conf.y}}else{if(h.mode.indexOf("n")>=0){h.rh=Math.min(Math.max(g.conf.h-k,h.min_h),h.max_h);h.ry=g.conf.y+g.conf.h-h.rh;if(h.ry<0){h.rh=h.rh+h.ry;h.ry=0}else{if(h.ry>h.vp_b){h.rh=h.rh-h.vp_b;h.ry=h.vp_b}}}}a._rAdjustSizer();g=h=null};this._rOnWinMouseUp=function(){var e=a.conf.resize;var c=a.wins.w[a._idd];a.wins.conf.resize_actv=false;a.wins.vp.style.cursor=e.vp_cursor;c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");if(e.resized){a.wins._winSetSize(a._idd,e.rw,e.rh);if(e.rx==null){e.rx=c.conf.x}if(e.ry==null){e.ry=c.conf.y}if(e.rx!=c.conf.x||e.ry!=c.conf.y){a.wins._winSetPosition(a._idd,e.rx,e.ry)}}if(e.obj!=null){e.obj.parentNode.removeChild(e.obj);e.obj=null}if(e.objFR!=null){e.objFR.parentNode.removeChild(e.objFR);e.objFR=null}if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",a._rOnWinMouseMove,false);window.removeEventListener("mouseup",a._rOnWinMouseUp,false);window.removeEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.detachEvent("onmousemove",a._rOnWinMouseMove);document.body.detachEvent("onmouseup",a._rOnWinMouseUp);document.body.detachEvent("onselectstart",a._rOnSelectStart)}if(e.resized==true){if(a.dataType=="layout"&&a.dataObj!=null){a.dataObj.callEvent("onResize",[])}a.wins._callMainEvent("onResizeFinish",a._idd)}else{a.wins._callMainEvent("onResizeCancel",a._idd)}e.mode="";c=e=null};this._rOnSelectStart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._rInitSizer=function(){var e=a.conf.resize;var c=a.wins.w[a._idd];e.obj=document.createElement("DIV");e.obj.className="dhxwin_resize";e.obj.style.zIndex=c.win.style.zIndex;e.obj.style.cursor=e.mode+"-resize";a.wins.vp.appendChild(e.obj);if(a.wins.conf.fr_cover==true){e.objFR=document.createElement("IFRAME");e.objFR.className="dhxwin_resize_fr_cover";e.objFR.style.zIndex=e.obj.style.zIndex;a.wins.vp.insertBefore(e.objFR,e.obj)}e.rx=c.conf.x;e.ry=c.conf.y;e.rw=c.conf.w;e.rh=c.conf.h;e=null};this._rAdjustSizer=function(){var c=a.conf.resize;if(!c.obj){this._rInitSizer()}c.obj.style.width=c.rw+"px";c.obj.style.height=c.rh+"px";if(c.rx!=null){c.obj.style.left=c.rx+"px"}if(c.ry!=null){c.obj.style.top=c.ry+"px"}if(c.objFR!=null){c.objFR.style.width=c.obj.style.width;c.objFR.style.height=c.obj.style.height;if(c.rx!=null){c.objFR.style.left=c.obj.style.left}if(c.ry!=null){c.objFR.style.top=c.obj.style.top}}c=null};if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu)}this._unloadResize=function(){if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,false);this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,false)}else{this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown);this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu)}this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.conf.resize=null;a=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)};dhtmlXWindows.prototype.getContextMenu=function(){if(this.cm!=null&&this.cm.global!=null){return this.cm.global}return null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){if(this.wins.cm!=null&&this.wins.cm.icon[this._idd]!=null){return this.wins.cm.icon[this._idd]}return null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)};dhtmlXWindowsButton.prototype.getContextMenu=function(){if(this.conf.wins.cm==null||this.conf.wins.cm.button[this.conf.winId]==null){return null}if(this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){return this.conf.wins.cm.button[this.conf.winId][this.conf.name]}return null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(j,h,c,b){var e=this;var a=false;if(this.cm==null){this.cm={global:null,icon:{},button:{}};a=true}if(h==null){if(this.cm.global!=null){return}}else{if(j=="icon"){if(this.cm.icon[h]!=null){return}}else{if(j=="button"){if(this.cm.button[h]!=null&&this.cm.button[h][c]!=null){return}}}}if(b==null){b={}}b.parent=null;b.context=true;var g=new dhtmlXMenuObject(b);g.setAutoHideMode(false);g.attachEvent("onShow",function(){this.conf.wins_menu_open=true});g.attachEvent("onHide",function(){this.conf.wins_menu_open=false;e.conf.opened_menu=null});if(h==null){this.cm.global=g}else{if(j=="icon"){this.cm.icon[h]=g}else{if(j=="button"){if(this.cm.button[h]==null){this.cm.button[h]={}}this.cm.button[h][c]=g}}}if(a){this._showContextMenu=function(n,m){if(n.button>=2){return}if(m.mode=="icon"&&m.id!=null&&m.press_type=="mousedown"){var o=this.cm.icon[m.id]||this.cm.global;if(o==null){return}n.cancelBubble=true;var l=this.w[m.id].hdr.firstChild;if(o.conf.wins_menu_open&&this.conf.opened_menu==m.id){o.hideContextMenu()}else{this._hideContextMenu();o.showContextMenu(window.dhx4.absLeft(l),window.dhx4.absTop(l)+l.offsetHeight);this.conf.opened_menu=m.id}o=l=null}if(m.mode=="button"&&m.id!=null&&m.press_type=="mousedown"){if(this.cm.button[m.id]==null||this.cm.button[m.id][m.button_name]==null){return}n.cancelBubble=true;this.conf.button_last=null;var o=this.cm.button[m.id][m.button_name];var k=this.w[m.id].b[m.button_name].button;if(o.conf.wins_menu_open&&this.conf.opened_menu==m.id){o.hideContextMenu()}else{this._hideContextMenu();o.showContextMenu(window.dhx4.absLeft(k),window.dhx4.absTop(k)+k.offsetHeight);this.conf.opened_menu=m.id}o=k=null}};this._hideContextMenu=function(q){if(q!=null){q=q||event;if(q.type=="keydown"&&q.keyCode!=27){return}var o=q.target||q.srcElement;var l=true;while(o!=null&&l==true){if(o.className!=null&&o.className.search(/SubLevelArea_Polygon/)>=0){l=false}else{o=o.parentNode}}}if(l||q==null){if(e.cm.global!=null){e.cm.global.hideContextMenu()}for(var n in e.cm.icon){if(e.cm.icon[n]!=null){e.cm.icon[n].hideContextMenu()}}for(var n in e.cm.button){for(var k in e.cm.button[n]){if(e.cm.button[n][k]!=null){e.cm.button[n][k].hideContextMenu()}}}}};this._detachContextMenu=function(m,l,k){if(this.cm==null){return}if(l==null){if(this.cm.global!=null){this.cm.global.unload();this.cm.global=null}}else{if(m=="icon"){if(this.cm.icon[l]!=null){this.cm.icon[l].unload();this.cm.icon[l]=null}}else{if(m=="button"){if(this.cm.button[l]!=null&&this.cm.button[l][k]!=null){this.cm.button[l][k].unload();this.cm.button[l][k]=null}}}}};this.attachEvent("_winMouseDown",this._showContextMenu);if(typeof(window.addEventListener)=="function"){window.addEventListener("mousedown",this._hideContextMenu,false);window.addEventListener("keydown",this._hideContextMenu,false)}else{document.body.attachEvent("onmousedown",this._hideContextMenu);document.body.attachEvent("onkeydown",this._hideContextMenu)}this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._hideContextMenu,false);window.removeEventListener("keydown",this._hideContextMenu,false)}else{document.body.detachEvent("onmousedown",this._hideContextMenu);document.body.detachEvent("onkeydown",this._hideContextMenu)}e=null}}return g};if(!window.dhtmlx){window.dhtmlx={}}(function(){var m=null;function o(u,s){var t=u.callback;n(false);u.box.parentNode.removeChild(u.box);m=u.box=null;if(t){t(s)}}function a(t){if(m){t=t||event;var s=t.which||event.keyCode;if(dhtmlx.message.keyboard){if(s==13||s==32){o(m,true)}if(s==27){o(m,false)}}if(t.preventDefault){t.preventDefault()}return !(t.cancelBubble=true)}}if(document.attachEvent){document.attachEvent("onkeydown",a)}else{document.addEventListener("keydown",a,true)}function n(t){if(!n.cover){n.cover=document.createElement("DIV");n.cover.onkeydown=a;n.cover.className="dhx_modal_cover";document.body.appendChild(n.cover)}var s=document.body.scrollHeight;n.cover.style.display=t?"inline-block":"none"}function h(t,s){return"<div class='dhtmlx_popup_button' result='"+s+"' ><div>"+t+"</div></div>"}function c(t){if(!q.area){q.area=document.createElement("DIV");q.area.className="dhtmlx_message_area";q.area.style[q.position]="15px";document.body.appendChild(q.area)}q.hide(t.id);var s=document.createElement("DIV");s.innerHTML="<div>"+t.text+"</div>";s.className="dhtmlx-info dhtmlx-"+t.type;s.onclick=function(){if(t){q.hide(t.id)}t=null};if(q.position=="bottom"&&q.area.firstChild){q.area.insertBefore(s,q.area.firstChild)}else{q.area.appendChild(s)}if(t.expire>0){q.timers[t.id]=window.setTimeout(function(){q.hide(t.id)},t.expire)}q.pull[t.id]=s;s=null;return t.id}function j(t,v,y){var x=document.createElement("DIV");x.className=" dhtmlx_modal_box dhtmlx-"+t.type;x.setAttribute("dhxbox",1);var s="";if(t.width){x.style.width=t.width}if(t.height){x.style.height=t.height}if(t.title){s+='<div class="dhtmlx_popup_title">'+t.title+"</div>"}s+='<div class="dhtmlx_popup_text"><span>'+(t.content?"":t.text)+'</span></div><div  class="dhtmlx_popup_controls">';if(v){s+=h(t.ok||"OK",true)}if(y){s+=h(t.cancel||"Cancel",false)}if(t.buttons){for(var u=0;u<t.buttons.length;u++){s+=h(t.buttons[u],u)}}s+="</div>";x.innerHTML=s;if(t.content){var w=t.content;if(typeof w=="string"){w=document.getElementById(w)}if(w.style.display=="none"){w.style.display=""}x.childNodes[t.title?1:0].appendChild(w)}x.onclick=function(C){C=C||event;var A=C.target||C.srcElement;if(!A.className){A=A.parentNode}if(A.className=="dhtmlx_popup_button"){var z=A.getAttribute("result");z=(z=="true")||(z=="false"?false:z);o(t,z)}};t.box=x;if(v||y){m=t}return x}function r(t,u,w){var v=t.tagName?t:j(t,u,w);if(!t.hidden){n(true)}document.body.appendChild(v);var s=t.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-v.offsetWidth)/2));var z=t.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-v.offsetHeight)/2));if(t.position=="top"){v.style.top="-3px"}else{v.style.top=z+"px"}v.style.left=s+"px";v.onkeydown=a;v.focus();if(t.hidden){dhtmlx.modalbox.hide(v)}return v}function l(s){return r(s,true,false)}function b(s){return r(s,true,true)}function g(s){return r(s)}function k(t,s,u){if(typeof t!="object"){if(typeof s=="function"){u=s;s=""}t={text:t,type:s,callback:u}}return t}function e(u,t,s,v){if(typeof u!="object"||!u){u={text:u,type:t,expire:s,id:v}}u.id=u.id||q.uid();u.expire=u.expire||q.expire;return u}dhtmlx.alert=function(){var s=k.apply(this,arguments);s.type=s.type||"confirm";return l(s)};dhtmlx.confirm=function(){var s=k.apply(this,arguments);s.type=s.type||"alert";return b(s)};dhtmlx.modalbox=function(){var s=k.apply(this,arguments);s.type=s.type||"alert";return g(s)};dhtmlx.modalbox.hide=function(s){while(s&&s.getAttribute&&!s.getAttribute("dhxbox")){s=s.parentNode}if(s){s.parentNode.removeChild(s);n(false);m=null}};var q=dhtmlx.message=function(v,u,t,w){v=e.apply(this,arguments);v.type=v.type||"info";var s=v.type.split("-")[0];switch(s){case"alert":return l(v);case"confirm":return b(v);case"modalbox":return g(v);default:return c(v);break}};q.seed=(new Date()).valueOf();q.uid=function(){return q.seed++};q.expire=4000;q.keyboard=true;q.position="top";q.pull={};q.timers={};q.hideAll=function(){for(var s in q.pull){q.hide(s)}};q.hide=function(t){var s=q.pull[t];if(s&&s.parentNode){window.setTimeout(function(){s.parentNode.removeChild(s);s=null},2000);s.className+=" hidden";if(q.timers[t]){window.clearTimeout(q.timers[t])}delete q.pull[t]}}})();(function(){var dhx={};dhx.assert=function(test,message){if(!test){dhx.assert_error(message)}};dhx.assert_error=function(message){dhx.log("error",message);if(dhx.message&&typeof message=="string"){dhx.message({type:"debug",text:message,expire:-1})}if(dhx.debug!==false){eval("debugger;")}};dhx.assert_core_ready=function(){if(window.dhx_on_core_ready){dhx_on_core_ready()}};dhx.codebase="./";dhx.name="Core";dhx.clone=function(source){var f=dhx.clone._function;f.prototype=source;return new f()};dhx.clone._function=function(){};dhx.extend=function(base,source,force){dhx.assert(base,"Invalid mixing target");dhx.assert(source,"Invalid mixing source");if(base._dhx_proto_wait){dhx.PowerArray.insertAt.call(base._dhx_proto_wait,source,1);return base}for(var method in source){if(!base[method]||force){base[method]=source[method]}}if(source.defaults){dhx.extend(base.defaults,source.defaults)}if(source.$init){source.$init.call(base)}return base};dhx.copy=function(source){dhx.assert(source,"Invalid mixing target");if(arguments.length>1){var target=arguments[0];source=arguments[1]}else{var target=(dhx.isArray(source)?[]:{})}for(var method in source){if(source[method]&&typeof source[method]=="object"&&!dhx.isDate(source[method])){target[method]=(dhx.isArray(source[method])?[]:{});dhx.copy(target[method],source[method])}else{target[method]=source[method]}}return target};dhx.single=function(source){var instance=null;var t=function(config){if(!instance){instance=new source({})}if(instance._reinit){instance._reinit.apply(instance,arguments)}return instance};return t};dhx.protoUI=function(){if(dhx.debug_proto){dhx.log("UI registered: "+arguments[0].name)}var origins=arguments;var selfname=origins[0].name;var t=function(data){if(!t){return dhx.ui[selfname].prototype}var origins=t._dhx_proto_wait;if(origins){var params=[origins[0]];for(var i=1;i<origins.length;i++){params[i]=origins[i];if(params[i]._dhx_proto_wait){params[i]=params[i].call(dhx,params[i].name)}if(params[i].prototype&&params[i].prototype.name){dhx.ui[params[i].prototype.name]=params[i]}}dhx.ui[selfname]=dhx.proto.apply(dhx,params);if(t._dhx_type_wait){for(var i=0;i<t._dhx_type_wait.length;i++){dhx.Type(dhx.ui[selfname],t._dhx_type_wait[i])}}t=origins=null}if(this!=dhx){return new dhx.ui[selfname](data)}else{return dhx.ui[selfname]}};t._dhx_proto_wait=Array.prototype.slice.call(arguments,0);return dhx.ui[selfname]=t};dhx.proto=function(){if(dhx.debug_proto){dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]")}var origins=arguments;var compilation=origins[0];var has_constructor=!!compilation.$init;var construct=[];dhx.assert(compilation,"Invalid mixing target");for(var i=origins.length-1;i>0;i--){dhx.assert(origins[i],"Invalid mixing source");if(typeof origins[i]=="function"){origins[i]=origins[i].prototype}if(origins[i].$init){construct.push(origins[i].$init)}if(origins[i].defaults){var defaults=origins[i].defaults;if(!compilation.defaults){compilation.defaults={}}for(var def in defaults){if(dhx.isUndefined(compilation.defaults[def])){compilation.defaults[def]=defaults[def]}}}if(origins[i].type&&compilation.type){for(var def in origins[i].type){if(!compilation.type[def]){compilation.type[def]=origins[i].type[def]}}}for(var key in origins[i]){if(!compilation[key]){compilation[key]=origins[i][key]}}}if(has_constructor){construct.push(compilation.$init)}compilation.$init=function(){for(var i=0;i<construct.length;i++){construct[i].apply(this,arguments)}};var result=function(config){this.$ready=[];dhx.assert(this.$init,"object without init method");this.$init(config);if(this._parseSettings){this._parseSettings(config,this.defaults)}for(var i=0;i<this.$ready.length;i++){this.$ready[i].call(this)}};result.prototype=compilation;compilation=origins=null;return result};dhx.bind=function(functor,object){return function(){return functor.apply(object,arguments)}};dhx.require=function(module,callback,master){if(typeof module!="string"){var count=module.length||0;var callback_origin=callback;if(!count){for(var file in module){count++}callback=function(){count--;if(count===0){callback_origin.apply(this,arguments)}};for(var file in module){dhx.require(file,callback,master)}}else{callback=function(){if(count){count--;dhx.require(module[module.length-count-1],callback,master)}else{return callback_origin.apply(this,arguments)}};callback()}return}if(dhx._modules[module]!==true){if(module.substr(-4)==".css"){var link=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+module});document.head.appendChild(link);if(callback){callback.call(master||window)}return}var step=arguments[4];if(!callback){dhx.exec(dhx.ajax().sync().get(dhx.codebase+module).responseText);dhx._modules[module]=true}else{if(!dhx._modules[module]){dhx._modules[module]=[[callback,master]];dhx.ajax(dhx.codebase+module,function(text){dhx.exec(text);var calls=dhx._modules[module];dhx._modules[module]=true;for(var i=0;i<calls.length;i++){calls[i][0].call(calls[i][1]||window,!i)}})}else{dhx._modules[module].push([callback,master])}}}};dhx._modules={};dhx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhx.wrap=function(code,wrap){if(!code){return wrap}return function(){var result=code.apply(this,arguments);wrap.apply(this,arguments);return result}};dhx.isUndefined=function(a){return typeof a=="undefined"};dhx.delay=function(method,obj,params,delay){return window.setTimeout(function(){var ret=method.apply(obj,(params||[]));method=obj=params=null;return ret},delay||1)};dhx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhx.toNode=function(node){if(typeof node=="string"){return document.getElementById(node)}return node};dhx.toArray=function(array){return dhx.extend((array||[]),dhx.PowerArray,true)};dhx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhx.isArray=function(obj){return Array.isArray?Array.isArray(obj):(Object.prototype.toString.call(obj)==="[object Array]")};dhx.isDate=function(obj){return obj instanceof Date};dhx._events={};dhx.event=function(node,event,handler,master){node=dhx.toNode(node);var id=dhx.uid();if(master){handler=dhx.bind(handler,master)}dhx._events[id]=[node,event,handler];if(node.addEventListener){node.addEventListener(event,handler,false)}else{if(node.attachEvent){node.attachEvent("on"+event,handler)}}return id};dhx.eventRemove=function(id){if(!id){return}dhx.assert(this._events[id],"Removing non-existing event");var ev=dhx._events[id];if(ev[0].removeEventListener){ev[0].removeEventListener(ev[1],ev[2],false)}else{if(ev[0].detachEvent){ev[0].detachEvent("on"+ev[1],ev[2])}}delete this._events[id]};dhx.log=function(type,message,details){if(arguments.length==1){message=type;type="log"}if(window.console&&console.log){type=type.toLowerCase();if(window.console[type]){window.console[type](message||"unknown error")}else{window.console.log(type+": "+message)}if(details){window.console.log(details)}}};dhx.log_full_time=function(name){dhx._start_time_log=new Date();dhx.log("Timing start ["+name+"]");window.setTimeout(function(){var time=new Date();dhx.log("Timing end ["+name+"]:"+(time.valueOf()-dhx._start_time_log.valueOf())/1000+"s")},1)};dhx.log_time=function(name){var fname="_start_time_log"+name;if(!dhx[fname]){dhx[fname]=new Date();dhx.log("Info","Timing start ["+name+"]")}else{var time=new Date();dhx.log("Info","Timing end ["+name+"]:"+(time.valueOf()-dhx[fname].valueOf())/1000+"s");dhx[fname]=null}};dhx.debug_code=function(code){code.call(dhx)};dhx.EventSystem={$init:function(){if(!this._evs_events){this._evs_events={};this._evs_handlers={};this._evs_map={}}},blockEvent:function(){this._evs_events._block=true},unblockEvent:function(){this._evs_events._block=false},mapEvent:function(map){dhx.extend(this._evs_map,map,true)},on_setter:function(config){if(config){for(var i in config){if(typeof config[i]=="function"){this.attachEvent(i,config[i])}}}},callEvent:function(type,params){if(this._evs_events._block){return true}type=type.toLowerCase();var event_stack=this._evs_events[type.toLowerCase()];var return_value=true;if(dhx.debug){dhx.log("info","["+this.name+"] event:"+type,params)}if(event_stack){for(var i=0;i<event_stack.length;i++){if(event_stack[i].apply(this,(params||[]))===false){return_value=false}}}if(this._evs_map[type]&&!this._evs_map[type].callEvent(type,params)){return_value=false}return return_value},attachEvent:function(type,functor,id){dhx.assert(functor,"Invalid event handler for "+type);type=type.toLowerCase();id=id||dhx.uid();functor=dhx.toFunctor(functor);var event_stack=this._evs_events[type]||dhx.toArray();event_stack.push(functor);this._evs_events[type]=event_stack;this._evs_handlers[id]={f:functor,t:type};return id},detachEvent:function(id){if(!this._evs_handlers[id]){return}var type=this._evs_handlers[id].t;var functor=this._evs_handlers[id].f;var event_stack=this._evs_events[type];event_stack.remove(functor);delete this._evs_handlers[id]},hasEvent:function(type){type=type.toLowerCase();return this._evs_events[type]?true:false}};dhx.extend(dhx,dhx.EventSystem);dhx.PowerArray={removeAt:function(pos,len){if(pos>=0){this.splice(pos,(len||1))}},remove:function(value){this.removeAt(this.find(value))},insertAt:function(data,pos){if(!pos&&pos!==0){this.push(data)}else{var b=this.splice(pos,(this.length-pos));this[pos]=data;this.push.apply(this,b)}},find:function(data){for(var i=0;i<this.length;i++){if(data==this[i]){return i}}return -1},each:function(functor,master){for(var i=0;i<this.length;i++){functor.call((master||this),this[i])}},map:function(functor,master){for(var i=0;i<this.length;i++){this[i]=functor.call((master||this),this[i])}return this},filter:function(functor,master){for(var i=0;i<this.length;i++){if(!functor.call((master||this),this[i])){this.splice(i,1);i--}}return this}};dhx.env={};(function(){if(navigator.userAgent.indexOf("Mobile")!=-1){dhx.env.mobile=true}if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1){dhx.env.touch=true}if(navigator.userAgent.indexOf("Opera")!=-1){dhx.env.isOpera=true}else{dhx.env.isIE=!!document.all;dhx.env.isFF=!document.all;dhx.env.isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);dhx.env.isSafari=dhx.env.isWebKit&&(navigator.userAgent.indexOf("Mac")!=-1)}if(navigator.userAgent.toLowerCase().indexOf("android")!=-1){dhx.env.isAndroid=true}dhx.env.transform=false;dhx.env.transition=false;var options={};options.names=["transform","transition"];options.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"];options.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];var d=document.createElement("DIV");for(var i=0;i<options.names.length;i++){var coll=options[options.names[i]];for(var j=0;j<coll.length;j++){if(typeof d.style[coll[j]]!="undefined"){dhx.env[options.names[i]]=coll[j];break}}}d.style[dhx.env.transform]="translate3d(0,0,0)";dhx.env.translate=(d.style[dhx.env.transform])?"translate3d":"translate";var prefix="";var cssprefix=false;if(dhx.env.isOpera){prefix="-o-";cssprefix="O"}if(dhx.env.isFF){prefix="-Moz-"}if(dhx.env.isWebKit){prefix="-webkit-"}if(dhx.env.isIE){prefix="-ms-"}dhx.env.transformCSSPrefix=prefix;dhx.env.transformPrefix=cssprefix||(dhx.env.transformCSSPrefix.replace(/-/gi,""));dhx.env.transitionEnd=((dhx.env.transformCSSPrefix=="-Moz-")?"transitionend":(dhx.env.transformPrefix+"TransitionEnd"))})();dhx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhx.html={_native_on_selectstart:0,denySelect:function(){if(!dhx._native_on_selectstart){dhx._native_on_selectstart=document.onselectstart}document.onselectstart=dhx.html.stopEvent},allowSelect:function(){if(dhx._native_on_selectstart!==0){document.onselectstart=dhx._native_on_selectstart||null}dhx._native_on_selectstart=0},index:function(node){var k=0;while(node=node.previousSibling){k++}return k},_style_cache:{},createCss:function(rule){var text="";for(var key in rule){text+=key+":"+rule[key]+";"}var name=this._style_cache[text];if(!name){name="s"+dhx.uid();this.addStyle("."+name+"{"+text+"}");this._style_cache[text]=name}return name},addStyle:function(rule){var style=document.createElement("style");style.setAttribute("type","text/css");style.setAttribute("media","screen");if(style.styleSheet){style.styleSheet.cssText=rule}else{style.appendChild(document.createTextNode(rule))}document.getElementsByTagName("head")[0].appendChild(style)},create:function(name,attrs,html){attrs=attrs||{};var node=document.createElement(name);for(var attr_name in attrs){node.setAttribute(attr_name,attrs[attr_name])}if(attrs.style){node.style.cssText=attrs.style}if(attrs["class"]){node.className=attrs["class"]}if(html){node.innerHTML=html}return node},getValue:function(node){node=dhx.toNode(node);if(!node){return""}return dhx.isUndefined(node.value)?node.innerHTML:node.value},remove:function(node){if(node instanceof Array){for(var i=0;i<node.length;i++){this.remove(node[i])}}else{if(node&&node.parentNode){node.parentNode.removeChild(node)}}},insertBefore:function(node,before,rescue){if(!node){return}if(before&&before.parentNode){before.parentNode.insertBefore(node,before)}else{rescue.appendChild(node)}},locate:function(e,id){if(e.tagName){var trg=e}else{e=e||event;var trg=e.target||e.srcElement}while(trg){if(trg.getAttribute){var test=trg.getAttribute(id);if(test){return test}}trg=trg.parentNode}return null},offset:function(elem){if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{y:Math.round(top),x:Math.round(left)}}else{var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop,10);left=left+parseInt(elem.offsetLeft,10);elem=elem.offsetParent}return{y:top,x:left}}},posRelative:function(ev){ev=ev||event;if(!dhx.isUndefined(ev.offsetX)){return{x:ev.offsetX,y:ev.offsetY}}else{return{x:ev.layerX,y:ev.layerY}}},pos:function(ev){ev=ev||event;if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY}}var d=((dhx.env.isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:ev.clientX+d.scrollLeft-d.clientLeft,y:ev.clientY+d.scrollTop-d.clientTop}},preventEvent:function(e){if(e&&e.preventDefault){e.preventDefault()}return dhx.html.stopEvent(e)},stopEvent:function(e){(e||event).cancelBubble=true;return false},addCss:function(node,name){node.className+=" "+name},removeCss:function(node,name){node.className=node.className.replace(RegExp(" "+name,"g"),"")}};dhx.ready=function(code){if(this._ready){code.call()}else{this._ready_code.push(code)}};dhx._ready_code=[];(function(){var temp=document.getElementsByTagName("SCRIPT");dhx.assert(temp.length,"Can't locate codebase");if(temp.length){temp=(temp[temp.length-1].getAttribute("src")||"").split("/");temp.splice(temp.length-1,1);dhx.codebase=temp.slice(0,temp.length).join("/")+"/"}dhx.event(window,"load",function(){dhx4.callEvent("onReady",[]);dhx.delay(function(){dhx._ready=true;for(var i=0;i<dhx._ready_code.length;i++){dhx._ready_code[i].call()}dhx._ready_code=[]})})})();dhx.locale=dhx.locale||{};dhx.assert_core_ready();dhx.ready(function(){dhx.event(document.body,"click",function(e){dhx4.callEvent("onClick",[e||event])})});(function(){var _cache={};var newlines=new RegExp("(\\r\\n|\\n)","g");var quotes=new RegExp('(\\")',"g");dhx.Template=function(str){if(typeof str=="function"){return str}if(_cache[str]){return _cache[str]}str=(str||"").toString();if(str.indexOf("->")!=-1){str=str.split("->");switch(str[0]){case"html":str=dhx.html.getValue(str[1]);break;default:break}}str=(str||"").toString();str=str.replace(newlines,"\\n");str=str.replace(quotes,'\\"');str=str.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');str=str.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");str=str.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');str=str.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');str=str.replace("{obj}",'"+obj+"');str=str.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{_cache[str]=Function("obj","common",'return "'+str+'";')}catch(e){dhx.assert_error("Invalid template:"+str)}return _cache[str]};dhx.Template.empty=function(){return""};dhx.Template.bind=function(value){return dhx.bind(dhx.Template(value),this)};dhx.Type=function(obj,data){if(obj._dhx_proto_wait){if(!obj._dhx_type_wait){obj._dhx_type_wait=[]}obj._dhx_type_wait.push(data);return}if(typeof obj=="function"){obj=obj.prototype}if(!obj.types){obj.types={"default":obj.type};obj.type.name="default"}var name=data.name;var type=obj.type;if(name){type=obj.types[name]=dhx.clone(data.baseType?obj.types[data.baseType]:obj.type)}for(var key in data){if(key.indexOf("template")===0){type[key]=dhx.Template(data[key])}else{type[key]=data[key]}}return name}})();dhx.Settings={$init:function(){this._settings=this.config={}},define:function(property,value){if(typeof property=="object"){return this._parseSeetingColl(property)}return this._define(property,value)},_define:function(property,value){var setter=this[property+"_setter"];return this._settings[property]=setter?setter.call(this,value,property):value},_parseSeetingColl:function(coll){if(coll){for(var a in coll){this._define(a,coll[a])}}},_parseSettings:function(obj,initial){var settings={};if(initial){settings=dhx.extend(settings,initial)}if(typeof obj=="object"&&!obj.tagName){dhx.extend(settings,obj,true)}this._parseSeetingColl(settings)},_mergeSettings:function(config,defaults){for(var key in defaults){switch(typeof config[key]){case"object":config[key]=this._mergeSettings((config[key]||{}),defaults[key]);break;case"undefined":config[key]=defaults[key];break;default:break}}return config},debug_freid_c_id:true,debug_freid_a_name:true};dhx.ajax=function(url,call,master){if(arguments.length!==0){var http_request=new dhx.ajax();if(master){http_request.master=master}return http_request.get(url,null,call)}if(!this.getXHR){return new dhx.ajax()}return this};dhx.ajax.count=0;dhx.ajax.prototype={master:null,getXHR:function(){if(dhx.env.isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(url,params,call){var x=this.getXHR();if(!dhx.isArray(call)){call=[call]}if(typeof params=="object"){var t=[];for(var a in params){var value=params[a];if(value===null||value===dhx.undefined){value=""}t.push(a+"="+encodeURIComponent(value))}params=t.join("&")}if(params&&this.request==="GET"){url=url+(url.indexOf("?")!=-1?"&":"?")+params;params=null}x.open(this.request,url,!this._sync);if(this.request==="POST"){x.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var self=this;x.onreadystatechange=function(){if(!x.readyState||x.readyState==4){if(dhx.debug_time){dhx.log_full_time("data_loading")}dhx.ajax.count++;if(call&&self){for(var i=0;i<call.length;i++){if(call[i]){var method=(call[i].success||call[i]);if(x.status>=400||(!x.status&&!x.responseText)){method=call[i].error}if(method){method.call((self.master||self),x.responseText,x.responseXML,x)}}}}if(self){self.master=null}call=self=null}};x.send(params||null);return x},get:function(url,params,call){if(arguments.length==2){call=params;params=null}this.request="GET";return this.send(url,params,call)},post:function(url,params,call){this.request="POST";return this.send(url,params,call)},put:function(url,params,call){this.request="PUT";return this.send(url,params,call)},del:function(url,params,call){this.request="DELETE";return this.send(url,params,call)},sync:function(){this._sync=true;return this},bind:function(master){this.master=master;return this}};dhx.send=function(url,values,method,target){var form=dhx.html.create("FORM",{target:(target||"_self"),action:url,method:(method||"POST")},"");for(var k in values){var field=dhx.html.create("INPUT",{type:"hidden",name:k,value:values[k]},"");form.appendChild(field)}form.style.display="none";document.body.appendChild(form);form.submit();document.body.removeChild(form)};dhx.AtomDataLoader={$init:function(config){this.data={};if(config){this._settings.datatype=config.datatype||"json";this.$ready.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(value){if(!this._ready_for_data){return value}this.load(value,this._settings.datatype);return value},data_setter:function(value){if(!this._ready_for_data){return value}this.parse(value,this._settings.datatype);return true},debug_freid_c_datatype:true,debug_freid_c_dataFeed:true,load:function(url,call){if(url.$proxy){url.load(this,typeof call=="string"?call:"json");return}this.callEvent("onXLS",[]);if(typeof call=="string"){this.data.driver=dhx.DataDriver[call];call=arguments[2]}else{if(!this.data.driver){this.data.driver=dhx.DataDriver.json}}var callback=[{success:this._onLoad,error:this._onLoadError}];if(call){if(dhx.isArray(call)){callback.push.apply(callback,call)}else{callback.push(call)}}return dhx.ajax(url,callback,this)},parse:function(data,type){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[type||"json"];this._onLoad(data,null)},_onLoad:function(text,xml,loader,key){var driver=this.data.driver;var data=driver.toObject(text,xml);if(data){var top=driver.getRecords(data)[0];this.data=(driver?driver.getDetails(top):text)}else{this._onLoadError(text,xml,loader)}this.callEvent("onXLE",[])},_onLoadError:function(text,xml,xhttp){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx4.callEvent("onLoadError",[text,xml,xhttp,this])},_check_data_feed:function(data){if(!this._settings.dataFeed||this._ignore_feed||!data){return true}var url=this._settings.dataFeed;if(typeof url=="function"){return url.call(this,(data.id||data),data)}url=url+(url.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(data.id||data);this.callEvent("onXLS",[]);dhx.ajax(url,function(text,xml,loader){this._ignore_feed=true;var data=dhx.DataDriver.toObject(text,xml);if(data){this.setValues(data.getDetails(data.getRecords()[0]))}else{this._onLoadError(text,xml,loader)}this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){try{eval("dhx.temp="+data)}catch(e){dhx.assert_error(e);return null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data){if(key!="data"){t[key]=data[key]}}data=data.data}return data},getRecords:function(data){if(data&&!dhx.isArray(data)){return[data]}return data},getDetails:function(data){if(typeof data=="string"){return{id:dhx.uid(),value:data}}return data},getInfo:function(data){var cfg=data.config;if(!cfg){return{}}return{_size:(cfg.total_count||0),_from:(cfg.pos||0),_parent:(cfg.parent||0),_config:(cfg.config),_key:(cfg.dhx_security)}},child:"data"};dhx.DataDriver.html={toObject:function(data){if(typeof data=="string"){var t=null;if(data.indexOf("<")==-1){t=dhx.toNode(data)}if(!t){t=document.createElement("DIV");t.innerHTML=data}return t.getElementsByTagName(this.tag)}return data},getRecords:function(node){var data=[];for(var i=0;i<node.childNodes.length;i++){var child=node.childNodes[i];if(child.nodeType==1){data.push(child)}}return data},getDetails:function(data){return dhx.DataDriver.xml.tagToObject(data)},getInfo:function(data){return{_size:0,_from:0}},tag:"LI"};dhx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhx.temp="+data);return dhx.temp}return data},getRecords:function(data){return data},getDetails:function(data){var result={};for(var i=0;i<data.length;i++){result["data"+i]=data[i]}return result},getInfo:function(data){return{_size:0,_from:0}}};dhx.DataDriver.csv={toObject:function(data){return data},getRecords:function(data){return data.split(this.row)},getDetails:function(data){data=this.stringToArray(data);var result={};for(var i=0;i<data.length;i++){result["data"+i]=data[i]}return result},getInfo:function(data){return{_size:0,_from:0}},stringToArray:function(data){data=data.split(this.cell);for(var i=0;i<data.length;i++){data[i]=data[i].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return data},row:"\n",cell:","};dhx.DataDriver.xml={_isValidXML:function(data){if(!data||!data.documentElement){return null}if(data.getElementsByTagName("parsererror").length){return null}return data},toObject:function(text,xml){if(this._isValidXML(data)){return data}if(typeof text=="string"){var data=this.fromString(text.replace(/^[\s]+/,""))}else{data=text}if(this._isValidXML(data)){return data}return null},getRecords:function(data){return this.xpath(data,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(data){return this.tagToObject(data,{})},getInfo:function(data){var config=this.xpath(data,this.config);if(config.length){config=this.assignTypes(this.tagToObject(config[0],{}))}else{config=null}return{_size:(data.documentElement.getAttribute("total_count")||0),_from:(data.documentElement.getAttribute("pos")||0),_parent:(data.documentElement.getAttribute("parent")||0),_config:config,_key:(data.documentElement.getAttribute("dhx_security")||null)}},xpath:function(xml,path){if(window.XPathResult){var node=xml;if(xml.nodeName.indexOf("document")==-1){xml=xml.ownerDocument}var res=[];var col=xml.evaluate(path,node,null,XPathResult.ANY_TYPE,null);var temp=col.iterateNext();while(temp){res.push(temp);temp=col.iterateNext()}return res}else{var test=true;try{if(typeof(xml.selectNodes)=="undefined"){test=false}}catch(e){}if(test){return xml.selectNodes(path)}else{var name=path.split("/").pop();return xml.getElementsByTagName(name)}}},assignTypes:function(obj){for(var k in obj){var test=obj[k];if(typeof test=="object"){this.assignTypes(test)}else{if(typeof test=="string"){if(test===""){continue}if(test=="true"){obj[k]=true}else{if(test=="false"){obj[k]=false}else{if(test==test*1){obj[k]=obj[k]*1}}}}}}return obj},tagToObject:function(tag,z){z=z||{};var flag=false;var a=tag.attributes;if(a&&a.length){for(var i=0;i<a.length;i++){z[a[i].name]=a[i].value}flag=true}var b=tag.childNodes;var state={};for(var i=0;i<b.length;i++){if(b[i].nodeType==1){var name=b[i].tagName;if(typeof z[name]!="undefined"){if(!dhx.isArray(z[name])){z[name]=[z[name]]}z[name].push(this.tagToObject(b[i],{}))}else{z[b[i].tagName]=this.tagToObject(b[i],{})}flag=true}}if(!flag){return this.nodeValue(tag)}z.value=z.value||this.nodeValue(tag);return z},nodeValue:function(node){if(node.firstChild){return node.firstChild.data}return""},fromString:function(xmlString){try{if(window.DOMParser){return(new DOMParser()).parseFromString(xmlString,"text/xml")}if(window.ActiveXObject){var temp=new ActiveXObject("Microsoft.xmlDOM");temp.loadXML(xmlString);return temp}}catch(e){dhx.assert_error(e);return null}dhx.assert_error("Load from xml string is not supported")}};dhx.DataLoader=dhx.proto({$init:function(config){config=config||"";this._ajax_queue=dhx.toArray();this.data=new dhx.DataStore();this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(from,count,callback){if(this._load_count){return this._load_count=[from,count,callback]}else{this._load_count=true}this._feed_last=[from,count];this._feed_common.call(this,from,count,callback)},_feed_common:function(from,count,callback){var url=this.data.url;if(from<0){from=0}this.load(url+((url.indexOf("?")==-1)?"?":"&")+(this.dataCount()?("continue=true&"):"")+"start="+from+"&count="+count,[this._feed_callback,callback])},_feed_callback:function(){var temp=this._load_count;var last=this._feed_last;this._load_count=false;if(typeof temp=="object"&&(temp[0]!=last[0]||temp[1]!=last[1])){this.data.feed.apply(this,temp)}},load:function(url,call){var ajax=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(ajax);if(!this.data.url){this.data.url=url}},loadNext:function(count,start,callback,url,now){if(this._settings.datathrottle&&!now){if(this._throttle_request){window.clearTimeout(this._throttle_request)}this._throttle_request=dhx.delay(function(){this.loadNext(count,start,callback,url,true)},this,0,this._settings.datathrottle);return}if(!start&&start!==0){start=this.dataCount()}this.data.url=this.data.url||url;if(this.callEvent("onDataRequest",[start,count,callback,url])&&this.data.url){this.data.feed.call(this,start,count,callback)}},_maybe_loading_already:function(count,from){var last=this._feed_last;if(this._load_count&&last){if(last[0]<=from&&(last[1]+last[0]>=count+from)){return true}}return false},_onLoad:function(text,xml,loader){this._ajax_queue.remove(loader);var data=this.data.driver.toObject(text,xml);if(data){this.data._parse(data)}else{return this._onLoadError(text,xml,loader)}this._call_onready();this.callEvent("onXLE",[])},removeMissed_setter:function(value){return this.data._removeMissed=value},scheme_setter:function(value){this.data.scheme(value)},dataFeed_setter:function(value){this.data.attachEvent("onBeforeFilter",dhx.bind(function(text,value){if(this._settings.dataFeed){var filter={};if(!text&&!value){return}if(typeof text=="function"){if(!value){return}text(value,filter)}else{filter={text:value}}this.clearAll();var url=this._settings.dataFeed;var urldata=[];if(typeof url=="function"){return url.call(this,value,filter)}for(var key in filter){urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]))}this.load(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&"),this._settings.datatype);return false}},this));return value},debug_freid_c_ready:true,debug_freid_c_datathrottle:true,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var code=dhx.toFunctor(this._settings.ready);if(code){dhx.delay(code,this,arguments)}this._ready_was_used=true}},_call_onclearall:function(){for(var i=0;i<this._ajax_queue.length;i++){this._ajax_queue[i].abort()}this._ajax_queue=dhx.toArray()},_call_on_config:function(config){this._parseSeetingColl(config)}},dhx.AtomDataLoader);dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("json");this.pull={};this.order=dhx.toArray();this._marks={}};dhx.DataStore.prototype={setDriver:function(type){dhx.assert(dhx.DataDriver[type],"incorrect DataDriver");this.driver=dhx.DataDriver[type]},_parse:function(data,master){this.callEvent("onParse",[this.driver,data]);if(this._filter_order){this.filter()}var info=this.driver.getInfo(data);if(info._key){dhx.securityKey=info._key}if(info._config){this.callEvent("onServerConfig",[info._config])}var recs=this.driver.getRecords(data);this._inner_parse(info,recs);if(this._scheme_group&&this._group_processing){this._group_processing(this._scheme_group)}if(this._scheme_sort){this.blockEvent();this.sort(this._scheme_sort);this.unblockEvent()}this.callEvent("onStoreLoad",[this.driver,data]);this.refresh()},_inner_parse:function(info,recs){var from=(info._from||0)*1;var subload=true;var marks=false;if(from===0&&this.order[0]){if(this._removeMissed){marks={};for(var i=0;i<this.order.length;i++){marks[this.order[i]]=true}}subload=false;from=this.order.length}var j=0;for(var i=0;i<recs.length;i++){var temp=this.driver.getDetails(recs[i]);var id=this.id(temp);if(!this.pull[id]){this.order[j+from]=id;j++}else{if(subload&&this.order[j+from]){j++}}if(this.pull[id]){dhx.extend(this.pull[id],temp,true);if(this._scheme_update){this._scheme_update(this.pull[id])}if(marks){delete marks[id]}}else{this.pull[id]=temp;if(this._scheme_init){this._scheme_init(temp)}}}if(marks){this.blockEvent();for(var delid in marks){this.remove(delid)}this.unblockEvent()}if(!this.order[info._size-1]){this.order[info._size-1]=dhx.undefined}},id:function(data){return data.id||(data.id=dhx.uid())},changeId:function(old,newid){if(this.pull[old]){this.pull[newid]=this.pull[old]}this.pull[newid].id=newid;this.order[this.order.find(old)]=newid;if(this._filter_order){this._filter_order[this._filter_order.find(old)]=newid}if(this._marks[old]){this._marks[newid]=this._marks[old];delete this._marks[old]}this.callEvent("onIdChange",[old,newid]);if(this._render_change_id){this._render_change_id(old,newid)}delete this.pull[old]},item:function(id){return this.pull[id]},update:function(id,data){if(dhx.isUndefined(data)){data=this.item(id)}if(this._scheme_update){this._scheme_update(data)}if(this.callEvent("onBeforeUpdate",[id,data])===false){return false}this.pull[id]=data;this.callEvent("onStoreUpdated",[id,data,"update"])},refresh:function(id){if(this._skip_refresh){return}if(id){this.callEvent("onStoreUpdated",[id,this.pull[id],"paint"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(code,master){this._skip_refresh=true;code.call(master||this);this._skip_refresh=false},getRange:function(from,to){if(from){from=this.indexById(from)}else{from=(this.$min||this.startOffset)||0}if(to){to=this.indexById(to)}else{to=Math.min(((this.$max||this.endOffset)||Infinity),(this.dataCount()-1));if(to<0){to=0}}if(from>to){var a=to;to=from;from=a}return this.getIndexRange(from,to)},getIndexRange:function(from,to){to=Math.min((to||Infinity),this.dataCount()-1);var ret=dhx.toArray();for(var i=(from||0);i<=to;i++){ret.push(this.item(this.order[i]))}return ret},dataCount:function(){return this.order.length},exists:function(id){return !!(this.pull[id])},move:function(sindex,tindex){dhx.assert(sindex>=0&&tindex>=0,"DataStore::move","Incorrect indexes");var id=this.idByIndex(sindex);var obj=this.item(id);this.order.removeAt(sindex);this.order.insertAt(id,Math.min(this.order.length,tindex));this.callEvent("onStoreUpdated",[id,obj,"move"])},scheme:function(config){this._scheme={};this._scheme_init=config.$init;this._scheme_update=config.$update;this._scheme_serialize=config.$serialize;this._scheme_group=config.$group;this._scheme_sort=config.$sort;for(var key in config){if(key.substr(0,1)!="$"){this._scheme[key]=config[key]}}},sync:function(source,filter,silent){if(typeof source=="string"){source=$$("source")}if(typeof filter!="function"){silent=filter;filter=null}if(dhx.debug_bind){this.debug_sync_master=source;dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}this._backbone_source=false;if(source.name!="DataStore"){if(source.data&&source.data.name=="DataStore"){source=source.data}else{this._backbone_source=true}}var sync_logic=dhx.bind(function(mode,record,data){if(this._backbone_source){if(!mode){return}if(mode.indexOf("change")===0){if(mode=="change"){this.pull[record.id]=record.attributes;this.refresh(record.id);return}else{return}}if(mode=="reset"){data=record}this.order=[];this.pull={};this._filter_order=null;for(var i=0;i<data.models.length;i++){var id=data.models[i].id;this.order.push(id);this.pull[id]=data.models[i].attributes}}else{this._filter_order=null;this.order=dhx.toArray([].concat(source.order));this.pull=source.pull}if(filter){this.silent(filter)}if(this._on_sync){this._on_sync()}if(dhx.debug_bind){dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}this.callEvent("onSyncApply",[]);if(!silent){this.refresh()}else{silent=false}},this);if(this._backbone_source){source.bind("all",sync_logic)}else{this._sync_events=[source.attachEvent("onStoreUpdated",sync_logic),source.attachEvent("onIdChange",dhx.bind(function(old,nid){this.changeId(old,nid)},this))]}sync_logic()},add:function(obj,index){if(this._scheme){for(var key in this._scheme){if(dhx.isUndefined(obj[key])){obj[key]=this._scheme[key]}}}if(this._scheme_init){this._scheme_init(obj)}var id=this.id(obj);var order=arguments[2]||this.order;var data_size=order.length;if(dhx.isUndefined(index)||index<0){index=data_size}if(index>data_size){dhx.log("Warning","DataStore:add","Index of out of bounds");index=Math.min(order.length,index)}if(this.callEvent("onBeforeAdd",[id,obj,index])===false){return false}dhx.assert(!this.exists(id),"Not unique ID");this.pull[id]=obj;order.insertAt(id,index);if(this._filter_order){var original_index=this._filter_order.length;if(!index&&this.order.length){original_index=0}this._filter_order.insertAt(id,original_index)}this.callEvent("onAfterAdd",[id,index]);this.callEvent("onStoreUpdated",[id,obj,"add"]);return id},remove:function(id){if(dhx.isArray(id)){for(var i=0;i<id.length;i++){this.remove(id[i])}return}if(this.callEvent("onBeforeDelete",[id])===false){return false}dhx.assert(this.exists(id),"Not existing ID in remove command"+id);var obj=this.item(id);this.order.remove(id);if(this._filter_order){this._filter_order.remove(id)}delete this.pull[id];if(this._marks[id]){delete this._marks[id]}this.callEvent("onAfterDelete",[id]);this.callEvent("onStoreUpdated",[id,obj,"delete"])},clearAll:function(){this.pull={};this.order=dhx.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(index){if(index>=this.order.length||index<0){dhx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[index]},indexById:function(id){var res=this.order.find(id);if(!this.pull[id]){dhx.log("Warning","DataStore::indexById Non-existing ID: "+id)}return res},next:function(id,step){return this.order[this.indexById(id)+(step||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(id,step){return this.order[this.indexById(id)-(step||1)]},sort:function(by,dir,as){var sort=by;if(typeof by=="function"){sort={as:by,dir:dir}}else{if(typeof by=="string"){sort={by:by.replace(/#/g,""),dir:dir,as:as}}}var parameters=[sort.by,sort.dir,sort.as];if(!this.callEvent("onBeforeSort",parameters)){return}this._sort_core(sort);this.refresh();this.callEvent("onAfterSort",parameters)},_sort_core:function(sort){if(this.order.length){var sorter=this._sort._create(sort);var neworder=this.getRange(this.first(),this.last());neworder.sort(sorter);this.order=neworder.map(function(obj){dhx.assert(obj,"Client sorting can't be used with dynamic loading");return this.id(obj)},this)}},_filter_reset:function(preserve){if(this._filter_order&&!preserve){this.order=this._filter_order;delete this._filter_order}},_filter_core:function(filter,value,preserve){var neworder=dhx.toArray();for(var i=0;i<this.order.length;i++){var id=this.order[i];if(filter(this.item(id),value)){neworder.push(id)}}if(!preserve||!this._filter_order){this._filter_order=this.order}this.order=neworder},filter:function(text,value,preserve){if(!this.callEvent("onBeforeFilter",[text,value])){return}this._filter_reset(preserve);if(!this.order.length){return}if(text){var filter=text;value=value||"";if(typeof text=="string"){text=text.replace(/#/g,"");if(typeof value=="function"){filter=function(obj){return value(obj[text])}}else{value=value.toString().toLowerCase();filter=function(obj,value){dhx.assert(obj,"Client side filtering can't be used with dynamic loading");return(obj[text]||"").toString().toLowerCase().indexOf(value)!=-1}}}this._filter_core(filter,value,preserve,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])},each:function(method,master){for(var i=0;i<this.order.length;i++){method.call((master||this),this.item(this.order[i]))}},_methodPush:function(object,method){return function(){return object[method].apply(object,arguments)}},addMark:function(id,mark,css,value){var obj=this._marks[id]||{};this._marks[id]=obj;if(!obj[mark]){obj[mark]=value||true;if(css){this.item(id).$css=(this.item(id).$css||"")+" "+mark;this.refresh(id)}}return obj[mark]},removeMark:function(id,mark,css){var obj=this._marks[id];if(obj&&obj[mark]){delete obj[mark]}if(css){var current_css=this.item(id).$css;if(current_css){this.item(id).$css=current_css.replace(mark,"");this.refresh(id)}}},hasMark:function(id,mark){var obj=this._marks[id];return(obj&&obj[mark])},provideApi:function(target,eventable){this.debug_bind_master=target;if(eventable){this.mapEvent({onbeforesort:target,onaftersort:target,onbeforeadd:target,onafteradd:target,onbeforedelete:target,onafterdelete:target,onbeforeupdate:target})}var list=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"];for(var i=0;i<list.length;i++){target[list[i]]=this._methodPush(this,list[i])}},serialize:function(){var ids=this.order;var result=[];for(var i=0;i<ids.length;i++){var el=this.pull[ids[i]];if(this._scheme_serialize){el=this._scheme_serialize(el);if(el===false){continue}}result.push(el)}return result},_sort:{_create:function(config){return this._dir(config.dir,this._by(config.by,config.as))},_as:{date:function(a,b){a=a-0;b=b-0;return a>b?1:(a<b?-1:0)},"int":function(a,b){a=a*1;b=b*1;return a>b?1:(a<b?-1:0)},string_strict:function(a,b){a=a.toString();b=b.toString();return a>b?1:(a<b?-1:0)},string:function(a,b){if(!b){return 1}if(!a){return -1}a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:(a<b?-1:0)}},_by:function(prop,method){if(!prop){return method}if(typeof method!="function"){method=this._as[method||"string"]}dhx.assert(method,"Invalid sorting method");return function(a,b){return method(a[prop],b[prop])}},_dir:function(prop,method){if(prop=="asc"||!prop){return method}return function(a,b){return method(a,b)*-1}}}};dhx.BaseBind={debug_freid_ignore:{id:true},bind:function(target,rule,format){if(typeof target=="string"){target=dhx.ui.get(target)}if(target._initBindSource){target._initBindSource()}if(this._initBindSource){this._initBindSource()}if(!target.getBindData){dhx.extend(target,dhx.BindSource)}if(!this._bind_ready){var old_render=this.render;if(this.filter){var key=this._settings.id;this.data._on_sync=function(){target._bind_updated[key]=false}}this.render=function(){if(this._in_bind_processing){return}this._in_bind_processing=true;var result=this.callEvent("onBindRequest");this._in_bind_processing=false;return old_render.apply(this,((result===false)?arguments:[]))};if(this.getValue||this.getValues){this.save=function(){if(this.validate&&!this.validate()){return}target.setBindData((this.getValue?this.getValue:this.getValues()),this._settings.id)}}this._bind_ready=true}target.addBind(this._settings.id,rule,format);if(dhx.debug_bind){dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+target.name+"@"+target._settings.id)}var target_id=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return target.getBindData(target_id)});if(!this._settings.dataFeed&&this.loadNext){this.data.attachEvent("onStoreLoad",function(){target._bind_updated[target_id]=false})}if(this.isVisible(this._settings.id)){this.refresh()}},unbind:function(target){return this._unbind(target)},_unbind:function(target){target.removeBind(this._settings.id);var events=(this._sync_events||(this.data?this.data._sync_events:0));if(events&&target.data){for(var i=0;i<events.length;i++){target.data.detachEvent(events[i])}}}};dhx.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(code){this._do_not_update_binds=true;code.call(this);this._do_not_update_binds=false;this._update_binds()},setBindData:function(data,key){if(key){this._ignore_binds[key]=true}if(dhx.debug_bind){dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+key)}if(this.setValue){this.setValue(data)}else{if(this.setValues){this.setValues(data)}else{var id=this.getCursor();if(id){data=dhx.extend(this.item(id),data,true);this.update(id,data)}}}this.callEvent("onBindUpdate",[data,key,id]);if(this.save){this.save()}if(key){this._ignore_binds[key]=false}},getBindData:function(key,update){if(this._bind_updated[key]){return false}var target=dhx.ui.get(key);if(target.isVisible(target._settings.id)){this._bind_updated[key]=true;if(dhx.debug_bind){dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+target.name+"@"+target._settings.id)}this._bind_update(target,this._bind_hash[key][0],this._bind_hash[key][1]);if(update&&target.filter){target.refresh()}}},addBind:function(source,rule,format){this._bind_hash[source]=[rule,format]},removeBind:function(source){delete this._bind_hash[source];delete this._bind_updated[source];delete this._ignore_binds[source]},_bind_specific_rules:function(obj){if(obj.filter){dhx.extend(this,dhx.CollectionBind)}else{if(obj.setValue){dhx.extend(this,dhx.ValueBind)}else{dhx.extend(this,dhx.RecordBind)}}},_update_binds:function(){if(!this._do_not_update_binds){for(var key in this._bind_hash){if(this._ignore_binds[key]){continue}this._bind_updated[key]=false;this.getBindData(key,true)}}},_bind_update_common:function(target,rule,data){if(target.setValue){target.setValue(data?data[rule]:data)}else{if(!target.filter){if(!data&&target.clear){target.clear()}else{if(target._check_data_feed(data)){target.setValues(dhx.clone(data))}}}else{target.data.silent(function(){this.filter(rule,data)})}}target.callEvent("onBindApply",[data,rule,this])}};dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return true},$init:function(config){this.data=""||config;var id=(config&&config.id)?config.id:dhx.uid();this._settings={id:id};dhx.ui.views[id]=this},setValue:function(value){this.data=value;this.callEvent("onChange",[value])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return true},$init:function(config){this.data=config||{};var id=(config&&config.id)?config.id:dhx.uid();this._settings={id:id};dhx.ui.views[id]=this},getValues:function(){return this.data},setValues:function(data){this.data=data;this.callEvent("onChange",[data])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings);dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){if(!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed){return false}return true},$init:function(config){this.data.provideApi(this,true);var id=(config&&config.id)?config.id:dhx.uid();this._settings.id=id;dhx.ui.views[id]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings);dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(target,rule,format){var data=this.getValue()||"";if(format){data=format(data)}if(target.setValue){target.setValue(data)}else{if(!target.filter){var pod={};pod[rule]=data;if(target._check_data_feed(data)){target.setValues(pod)}}else{target.data.silent(function(){this.filter(rule,data)})}}target.callEvent("onBindApply",[data,rule,this])}};dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(target,rule){var data=this.getValues()||null;this._bind_update_common(target,rule,data)}};dhx.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(data){var sel=this.getSelected();this.setCursor(sel?(sel.id||sel):null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",dhx.bind(function(id,data,mode){if(id&&id==this.getCursor()&&mode!="paint"){this._update_binds()}},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(oldid,newid){if(this._cursor==oldid){this._cursor=newid}},this))},setCursor:function(id){if(id==this._cursor||(id!==null&&!this.item(id))){return}this.callEvent("onBeforeCursorChange",[this._cursor]);this._cursor=id;this.callEvent("onAfterCursorChange",[id])},getCursor:function(){return this._cursor},_bind_update:function(target,rule){var data=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(target,rule,data)}};if(!dhx.ui){dhx.ui={}}if(!dhx.ui.views){dhx.ui.views={};dhx.ui.get=function(id){if(id._settings){return id}return dhx.ui.views[id]}}if(window.dhtmlx){dhtmlx.BaseBind=dhx.BaseBind}dhtmlXDataStore=function(config){var obj=new dhx.DataCollection(config);var name="_dp_init";obj[name]=function(dp){var varname="_methods";dp[varname]=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(id,data,mode){if(id&&!dp._silent){dp.setUpdated(id,true,this._old_names[mode])}});varname="_getRowData";dp[varname]=function(id,pref){var ev=this.obj.data.item(id);var data={id:id};data[this.action_param]=this.obj.getUserData(id);if(ev){for(var a in ev){data[a]=ev[a]}}return data};this.changeId=function(oldid,newid){this.data.changeId(oldid,newid);dp._silent=true;this.data.callEvent("onStoreUpdated",[newid,this.item(newid),"update"]);dp._silent=false};varname="_clearUpdateFlag";dp[varname]=function(){};this._userdata={}};obj.dummy=function(){};obj.setUserData=function(id,name,value){this._userdata[id]=value};obj.getUserData=function(id,name){return this._userdata[id]};obj.dataFeed=function(obj){this.define("dataFeed",obj)};dhx.extend(obj,dhx.BindSource);return obj};if(window.dhtmlXDataView){dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){if(!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed){return false}return true};var settings="_settings";this._settings=this._settings||this[settings];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}if(window.dhtmlXChart){dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){if(!this.data.order.length&&!this.data._filtered_state&&!this._settings.dataFeed){return false}return true};var settings="_settings";this._settings=this._settings||this[settings];if(!this._settings.id){this._settings.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this._settings.id]=this}}dhx.BaseBind.unsync=function(target){return dhx.BaseBind._unbind.call(this,target)};dhx.BaseBind.unbind=function(target){return dhx.BaseBind._unbind.call(this,target)};dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};dhx.BaseBind.legacySync=function(source,rule){if(this._initBindSource){this._initBindSource()}if(source._initBindSource){source._initBindSource()}this.attachEvent("onAfterEditStop",function(id){this.save(id);return true});this.attachEvent("onDataRequest",function(start,count){for(var i=start;i<start+count;i++){if(!source.data.order[i]){source.loadNext(count,start);return false}}});this.save=function(id){if(!id){id=this.getCursor()}var sobj=this.item(id);var tobj=source.item(id);for(var key in sobj){if(key.indexOf("$")!==0){tobj[key]=sobj[key]}}source.refresh(id)};if(source&&source.name=="DataCollection"){return source.data.sync.apply(this.data,arguments)}else{return this.data.sync.apply(this.data,arguments)}};if(window.dhtmlXForm){dhtmlXForm.prototype.bind=function(target){dhx.BaseBind.bind.apply(this,arguments);target.getBindData(this._settings.id)};dhtmlXForm.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXForm.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this}};dhtmlXForm.prototype._check_data_feed=function(data){if(!this._settings.dataFeed||this._ignore_feed||!data){return true}var url=this._settings.dataFeed;if(typeof url=="function"){return url.call(this,(data.id||data),data)}url=url+(url.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(data.id||data);this.load(url);return false};dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData;dhtmlXForm.prototype.getValues=function(){return this.getFormData(false,true)};dhtmlXForm.prototype.dataFeed=function(value){if(this._settings){this._settings.dataFeed=value}else{this._server_feed=value}};dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(value){return true}}if(window.scheduler){if(!window.Scheduler){window.Scheduler={}}Scheduler.$syncFactory=function(scheduler){scheduler.sync=function(source,rule){if(this._initBindSource){this._initBindSource()}if(source._initBindSource){source._initBindSource()}var process="_process_loading";var insync=function(ignore){scheduler.clearAll();var order=source.data.order;var pull=source.data.pull;var evs=[];for(var i=0;i<order.length;i++){if(rule&&rule.copy){evs[i]=dhx.clone(pull[order[i]])}else{evs[i]=pull[order[i]]}}scheduler[process](evs);scheduler.callEvent("onSyncApply",[])};this.save=function(id){if(!id){id=this.getCursor()}var data=this.item(id);var olddat=source.item(id);if(this.callEvent("onStoreSave",[id,data,olddat])){dhx.extend(source.item(id),data,true);source.update(id)}};this.item=function(id){return this.getEvent(id)};this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){insync.call(this)}),source.data.attachEvent("onIdChange",function(oldid,newid){scheduler.changeEventId(oldid,newid)})];this.attachEvent("onEventChanged",function(id){this.save(id)});this.attachEvent("onEventAdded",function(id,data){if(!source.data.pull[id]){source.add(data)}});this.attachEvent("onEventDeleted",function(id){if(source.data.pull[id]){source.remove(id)}});insync()};scheduler.unsync=function(target){dhx.BaseBind._unbind.call(this,target)};scheduler._initBindSource=function(){if(!this._settings){this._settings={id:dhx.uid()}}}};Scheduler.$syncFactory(window.scheduler)}if(window.dhtmlXCombo){dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXCombo.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXCombo.prototype.unsync=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXCombo.prototype.dataFeed=function(value){if(this._settings){this._settings.dataFeed=value}else{this._server_feed=value}};dhtmlXCombo.prototype.sync=function(source,rule){if(this._initBindSource){this._initBindSource()}if(source._initBindSource){source._initBindSource()}var combo=this;var insync=function(ignore){combo.clearAll();combo.addOption(this.serialize());combo.callEvent("onSyncApply",[])};this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){insync.call(this)}),source.data.attachEvent("onIdChange",function(oldid,newid){combo.changeOptionId(oldid,newid)})];insync.call(source)};dhtmlXCombo.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(code){code.call(this)},this)};dhx4._eventable(this.data);this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}};dhtmlXCombo.prototype.item=function(id){return this.getOption(id)};dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()};dhtmlXCombo.prototype.isVisible=function(){if(!this.optionsArr.length&&!this._settings.dataFeed){return false}return true};dhtmlXCombo.prototype.refresh=function(){this.render(true)}}if(window.dhtmlXGridObject){dhtmlXGridObject.prototype.bind=function(source,rule,format){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXGridObject.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXGridObject.prototype.unsync=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXGridObject.prototype.dataFeed=function(value){if(this._settings){this._settings.dataFeed=value}else{this._server_feed=value}};dhtmlXGridObject.prototype.sync=function(source,rule){if(this._initBindSource){this._initBindSource()}if(source._initBindSource){source._initBindSource()}var grid=this;var parsing="_parsing";var parser="_parser";var locator="_locator";var parser_func="_process_store_row";var locator_func="_get_store_data";if(rule&&rule.filter){grid.attachEvent("onFilterStart",function(cols,values){var name="_con_f_used";if(grid[name]&&grid[name].length){return false}source.data.silent(function(){source.filter();for(var i=0;i<cols.length;i++){if(values[i]==""){continue}var id=grid.getColumnId(cols[i]);source.filter("#"+id+"#",values[i],i!=0)}});source.refresh();return false});grid.collectValues=function(index){var id=this.getColumnId(index);return(function(id){var values=[];var checks={};this.data.each(function(obj){var value=obj[id];if(!checks[value]){checks[value]=true;values.push(value)}});values.sort();return values}).call(source,id)}}this.save=function(id){if(!id){id=this.getCursor()}dhx.extend(source.item(id),this.item(id),true);source.update(id)};var insync=function(ignore){var cursor=grid.getCursor?grid.getCursor():null;var from=0;if(grid._legacy_ignore_next){from=grid._legacy_ignore_next;grid._legacy_ignore_next=false}else{grid.clearAll()}var count=this.dataCount();if(count){grid[parsing]=true;for(var i=from;i<count;i++){var id=this.order[i];if(!id){continue}if(from&&grid.rowsBuffer[i]){continue}grid.rowsBuffer[i]={idd:id,data:this.pull[id]};grid.rowsBuffer[i][parser]=grid[parser_func];grid.rowsBuffer[i][locator]=grid[locator_func];grid.rowsAr[id]=this.pull[id]}if(!grid.rowsBuffer[count-1]){grid.rowsBuffer[count-1]=dhtmlx.undefined;grid.xmlFileUrl=grid.xmlFileUrl||this.url}if(grid.pagingOn){grid.changePage()}else{if(grid._srnd&&grid._fillers){grid._update_srnd_view()}else{grid.render_dataset();grid.callEvent("onXLE",[])}}grid[parsing]=false}if(cursor&&grid.setCursor){grid.setCursor(grid.rowsAr[cursor]?cursor:null)}grid.callEvent("onSyncApply",[])};this._sync_events=[source.data.attachEvent("onStoreUpdated",function(id,data,mode){if(mode=="delete"){grid.deleteRow(id);grid.data.callEvent("onStoreUpdated",[id,data,mode])}else{if(mode=="update"){grid.callEvent("onSyncUpdate",[data,mode]);grid.update(id,data);grid.data.callEvent("onStoreUpdated",[id,data,mode])}else{if(mode=="add"){grid.callEvent("onSyncUpdate",[data,mode]);grid.add(id,data,this.indexById(id));grid.data.callEvent("onStoreUpdated",[id,data,mode])}else{insync.call(this)}}}}),source.data.attachEvent("onStoreLoad",function(driver,data){grid.xmlFileUrl=source.data.url;grid._legacy_ignore_next=driver.getInfo(data)._from}),source.data.attachEvent("onIdChange",function(oldid,newid){grid.changeRowId(oldid,newid)})];grid.attachEvent("onDynXLS",function(start,count){for(var i=start;i<start+count;i++){if(!source.data.order[i]){source.loadNext(count,start);return false}}grid._legacy_ignore_next=start;insync.call(source.data)});insync.call(source.data);grid.attachEvent("onEditCell",function(stage,id,ind,value,oldvalue){if(stage==2&&value!=oldvalue){this.save(id)}return true});grid.attachEvent("onClearAll",function(){var name="_f_rowsBuffer";this[name]=null});if(rule&&rule.sort){grid.attachEvent("onBeforeSorting",function(ind,type,dir){if(type=="connector"){return false}var id=this.getColumnId(ind);source.sort("#"+id+"#",(dir=="asc"?"asc":"desc"),(type=="int"?type:"string"));grid.setSortImgState(true,ind,dir);return false})}if(rule&&rule.select){grid.attachEvent("onRowSelect",function(id){source.setCursor(id)})}grid.clearAndLoad=function(url){source.clearAll();source.load(url)}};dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(code){code.call(this)},this)};dhx4._eventable(this.data);var name="_cCount";for(var i=0;i<this[name];i++){if(!this.columnIds[i]){this.columnIds[i]="cell"+i}}this.attachEvent("onSelectStateChanged",function(id){this.callEvent("onSelectChange",[id])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(stage,rId){if(stage===2&&this.getCursor){if(rId&&rId==this.getCursor()){this._update_binds()}}return true});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}};dhtmlXGridObject.prototype.item=function(id){if(id===null){return null}var source=this.getRowById(id);if(!source){return null}var name="_attrs";var data=dhx.copy(source[name]);data.id=id;var length=this.getColumnsNum();for(var i=0;i<length;i++){data[this.columnIds[i]]=this.cells(id,i).getValue()}return data};dhtmlXGridObject.prototype.update=function(id,data){for(var i=0;i<this.columnIds.length;i++){var key=this.columnIds[i];if(!dhx.isUndefined(data[key])){this.cells(id,i).setValue(data[key])}}var name="_attrs";var attrs=this.getRowById(id)[name];for(var key in data){attrs[key]=data[key]}this.callEvent("onBindUpdate",[data,null,id])};dhtmlXGridObject.prototype.add=function(id,data,index){var ar_data=[];for(var i=0;i<this.columnIds.length;i++){var key=this.columnIds[i];ar_data[i]=dhx.isUndefined(data[key])?"":data[key]}this.addRow(id,ar_data,index);var name="_attrs";this.getRowById(id)[name]=dhx.copy(data)};dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()};dhtmlXGridObject.prototype.isVisible=function(){var name="_f_rowsBuffer";if(!this.rowsBuffer.length&&!this[name]&&!this._settings.dataFeed){return false}return true};dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()};dhtmlXGridObject.prototype.filter=function(callback,master){if(this._settings.dataFeed){var filter={};if(!callback&&!master){return}if(typeof callback=="function"){if(!master){return}callback(master,filter)}else{if(dhx.isUndefined(callback)){filter=master}else{filter[callback]=master}}this.clearAll();var url=this._settings.dataFeed;if(typeof url=="function"){return url.call(this,master,filter)}var urldata=[];for(var key in filter){urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]))}this.load(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&"));return false}if(master===null){return this.filterBy(0,function(){return false})}this.filterBy(0,function(value,id){return callback.call(this,id,master)})}}if(window.dhtmlXTreeObject){dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)};dhtmlXTreeObject.prototype.unbind=function(target){dhx.BaseBind._unbind.call(this,target)};dhtmlXTreeObject.prototype.dataFeed=function(value){if(this._settings){this._settings.dataFeed=value}else{this._server_feed=value}};dhtmlXTreeObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=this;this.data={silent:dhx.bind(function(code){code.call(this)},this)};dhx4._eventable(this.data);this.attachEvent("onSelect",function(id){this.callEvent("onSelectChange",[id])});this.attachEvent("onEdit",function(stage,rId){if(stage===2){if(rId&&rId==this.getCursor()){this._update_binds()}}return true})}};dhtmlXTreeObject.prototype.item=function(id){if(id===null){return null}return{id:id,text:this.getItemText(id)}};dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()};dhtmlXTreeObject.prototype.isVisible=function(){return true};dhtmlXTreeObject.prototype.refresh=function(){};dhtmlXTreeObject.prototype.filter=function(callback,master){if(this._settings.dataFeed){var filter={};if(!callback&&!master){return}if(typeof callback=="function"){if(!master){return}callback(master,filter)}else{if(dhx.isUndefined(callback)){filter=master}else{filter[callback]=master}}this.deleteChildItems(0);var url=this._settings.dataFeed;if(typeof url=="function"){return url.call(this,[(data.id||data),data])}var urldata=[];for(var key in filter){urldata.push("dhx_filter["+key+"]="+encodeURIComponent(filter[key]))}this.loadXML(url+(url.indexOf("?")<0?"?":"&")+urldata.join("&"));return false}};dhtmlXTreeObject.prototype.update=function(id,data){if(!dhx.isUndefined(data.text)){this.setItemText(id,data.text)}}}})();function dataProcessor(a){this.serverProcessor=a;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=true;this.updateMode="cell";this._tMode="GET";this._headers=null;this._payload=null;this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"};this.enableUTFencoding(true);dhx4._eventable(this);if(this.connector_init){this.setTransactionMode("POST",true);this.serverProcessor+=(this.serverProcessor.indexOf("?")!=-1?"&":"?")+"editing=true"}return this}dataProcessor.prototype={url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}},setTransactionMode:function(b,a){if(typeof b=="object"){this._tMode=b.mode||this._tMode;this._headers=this._headers||b.headers;this._payload=this._payload||b.payload}else{this._tMode=b;this._tSend=a}if(this._tMode=="REST"){this._tSend=false;this._endnm=true}if(this._tMode=="JSON"){this._tSend=false;this._endnm=true;this._headers=this._headers||{};this._headers["Content-type"]="application/json"}},escape:function(a){if(this._utf){return encodeURIComponent(a)}else{return escape(a)}},enableUTFencoding:function(a){this._utf=dhx4.s2b(a)},setDataColumns:function(a){this._columns=(typeof a=="string")?a.split(","):a},getSyncState:function(){return !this.updatedRows.length},enableDataNames:function(a){this._endnm=dhx4.s2b(a)},enablePartialDataSend:function(a){this._changed=dhx4.s2b(a)},setUpdateMode:function(b,a){this.autoUpdate=(b=="cell");this.updateMode=b;this.dnd=a},ignore:function(b,a){this._silent_mode=true;b.call(a||window);this._silent_mode=false},setUpdated:function(e,c,g){this._log("item "+e+" "+(c?"marked":"unmarked")+" ["+(g||"updated")+"]");if(this._silent_mode){return}var b=this.findRow(e);g=g||"updated";var a=this.obj.getUserData(e,this.action_param);if(a&&g=="updated"){g=a}if(c){this.set_invalid(e,false);this.updatedRows[b]=e;this.obj.setUserData(e,this.action_param,g);if(this._in_progress[e]){this._in_progress[e]="wait"}}else{if(!this.is_invalid(e)){this.updatedRows.splice(b,1);this.obj.setUserData(e,this.action_param,"")}}if(!c){this._clearUpdateFlag(e)}this.markRow(e,c,g);if(c&&this.autoUpdate){this.sendData(e)}},_clearUpdateFlag:function(a){},markRow:function(h,c,g){var e="";var b=this.is_invalid(h);if(b){e=this.styles[b];c=true}if(this.callEvent("onRowMark",[h,c,g,b])){e=this.styles[c?g:"clear"]+e;this.obj[this._methods[0]](h,e);if(b&&b.details){e+=this.styles[b+"_cell"];for(var a=0;a<b.details.length;a++){if(b.details[a]){this.obj[this._methods[1]](h,a,e)}}}}},getState:function(a){return this.obj.getUserData(a,this.action_param)},is_invalid:function(a){return this._invalid[a]},set_invalid:function(c,b,a){if(a){b={value:b,details:a,toString:function(){return this.value.toString()}}}this._invalid[c]=b},checkBeforeUpdate:function(a){return true},sendData:function(a){if(a){this._log("Sending: "+a)}if(this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2)){return}if(this.obj.editStop){this.obj.editStop()}if(typeof a=="undefined"||this._tSend){return this.sendAllData()}if(this._in_progress[a]){return false}this.messages=[];if(this.getState(a)!=="deleted"){if(!this.checkBeforeUpdate(a)&&this.callEvent("onValidationError",[a,this.messages])){return false}}this._beforeSendData(this._getRowData(a),a)},_beforeSendData:function(a,b){if(!this.callEvent("onBeforeUpdate",[b,this.getState(b),a])){return false}this._sendData(a,b)},serialize:function(e,g){if(typeof e=="string"){return e}if(typeof g!="undefined"){return this.serialize_one(e,"")}else{var a=[];var c=[];for(var b in e){if(e.hasOwnProperty(b)){a.push(this.serialize_one(e[b],b+this.post_delim));c.push(b)}}a.push("ids="+this.escape(c.join(",")));if(window.dhtmlx&&dhtmlx.security_key){a.push("dhx_security="+dhtmlx.security_key)}return a.join("&")}},serialize_one:function(e,b){if(typeof e=="string"){return e}var a=[];for(var c in e){if(e.hasOwnProperty(c)){if((c=="id"||c==this.action_param)&&this._tMode=="REST"){continue}a.push(this.escape((b||"")+c)+"="+this.escape(e[c]))}}return a.join("&")},_applyPayload:function(a){if(this._payload){for(var b in this._payload){a=a+(a.indexOf("?")===-1?"?":"&")+this.escape(b)+"="+this.escape(this._payload[b])}}return a},_sendData:function(g,h){this._log("url: "+this.serverProcessor);this._log(g);if(!g){return}if(!this.callEvent("onBeforeDataSending",h?[h,this.getState(h),g]:[null,null,g])){return false}if(h){this._in_progress[h]=(new Date()).valueOf()}var n=this;var m=function(r){var t=[];if(h){t.push(h)}else{if(g){for(var s in g){t.push(s)}}}return n.afterUpdate(n,r,t)};var b=this.serverProcessor+(this._user?(this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&")):"");var q=this._applyPayload(b);if(this._tMode=="GET"){dhx4.ajax.query({url:q+((q.indexOf("?")!=-1)?"&":"?")+this.serialize(g,h),method:"GET",headers:this._headers,callback:m})}else{if(this._tMode=="POST"){dhx4.ajax.query({url:q,method:"POST",headers:this._headers,callback:m,data:this.serialize(g,h)})}else{if(this._tMode=="JSON"){var j=g[this.action_param];var l={};for(var o in g){l[o]=g[o]}delete l[this.action_param];delete l.id;delete l.gr_id;dhx4.ajax.query({url:q,method:"POST",headers:this._headers,callback:m,data:JSON.stringify({id:h,action:j,data:l})})}else{if(this._tMode=="REST"){var e=this.getState(h);var c=b.replace(/(\&|\?)editing\=true/,"");var k=c.split("?");if(k[1]){k[1]="?"+k[1]}var l="";var a="post";if(e=="inserted"){l=this.serialize(g,h)}else{if(e=="deleted"){a="DELETE";c=k[0]+h+(k[1]||"")}else{a="PUT";l=this.serialize(g,h);c=k[0]+h+(k[1]||"")}}this._applyPayload(c);dhx4.ajax.query({url:c,method:a,headers:this._headers,data:l,callback:m})}}}}this._waitMode++},sendAllData:function(){this._log("Sending all updated items");if(!this.updatedRows.length){return}this.messages=[];var b=true;for(var a=0;a<this.updatedRows.length;a++){if(this.getState(this.updatedRows[a])!=="deleted"){b&=this.checkBeforeUpdate(this.updatedRows[a])}}if(!b&&!this.callEvent("onValidationError",["",this.messages])){return false}if(this._tSend){this._sendData(this._getAllData())}else{for(var a=0;a<this.updatedRows.length;a++){if(!this._in_progress[this.updatedRows[a]]){if(this.is_invalid(this.updatedRows[a])){continue}this._beforeSendData(this._getRowData(this.updatedRows[a]),this.updatedRows[a]);if(this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2)){return}}}}},_getAllData:function(e){var b={};var a=false;for(var c=0;c<this.updatedRows.length;c++){var g=this.updatedRows[c];if(this._in_progress[g]||this.is_invalid(g)){continue}if(!this.callEvent("onBeforeUpdate",[g,this.getState(g),this._getRowData(g)])){continue}b[g]=this._getRowData(g,g+this.post_delim);a=true;this._in_progress[g]=(new Date()).valueOf()}return a?b:null},setVerificator:function(b,a){this.mandatoryFields[b]=a||(function(c){return(c!=="")})},clearVerificator:function(a){this.mandatoryFields[a]=false},findRow:function(b){var a=0;for(a=0;a<this.updatedRows.length;a++){if(b==this.updatedRows[a]){break}}return a},defineAction:function(a,b){if(!this._uActions){this._uActions=[]}this._uActions[a]=b},afterUpdateCallback:function(b,j,h,g){this._log("Action: "+h+" SID:"+b+" TID:"+j,g);var a=b;var e=(h!="error"&&h!="invalid");if(!e){this.set_invalid(b,h)}if((this._uActions)&&(this._uActions[h])&&(!this._uActions[h](g))){return(delete this._in_progress[a])}if(this._in_progress[a]!="wait"){this.setUpdated(b,false)}var c=b;switch(h){case"inserted":case"insert":if(j!=b){this.obj[this._methods[2]](b,j);b=j}break;case"delete":case"deleted":this.obj.setUserData(b,this.action_param,"true_deleted");this.obj[this._methods[3]](b);delete this._in_progress[a];return this.callEvent("onAfterUpdate",[b,h,j,g]);break}if(this._in_progress[a]!="wait"){if(e){this.obj.setUserData(b,this.action_param,"")}delete this._in_progress[a]}else{delete this._in_progress[a];this.setUpdated(j,true,this.obj.getUserData(b,this.action_param))}this.callEvent("onAfterUpdate",[c,h,j,g])},enableDebug:function(){this._debug=true},_log:function(){if(this._debug&&window.console&&window.console.info){window.console.info.apply(window.console,arguments)}},afterUpdate:function(l,k,a){this._log("Server response received");if(window.JSON){try{var q=JSON.parse(k.xmlDoc.responseText);var g=q.action||this.getState(a)||"updated";var b=q.sid||a[0];var c=q.tid||a[0];l.afterUpdateCallback(b,c,g,q);l.finalizeUpdate();return}catch(m){}}var o=dhx4.ajax.xmltop("data",k.xmlDoc);if(!o||o.tagName=="DIV"){return this.cleanUpdate(a)}var n=dhx4.ajax.xpath("//data/action",o);if(!n.length){return this.cleanUpdate(a)}for(var j=0;j<n.length;j++){var h=n[j];var g=h.getAttribute("type");var b=h.getAttribute("sid");var c=h.getAttribute("tid");l.afterUpdateCallback(b,c,g,h)}l.finalizeUpdate()},cleanUpdate:function(b){if(b){for(var a=0;a<b.length;a++){delete this._in_progress[b[a]]}}},finalizeUpdate:function(){if(this._waitMode){this._waitMode--}if((this.obj.mytype=="tree"||this.obj._h2)&&this.updatedRows.length){this.sendData()}this.callEvent("onAfterUpdateFinish",[]);if(!this.updatedRows.length){this.callEvent("onFullSync",[])}},init:function(a){this.obj=a;if(a._dp_init){a._dp_init(this)}if(this.connector_init){a._dataprocessor=this}},setOnAfterUpdate:function(a){this.attachEvent("onAfterUpdate",a)},setOnBeforeUpdateHandler:function(a){this.attachEvent("onBeforeDataSending",a)},setAutoUpdate:function(c,b){c=c||2000;this._user=b||(new Date()).valueOf();this._need_update=false;this._update_busy=false;this.attachEvent("onAfterUpdate",function(e,h,j,g){this.afterAutoUpdate(e,h,j,g)});this.attachEvent("onFullSync",function(){this.fullSync()});var a=this;window.setInterval(function(){a.loadUpdate()},c)},afterAutoUpdate:function(a,c,e,b){if(c=="collision"){this._need_update=true;return false}else{return true}},fullSync:function(){if(this._need_update==true){this._need_update=false;this.loadUpdate()}return true},getUpdates:function(a,b){if(this._update_busy){return false}else{this._update_busy=true}dhx4.ajax.get(a,b)},_v:function(a){if(a.firstChild){return a.firstChild.nodeValue}return""},_a:function(a){var c=[];for(var b=0;b<a.length;b++){c[b]=this._v(a[b])}return c},loadUpdate:function(){var b=this;var a=this.obj.getUserData(0,"version");var c=this.serverProcessor+this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+a].join("&");c=c.replace("editing=true&","");this.getUpdates(c,function(l){var m=dhx4.ajax.xmltop("updates",l.xmlDoc);var h=dhx4.ajax.xpath("//userdata",m);b.obj.setUserData(0,"version",b._v(h[0]));var e=dhx4.ajax.xpath("//update",m);if(e.length){b._silent_mode=true;for(var j=0;j<e.length;j++){var g=e[j].getAttribute("status");var n=e[j].getAttribute("id");var k=e[j].getAttribute("parent");switch(g){case"inserted":b.callEvent("insertCallback",[e[j],n,k]);break;case"updated":b.callEvent("updateCallback",[e[j],n,k]);break;case"deleted":b.callEvent("deleteCallback",[e[j],n,k]);break}}b._silent_mode=false}b._update_busy=false;b=null})}};if(window.dataProcessor&&!dataProcessor.prototype.init_original){dataProcessor.prototype.connector_init=true};